{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///external \"path\"","webpack:///./src/utils/typeConverters.ts","webpack:///./node_modules/vscode-nls/lib/main.js","webpack:///./src/typescriptService.ts","webpack:///./src/utils/dependentRegistration.ts","webpack:///./src/utils/api.ts","webpack:///./src/utils/dispose.ts","webpack:///external \"fs\"","webpack:///./node_modules/diagnostic-channel/dist/src/channel.js","webpack:///./node_modules/applicationinsights/out/Library/Logging.js","webpack:///./src/utils/arrays.ts","webpack:///./src/protocol.const.ts","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack:///./src/utils/languageModeIds.ts","webpack:///./src/utils/fileSchemes.ts","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack:///./node_modules/applicationinsights/out/Library/Util.js","webpack:///./src/utils/cancellation.ts","webpack:///external \"os\"","webpack:///./src/utils/tsconfig.ts","webpack:///./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack:///./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack:///./src/utils/languageDescription.ts","webpack:///external \"assert\"","webpack:///./src/utils/modifiers.ts","webpack:///./src/utils/memoize.ts","webpack:///external \"url\"","webpack:///./node_modules/minimatch/minimatch.js","webpack:///external \"util\"","webpack:///external \"events\"","webpack:///./node_modules/path-is-absolute/index.js","webpack:///./src/utils/objects.ts","webpack:///./src/utils/resourceMap.ts","webpack:///./src/utils/previewer.ts","webpack:///./src/languageFeatures/definitionProviderBase.ts","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack:///./src/utils/temp.electron.ts","webpack:///./node_modules/glob/glob.js","webpack:///./node_modules/fs.realpath/index.js","webpack:///./node_modules/glob/common.js","webpack:///./node_modules/wrappy/wrappy.js","webpack:///./node_modules/once/once.js","webpack:///./src/commands/learnMoreAboutRefactorings.ts","webpack:///./src/languageFeatures/codeLens/baseCodeLensProvider.ts","webpack:///./src/tsServer/server.ts","webpack:///./src/tsServer/serverError.ts","webpack:///./src/utils/codeAction.ts","webpack:///./src/utils/errorCodes.ts","webpack:///./src/utils/fixNames.ts","webpack:///./src/tsServer/versionProvider.ts","webpack:///./src/utils/async.ts","webpack:///./src/utils/configuration.ts","webpack:///./src/utils/platform.ts","webpack:///./src/utils/relativePathResolver.ts","webpack:///./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack:///external \"module\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack:///external \"child_process\"","webpack:///./node_modules/jsonc-parser/lib/esm/impl/scanner.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/format.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/parser.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/edit.js","webpack:///./node_modules/jsonc-parser/lib/esm/main.js","webpack:///./src/extension.ts","webpack:///./node_modules/rimraf/rimraf.js","webpack:///./node_modules/fs.realpath/old.js","webpack:///./node_modules/brace-expansion/index.js","webpack:///./node_modules/concat-map/index.js","webpack:///./node_modules/balanced-match/index.js","webpack:///./node_modules/inherits/inherits.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/glob/sync.js","webpack:///./node_modules/inflight/inflight.js","webpack:///./src/api.ts","webpack:///./src/commands/index.ts","webpack:///./src/commands/configurePlugin.ts","webpack:///./src/commands/goToProjectConfiguration.ts","webpack:///./src/commands/openTsServerLog.ts","webpack:///./src/commands/reloadProject.ts","webpack:///./src/commands/restartTsServer.ts","webpack:///./src/commands/selectTypeScriptVersion.ts","webpack:///./src/languageFeatures/languageConfiguration.ts","webpack:///./src/lazyClientHost.ts","webpack:///./src/typeScriptServiceClientHost.ts","webpack:///./src/languageFeatures/fileConfigurationManager.ts","webpack:///./node_modules/semver/semver.js","webpack:///./src/languageProvider.ts","webpack:///./src/tsServer/cachedResponse.ts","webpack:///./src/languageFeatures/callHierarchy.ts","webpack:///./src/languageFeatures/codeLens/implementationsCodeLens.ts","webpack:///./src/utils/regexp.ts","webpack:///./src/languageFeatures/codeLens/referencesCodeLens.ts","webpack:///./src/tsServer/callbackMap.ts","webpack:///./src/tsServer/requestQueue.ts","webpack:///./src/languageFeatures/completions.ts","webpack:///./src/utils/snippetForFunctionCall.ts","webpack:///./src/languageFeatures/definitions.ts","webpack:///./src/languageFeatures/directiveCommentCompletions.ts","webpack:///./src/languageFeatures/documentHighlight.ts","webpack:///./src/languageFeatures/documentSymbol.ts","webpack:///./src/languageFeatures/fileReferences.ts","webpack:///./src/languageFeatures/fixAll.ts","webpack:///./src/languageFeatures/folding.ts","webpack:///./src/languageFeatures/formatting.ts","webpack:///./src/languageFeatures/hover.ts","webpack:///./src/languageFeatures/implementations.ts","webpack:///./src/languageFeatures/jsDocCompletions.ts","webpack:///./src/languageFeatures/organizeImports.ts","webpack:///./src/languageFeatures/quickFix.ts","webpack:///./src/languageFeatures/refactor.ts","webpack:///./src/languageFeatures/references.ts","webpack:///./src/languageFeatures/rename.ts","webpack:///./src/languageFeatures/semanticTokens.ts","webpack:///./src/languageFeatures/signatureHelp.ts","webpack:///./src/languageFeatures/smartSelect.ts","webpack:///./src/languageFeatures/tagClosing.ts","webpack:///./src/languageFeatures/typeDefinitions.ts","webpack:///./src/tsServer/versionStatus.ts","webpack:///./src/typescriptServiceClient.ts","webpack:///./src/languageFeatures/diagnostics.ts","webpack:///./src/tsServer/bufferSyncSupport.ts","webpack:///./src/tsServer/spawner.ts","webpack:///./src/tsServer/versionManager.ts","webpack:///./src/utils/logger.ts","webpack:///./src/utils/pluginPathsProvider.ts","webpack:///./src/utils/telemetry.ts","webpack:///./node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","webpack:///./node_modules/applicationinsights/out/applicationinsights.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack:///./node_modules/diagnostic-channel/node_modules/semver/semver.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack:///external \"stream\"","webpack:///external \"console\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Connection$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Pool$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack:///./node_modules/zone.js/dist/zone-node.js","webpack:///external \"timers\"","webpack:///external \"crypto\"","webpack:///external \"_http_client\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack:///external \"constants\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack:///./node_modules/applicationinsights/out/Library/NodeClient.js","webpack:///./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack:///./node_modules/applicationinsights/out/Library/Config.js","webpack:///./node_modules/applicationinsights/out/Library/Context.js","webpack:///./node_modules/applicationinsights/out/Library/Channel.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack:///./node_modules/applicationinsights/out/Library/Sender.js","webpack:///external \"zlib\"","webpack:///./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack:///./src/utils/tracer.ts","webpack:///./src/utils/typingsStatus.ts","webpack:///./src/utils/largeProjectStatus.ts","webpack:///./src/languageFeatures/updatePathsOnRename.ts","webpack:///./src/languageFeatures/workspaceSymbols.ts","webpack:///./src/utils/lazy.ts","webpack:///./src/utils/managedFileContext.ts","webpack:///./src/tsServer/cancellation.electron.ts","webpack:///./src/tsServer/logDirectoryProvider.electron.ts","webpack:///./src/tsServer/serverProcess.electron.ts","webpack:///./src/tsServer/versionProvider.electron.ts","webpack:///./src/commands/commandManager.ts","webpack:///./src/utils/fileSystem.electron.ts","webpack:///./src/utils/plugins.ts","webpack:///./src/task/taskProvider.ts","webpack:///./src/test/testUtils.ts","webpack:///./src/utils/fs.ts","webpack:///./src/task/tsconfigProvider.ts","webpack:///./src/languageFeatures/tsconfig.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Range","Position","fromTextSpan","span","fromLocations","start","end","toTextSpan","range","toLocation","vscode","Math","max","line","offset","toFileRangeRequestArgs","file","startLine","startOffset","character","endLine","endOffset","toFormattingRequestArgs","fromLocation","tslocation","vsPosition","toFileLocationRequestArgs","position","Location","resource","tsTextSpan","TextEdit","fromCodeEdit","edit","newText","WorkspaceEdit","withFileCodeEdits","workspaceEdit","client","edits","toResource","fileName","textChange","textChanges","replace","fromFileCodeEdits","SymbolKind","fromProtocolScriptElementKind","kind","PConst","Kind","Module","class","Class","enum","Enum","enumMember","EnumMember","interface","Interface","indexSignature","callSignature","method","Method","memberVariable","memberGetAccessor","memberSetAccessor","Property","variable","let","const","localVariable","alias","Variable","function","localFunction","Function","constructSignature","constructorImplementation","Constructor","typeParameter","TypeParameter","string","String","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","options","isPseudo","path","fs","toString","isDefined","isNumber","isString","readJsonFileSync","filename","JSON","parse","readFileSync","format","message","args","length","match","rest","index","arg","replacement","createScopedLocalizeFunction","messages","_i","arguments","console","error","Error","stack","warn","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","header","bundlePath","result","join","cacheRoot","id","hash","useMemoryOnly","writeBundle","encoding","flag","Date","utimes","err","code","SyntaxError","log","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","contents","metaData","module_2","entry","translations","outDir","resultMessages","keys","messageKey","translatedMessage","undefined","push","createNLSBundle","writeFileSync","stringify","loadDefaultNlsBundle","folder","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","candidate","root","language","existsSync","lastIndexOf","substring","findInTheBoxBundle","loadMessageBundle","ext","extname","substr","messageFormat","both","headerFile","dirname","parent","tryFindMetaDataHeaderFile","nlsBundle","module_3","json","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","Array","isArray","is","comment","process","env","VSCODE_NLS_CONFIG","vscodeOptions_1","availableLanguages","toLowerCase","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","exists","writeFile","_a","initializeSettings","config","opts","bundleFormat","standalone","ServerType","ServerResponse","Cancelled","reason","type","NoContent","ClientCapability","capabilities","this","Set","capability","has","Condition","Disposable","getValue","onUpdate","super","_onDidChange","_register","EventEmitter","onDidChange","event","_value","newValue","fire","ConditionalRegistration","conditions","doRegister","registration","condition","update","dispose","every","minVersion","apiVersion","gte","onTsServerStarted","configValue","workspace","getConfiguration","onDidChangeConfiguration","some","requiredCapability","onDidChangeCapabilities","disposeAll","disposables","item","pop","_isDisposed","_disposables","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","version","subscribers","contextPreservationFunction","cb","knownPatches","currentlyPublishing","shouldPublish","listeners","filter","publish","standardEvent_1","timestamp","now","data","forEach","listener","e","subscribe","unsubscribe","splice","reset","_this","getOwnPropertyNames","prop","bindToContext","addContextPreservation","preserver","previousPreservationStack","registerMonkeyPatch","packageName","patcher","getPatchesObject","global","diagnosticsSource","channel","Logging","info","optionalParams","enableDebug","TAG","disableWarnings","empty","freeze","a","b","itemEquals","x","array","concat","apply","directory","externalModuleName","keyword","primitiveType","script","warning","parameter","DiagnosticCategory","suggestion","KindModifiers","optional","depreacted","color","dtsFile","tsFile","tsxFile","jsFile","jsxFile","jsonFile","fileExtensionKindModifiers","DisplayPartKind","functionName","methodName","parameterName","propertyName","punctuation","text","EventName","__export","typescript","typescriptreact","javascript","javascriptreact","jsxTags","doc","languages","untitled","git","vsls","walkThroughSnippet","semanticSupportedSchemes","disabledSchemes","Domain","__assign","assign","http","https","url","constants","RequestResponseHeaders","Util","getCookie","cookie","cookieName","cookies","split","trim","indexOf","str","int32ArrayToBase64","toChar","v","fromCharCode","map","Buffer","from","random32","random","randomu32","w3cTraceId","tmp","hexValues","oct","clockSequenceHi","obj","isError","isPrimitive","input","propType","isDate","msToTimeSpan","totalms","isNaN","sec","toFixed","min","floor","hour","days","extractError","looseError","extractObject","origProperty","toJSON","validateStringMap","field","stringTarget","constructor","MAX_PROPERTY_LENGTH","canIncludeCorrelationHeader","requestUrl","excludedDomains","correlationHeaderExcludedDomains","RegExp","test","hostname","getCorrelationContextTarget","response","contextHeaders","headers","requestContextHeader","keyValues","keyValue","makeRequest","requestOptions","requestCallback","requestUrlParsed","host","port","pathname","proxyUrl","protocol","proxyHttpsUrl","proxyHttpUrl","proxyUrlParsed","Host","isHttps","httpsAgent","agent","httpAgent","tlsRestrictedAgent","request","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","noopDisposable","nulToken","isCancellationRequested","onCancellationRequested","DiagChannel","CorrelationContextManager","getCurrentContext","enabled","Zone","current","generateContextObject","operationId","parentId","operationName","correlationContextHeader","operation","customProperties","CustomPropertiesImpl","runWithContext","context","fn","fork","properties","run","wrapCallback","wrap","enable","isNodeVersionCompatible","hasEverEnabled","registerContextPreservation","patchError","patchTimers","disable","nodeVer","versions","node","parseInt","methodNames","orig","ret","handleId","AppInsightsAsyncCorrelatedErrorWrapper","stackRewrite","prepareStackTrace","stackTrace","foundOne","getFileName","stackFrames","startIndex","props","hiddenPropertyName","writable","getOwnPropertyDescriptor","addHeaderData","keyvals","keyval","parts","serializeToHeader","getProperty","setProperty","val","bannedCharacters","requestContextSourceKey","requestContextTargetKey","requestIdHeader","parentIdHeader","rootIdHeader","allDiagnosticLanguages","standardLanguageDescriptions","diagnosticOwner","diagnosticSource","diagnosticLanguage","modeIds","languageModeIds","configFilePattern","basename","fsPath","kindModifiers","_target","descriptor","fnKey","memoizeKey","configurable","minimatch","Minimatch","sep","er","GLOBSTAR","expand","plTypes","open","close","reSpecials","reduce","set","slashSplit","k","pattern","TypeError","nocomment","charAt","regexp","negate","make","braceExpand","nobrace","list","defaults","def","debug","_made","parseNegate","globSet","globParts","si","negateOffset","nonegate","isSub","noglobstar","stateChar","re","hasMagic","nocase","escaping","patternListStack","negativeLists","inClass","reClassStart","classStart","patternStart","dot","self","clearStateChar","qmark","len","noext","reStart","pl","reEnd","cs","sp","SUBPARSE","tail","slice","_","$1","$2","addPatternStart","nl","nlBefore","nlFirst","nlLast","nlAfter","openParensBefore","cleanAfter","dollar","globUnescape","flags","regExp","_glob","_src","makeRe","twoStar","regExpEscape","ex","mm","f","nonull","partial","matchBase","matchOne","flipNegate","fi","pi","fl","hit","fr","pr","swallowee","posix","win32","exec","device","isUnc","Boolean","platform","equals","one","other","oneKeys","sort","otherKeys","ResourceMap","_normalizePath","defaultPathNormalizer","_map","Map","size","toKey","delete","clear","values","isCaseInsensitivePath","isWindowsPath","onCaseInsenitiveFileSystem","scheme","fileSchemes","processInlineTags","tag","link","replaceLinks","getTagDocumentation","body","param","label","captionTagMatches","makeCodeblock","emailMatch","getTagBodyText","plain","part","tagsMarkdownPreview","tags","addMarkdownDocumentation","out","documentation","appendMarkdown","tagsPreview","MarkdownString","definitionType","document","token","toOpenedFilePath","typeConverters","execute","location","IsInitialized","publishers","unpatchedModules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","HttpDependencyParser","CorrelationContextManager_1","AutoCollectHttpDependencies","INSTANCE","_client","isEnabled","_isEnabled","_isInitialized","_initialize","isInitialized","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","telemetry","requestParser","currentContext","uniqueRequestId","requestNumber","getUrl","getHeader","setHeader","correlationId","correlationHeader","components","key_1","on","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","onError","CorrelationIdManager","queryCorrelationId","callback","appIdUrlString","profileQueryEndpoint","instrumentationKey","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","req","res","statusCode","appId_1","setEncoding","correlationIdPrefix","setTimeout","correlationIdRetryIntervalMs","cancelCorrelationIdQuery","generateRequestId","suffix","currentRootId","appendSuffix","generateRootId","getRootId","endIndex","delimiter","requestIdMaxLength","trimPosition","makeRandomHexString","chars","getRootTempDir","dir","getuid","os","tmpdir","mkdirSync","getInstanceTempDir","prefix","glob","rp","inherits","EE","assert","isAbsolute","globSync","common","setopts","alphasort","alphasorti","ownProp","inflight","childrenIgnored","isIgnored","once","sync","Glob","GlobSync","_didRealPath","matches","_processing","_emitQueue","_processQueue","paused","noprocess","done","_process","_finish","options_","origin","add","extend","j","aborted","realpath","_didRealpath","_realpath","finish","emit","found","_realpathSet","next","matchset","_makeAbs","realpathCache","real","syscall","_mark","mark","makeAbs","abort","pause","resume","eq","_emitMatch","pq","inGlobStar","_processSimple","read","remain","abs","_processGlobStar","_processReaddir","_readdir","entries","_processReaddir2","pn","rawGlob","dotOk","matchedEntries","stat","nomount","shift","absolute","nodir","cache","st","statCache","_readdirInGlobStar","follow","lstatcb","lstat","isSym","isSymbolicLink","symlinks","isDirectory","readdir","_readdirError","_readdirEntries","readdirCb","cwdAbs","cwd","strict","silent","_processGlobStar2","remainWithoutGlobStar","gspref","noGlobStar","instead","below","_stat","_processSimple2","trail","resolve","needDir","maxLength","statcb","_stat2","realpathSync","monkeypatch","unmonkeypatch","origRealpath","origRealpathSync","ok","old","newError","nounique","nosort","Infinity","ignore","ignoreMap","setupIgnores","changedCwd","nou","all","literal","notDir","isDir","slash","mabs","gmatcher","localeCompare","gpattern","matcher","wrappy","wrapper","called","onceStrict","onceError","proto","LearnMoreAboutRefactoringsCommand","docUrl","window","activeTextEditor","isTypeScriptDocument","openExternal","Uri","ExectuionTarget","RequestState","ProcessBasedTsServer","_serverId","_serverSource","_tsServerLogFile","_requestCanceller","_version","_telemetryReporter","_tracer","_requestQueue","RequestQueue","_callbacks","CallbackMap","_pendingResponses","_onEvent","onEvent","_onExit","onExit","_onError","onData","msg","dispatchMessage","destroy","serverRequest","write","kill","dispatchResponse","_serverType","seq","request_seq","fetch","traceRequestCompleted","onSuccess","traceEvent","sendNextRequests","command","tryDeletePendingRequest","logTrace","tryCancelOngoingRequest","fetchCallback","traceResponse","success","TypeScriptServerError","executeInfo","createRequest","requestInfo","expectsResponse","expectsResult","isAsync","queueingType","getQueueingType","lowPriority","Promise","reject","queuingStartTime","tryCancelRequest","catch","logTelemetry","enqueue","dequeue","sendRequest","requestItem","traceRequest","fenceCommands","RequestQueueingType","Fence","LowPriority","Normal","RequestRouter","servers","delegate","sharedCommands","executionTarget","requestStates","Unresolved","firstRequest","source","CancellationTokenSource","state","Resolved","cancel","serverIndex","server","executeImpl","then","erroredRequest","find","onFatalError","Errored","canRun","GetErrRoutingTsServer","getErrServer","getErr","mainServer","primary","router","includes","diagnosticEvents","tsServerLogFile","configFileDiag","syntaxDiag","semanticDiag","suggestionDiag","SyntaxRoutingTsServer","enableDynamicRouting","_projectLoading","syntaxServer","syntax","semanticServer","semantic","execInfo","Semantic","Syntax","syntaxAlwaysCommands","semanticCommands","projectLoading","syntaxAllowedCommands","projectLoadingStart","projectLoadingFinish","serverId","serverMessage","serverStack","sanitizedStack","displayName","parsedResult","parseErrorText","serverCommand","serverid","sanitizedstack","errorText","errorPrefix","startsWith","prefixFreeErrorText","newlineIndex","sanitizeStack","regex","getEditForCodeAction","action","changes","async","applyCodeActionCommands","commands","applyEdit","variableDeclaredButNeverUsed","propertyDeclaretedButNeverUsed","allImportsAreUnused","unreachableCode","unusedLabel","fallThroughCaseInSwitch","notAllCodePathsReturnAValue","incorrectlyImplementsInterface","cannotFindName","extendsShouldBeImplements","asyncOnlyAllowedInAsyncFunctions","annotateWithTypeFromJSDoc","constructorForDerivedNeedSuperCall","extendsInterfaceBecomesImplements","awaitInSyncFunction","classIncorrectlyImplementsInterface","classDoesntImplementInheritedAbstractMember","unusedIdentifier","forgottenThisPropertyAccess","spelling","fixImport","addMissingAwait","defaultDelay","timeout","completionPromise","task","delay","cancelTimeout","clearTimeout","TsServerLogLevel","fromString","Terse","Verbose","Off","ImplicitProjectConfiguration","configuration","checkJs","readCheckJs","experimentalDecorators","readExperimentalDecorators","strictNullChecks","readImplicitStrictNullChecks","strictFunctionTypes","readImplicitStrictFunctionTypes","objects","TypeScriptServiceConfiguration","tsServerLogLevel","extractLocale","globalTsdk","extractGlobalTsdk","localTsdk","extractLocalTsdk","npmLocation","readNpmLocation","readTsServerLogLevel","tsServerPluginPaths","readTsServerPluginPaths","implictProjectConfiguration","disableAutomaticTypeAcquisition","readDisableAutomaticTypeAcquisition","separateSyntaxServer","readUseSeparateSyntaxServer","enableProjectDiagnostics","readEnableProjectDiagnostics","maxTsServerMemory","readMaxTsServerMemory","enablePromptUseWorkspaceTsdk","readEnablePromptUseWorkspaceTsdk","watchOptions","readWatchOptions","includePackageJsonAutoImports","readIncludePackageJsonAutoImports","enableTsServerTracing","readEnableTsServerTracing","inspectValue","pathPrefixes","pathPrefix","homedir","inspect","globalValue","fixPathPrefixes","workspaceValue","setting","memoryInMB","Number","isSafeInteger","navigator","uiKind","UIKind","Web","relativePath","workspaceFolders","rootPrefixes","rootPrefix","uri","semver","moduleModule","nativeModules","binding","originalRequire","patchedModules","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","versionSpecifier","patch","AvailabilityData","Base","ContextTagKeys","Data","DataPoint","DataPointType","Envelope","EventData","ExceptionData","ExceptionDetails","MessageData","MetricData","PageViewData","RemoteDependencyData","RequestData","SeverityLevel","StackFrame","extendStatics","__extends","setPrototypeOf","__proto__","__","_super","ver","measurements","AutoCollectPerformance","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","setInterval","trackPerformance","unref","clearInterval","countRequest","_lastRequestExecutionTime","_trackCpu","_trackMemory","_trackNetwork","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","trackMetric","freeMem","freemem","usedMem","memoryUsage","rss","lastRequests","requests","intervalRequests","elapsedMs","elapsedSeconds","requestsPerSec","RequestParser","startTime","_setStatus","status","endTime","duration","_isSuccess","HttpRequestParser","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","getOperationId","getRequestId","getOperationName","getCorrelationContextHeader","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","originalAddListener","addListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","getOperationParentId","headersSent","ellapsedMilliseconds","requestTelemetry","getRequestTelemetry","tagOverrides","getRequestTags","createScanner","ignoreTrivia","pos","tokenOffset","lineNumber","lineStartOffset","tokenLineStartOffset","prevTokenLineStartOffset","scanError","scanHexDigits","count","exact","digits","ch","charCodeAt","scanNext","isWhiteSpace","isLineBreak","ch3","scanString","safeLength","commentClosed","isDigit","scanNumber","isUnknownContentCharacter","setPosition","newPosition","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenStartLine","getTokenStartCharacter","getTokenError","documentText","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","isEOL","content","nChars","tabSize","computeIndentLevel","indentValue","eol","getEOL","lineBreak","indentLevel","insertSpaces","repeat","scanner","hasError","newLineAndIndent","editOperations","addEdit","firstToken","firstTokenStart","firstTokenEnd","secondToken","replaceContent","ParseOptions","parseTree","errors","DEFAULT","currentParent","children","ensurePropertyComplete","onValue","valueNode","visit","onObjectBegin","onObjectProperty","onObjectEnd","onArrayBegin","onArrayEnd","onLiteralValue","getNodeType","onSeparator","colonOffset","findNodeAtLocation","path_1","segment","_b","propertyNode","visitor","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","onComment","disallowComments","allowTrailingComma","handleError","skipUntilAfter","skipUntil","parseString","isValue","parseValue","needsComma","parseArray","parseObject","tokenValue","parseLiteral","allowEmptyContent","originalPath","lastSegment","existing","propertyIndex","removeBegin","removeEnd","previous","withFormatting","newProperty","getInsertionIndex","insertIndex","removalIndex","toRemove","isArrayInsertion","toModify","formattingOptions","begin","edit_1","segments","earlyReturnException","previousNode","previousNodeInst","isAtPropertyKey","setPreviousNode","last","currentProperty","previousParents","findNodeAtOffset","includeRightBound","contains","getNodePath","getNodeValue","replaceCh","printParseErrorCode","modify","applyEdits","pluginManager","PluginManager","subscriptions","commandManager","CommandManager","onCompletionAccepted","logDirectoryProvider","NodeLogDirectoryProvider","versionProvider","DiskTypeScriptVersionProvider","LanguageConfigurationManager","lazyClientHost","createLazyClientHost","cancellerFactory","nodeRequestCancellerFactory","processFactory","ChildServerProcess","registerBaseCommands","register","serviceClient","lazilyActivateClient","getExtensionApi","rimraf","temp","rimrafSync","_err","_0666","defaultGlobOpts","isWindows","maxBusyTries","emfileWait","disableGlob","equal","busyTries","errState","afterGlob","results","rimraf_","CB","fixWinEPERM","rmdir","chmod","er2","er3","stats","fixWinEPERMSync","chmodSync","statSync","rmdirSync","unlinkSync","originalEr","files","rmkids","lstatSync","readdirSync","retries","threw","rmkidsSync","pathModule","DEBUG","NODE_DEBUG","maybeCallback","backtrace","missingCallback","throwDeprecation","noDeprecation","traceDeprecation","trace","rethrow","normalize","nextPartRe","splitRootRe","base","original","seenLinks","knownHard","lastIndex","resolvedLink","linkTarget","dev","ino","readlinkSync","nextTick","LOOP","gotResolvedLink","gotStat","gotTarget","readlink","target","concatMap","balanced","isTop","expansions","pre","isNumericSequence","isAlphaSequence","isSequence","isOptions","post","escClose","parseCommaParts","postParts","embrace","N","numeric","y","width","incr","lte","pad","isPadded","need","z","el","expansion","escSlash","escOpen","escComma","escPeriod","escapeBraces","unescapeBraces","xs","maybeMatch","reg","begs","beg","left","right","ai","bi","util","ctor","superCtor","super_","TempCtor","newPattern","reqs","RES","cbs","makeres","ApiV0","_pluginManager","pluginId","setConfiguration","ReloadTypeScriptProjectsCommand","ReloadJavaScriptProjectsCommand","SelectTypeScriptVersionCommand","OpenTsServerLogCommand","RestartTsServerCommand","TypeScriptGoToProjectConfigCommand","JavaScriptGoToProjectConfigCommand","ConfigurePluginCommand","editor","openProjectConfigForFile","openTsServerLogFile","reloadProjects","restartTsServer","showVersionPicker","jsTsLanguageConfiguration","indentationRules","decreaseIndentPattern","increaseIndentPattern","wordPattern","onEnterRules","beforeText","afterText","indentAction","IndentAction","IndentOutdent","appendText","None","previousLineText","removeText","Indent","EMPTY_ELEMENTS","jsxTagsLanguageConfiguration","standardLanguages","registerConfiguration","setLanguageConfiguration","services","lazy","clientHost","supportedLanguage","flatten","plugins","hasActivated","maybeActivate","textDocument","languageId","isSupportedDocument","toPath","textDocuments","openListener","onDidOpenTextDocument","styleCheckDiagnostics","errorCodes","TypeScriptServiceClientHost","descriptions","languagePerId","reportStyleCheckAsWarnings","allModeIds","getAllModeIds","onDiagnosticsReceived","diagnostics","diagnosticsReceived","onConfigDiagnosticsReceived","diag","configFileDiagnosticsReceived","onResendModelsRequested","populateService","AtaProgressReporter","typingsStatus","ProjectStatus","fileConfigurationManager","description","manager","telemetryReporter","handles","ensureServiceStarted","onReady","plugin","configNamespace","registerExtensionLanguageProvider","isExternal","triggerAllDiagnostics","configurationChanged","executeWithoutWaitingForResponse","findLanguage","bufferSyncSupport","typescriptConfig","openTextDocument","reInitialize","createMarkerDatas","configFile","tsDiag","diagnostic","Diagnostic","getDiagnosticSeverity","tsDiagnosticToVsDiagnostic","converted","relatedInformation","coalesce","DiagnosticRelatedInformation","reportsUnnecessary","DiagnosticTag","Unnecessary","reportsDeprecated","Deprecated","resultConverted","reportUnnecessary","reportDeprecated","isStyleCheckDiagnostic","category","DiagnosticSeverity","Warning","Hint","FileConfigurationManager","formatOptions","onDidCloseTextDocument","getFormattingOptions","ensureConfigurationOptions","visibleTextEditors","currentOptions","getFileOptions","cachedOptions","cachedOptionsValue","getFormatOptions","preferences","getPreferences","indentSize","convertTabsToSpaces","newLineCharacter","insertSpaceAfterCommaDelimiter","insertSpaceAfterConstructor","insertSpaceAfterSemicolonInForStatements","insertSpaceBeforeAndAfterBinaryOperators","insertSpaceAfterKeywordsInControlFlowStatements","insertSpaceAfterFunctionKeywordForAnonymousFunctions","insertSpaceBeforeFunctionParenthesis","insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces","insertSpaceAfterOpeningAndBeforeClosingEmptyBraces","insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces","insertSpaceAfterTypeAssertion","placeOpenBraceOnNewLineForFunctions","placeOpenBraceOnNewLineForControlBlocks","semicolons","lt","v290","preferencesConfig","quotePreference","getQuoteStylePreference","importModuleSpecifierPreference","getImportModuleSpecifierPreference","importModuleSpecifierEnding","getImportModuleSpecifierEndingPreference","allowTextChangesInNewFiles","providePrefixAndSuffixTextForRename","allowRenameOfImportPath","includeAutomaticOptionalChainCompletions","provideRefactorNotApplicableReason","v333","SemVer","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","raw","major","minor","prerelease","num","build","valid","clean","compare","compareMain","comparePre","compareIdentifiers","inc","release","identifier","diff","version1","version2","v1","v2","anum","bnum","gt","neq","cmp","op","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","rsort","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","validRange","ltr","gtr","parsed","r1","r2","coerce","LanguageProvider","registerProviders","selector","documentSelector","cachedResponse","CachedResponse","provider","diagnosticsManager","updateValidate","updateSuggestionDiagnostics","setValidate","_diagnosticLanguage","setEnableSuggestions","requestAllDiagnostics","diagnosticsKind","updateDiagnostics","severity","TypeScriptCallHierarchySupport","filepath","fromProtocolCallHierarchyItem","selectionRange","fromProtocolCallHierchyIncomingCall","fromProtocolCallHierchyOutgoingCall","useFileName","selectionSpan","isSourceFileItem","detail","asRelativePath","containerName","CallHierarchyItem","parseKindModifier","SymbolTag","CallHierarchyIncomingCall","fromSpans","CallHierarchyOutgoingCall","v380","conditionalRegistration","requireMinVersion","requireSomeCapability","registerCallHierarchyProvider","_asyncCallbacks","cause","cancellation","queue","sequenceNumber","displayParts","insertText","snippet","parameterCount","parameterListParts","isInMethod","hasOptionalParameters","parenCount","braceCount","outer","nameIsFollowedByOptionalIndicator","nameIsThis","getParameterListParts","SnippetString","joiner","paramterPart","appendPlaceholder","appendJoinedPlaceholders","appendTabstop","TypeScriptDefinitionProvider","v270","textSpan","definitions","contextStart","contextEnd","originSelectionRange","targetRange","targetUri","targetSelectionRange","getSymbolLocations","EnhancedSyntax","registerDefinitionProvider","TypeScriptDocumentHighlightProvider","filesToSearch","highlight","convertDocumentHighlight","highlightSpans","DocumentHighlight","DocumentHighlightKind","Write","Read","registerDocumentHighlightProvider","TypeScriptDocumentSymbolProvider","childItems","convertNavTree","output","shouldInclude","shouldInclueEntry","spans","symbolInfo","convertSymbol","child","intersection","includedChild","nameSpan","DocumentSymbol","getSymbolKind","registerDocumentSymbolProvider","TypeScriptFoldingProvider","_context","convertOutliningSpan","getFoldingRangeKind","lineAt","adjustFoldingEnd","FoldingRange","foldEndCharacter","getText","translate","foldEndPairCharacters","FoldingRangeKind","Comment","Region","Imports","v280","registerFoldingRangeProvider","TypeScriptFormattingProvider","formattingOptionsManager","textEdit","lText","modeId","requireConfiguration","formattingProvider","registerOnTypeFormattingEditProvider","registerDocumentRangeFormattingEditProvider","TypeScriptHoverProvider","interruptGetErr","Hover","getContents","displayString","hasCapabilityForResource","markdownDocumentation","registerHoverProvider","TypeScriptImplementationProvider","registerImplementationProvider","TypeScriptReferenceSupport","ref","refs","includeDeclaration","isDefinition","registerReferenceProvider","minTypeScriptVersion","fromVersionString","DocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","getLegend","SemanticTokensLegend","tokenTypes","tokenModifiers","_provideSemanticTokens","offsetAt","requestArg","versionBeforeRequest","cancelOnResourceChange","iv","waitForDocumentChangesToEnd","CancellationError","tokenSpan","builder","SemanticTokensBuilder","tsClassification","tokenType","getTokenTypeFromClassification","getTokenModifierFromClassification","tokenTypeMap","startPos","positionAt","endPos","startCharacter","endCharacter","TypeScriptSignatureHelpProvider","triggerReason","toTsTriggerReason","SignatureHelp","signatures","items","signature","convertSignature","activeSignature","getActiveSignature","activeParameter","getActiveParameter","previouslyActiveSignature","activeSignatureHelp","isRetrigger","existingIndex","findIndex","selectedItemIndex","isVariadic","argumentIndex","parameters","SignatureInformation","Previewer","prefixDisplayParts","textIndex","separatorLabel","separatorDisplayParts","ParameterInformation","suffixDisplayParts","triggerKind","SignatureHelpTriggerKind","TriggerCharacter","triggerCharacter","ContentChange","Invoke","triggerCharacters","retriggerCharacters","registerSignatureHelpProvider","SmartSelection","positions","locations","convertSelectionRange","SelectionRange","v350","registerSelectionRangeProvider","TagClosing","_disposed","_timeout","_cancel","onDidChangeTextDocument","contentChanges","activeDocument","lastChange","lastCharacter","rangeLength","characterDelta","addedLines","activeEditor","insertion","insertSnippet","getTagSnippet","getInsertionPositions","closingTag","activeSelectionPositions","selections","active","isEqual","requireActiveDocument","handler","onDidChangeActiveTextEditor","v300","TypeScriptTypeDefinitionProvider","registerTypeDefinitionProvider","diagnosticsEquals","arrays","FileDiagnostics","_diagnostics","settings","getValidate","getSuggestionDiagnostics","enableSuggestions","getEnableSuggestions","DiagnosticSettings","_languageSettings","validate","defaultSettings","currentSettings","newSettings","areLanguageDiagnosticSettingsEqual","DiagnosticsManager","owner","_settings","_updateDelay","_pendingUpdates","_currentDiagnostics","createDiagnosticCollection","rebuild","didUpdate","fileDiagnostics","scheduleDiagnosticsUpdate","updateCurrentDiagnostics","getDiagnostics","fileDiagnostic","CloseOperation","OpenOperation","ChangeOperation","BufferSynchronizer","pathNormalizer","_pending","supportsBatching","updatePending","events","change","reverse","insertString","flush","closedFiles","openFiles","changedFiles","nonRecoverable","v340","SyncedBuffer","synchronizer","fileContent","projectRootPath","getWorkspaceRootForResource","scriptKind","mode2ScriptKind","scriptKindName","v240","tsPluginsForDocument","lineCount","SyncedBufferMap","filePath","PendingDiagnostics","orderedResources","GetErrRequest","onDone","_done","_token","allFiles","normalizedPath","executeAsync","finally","setImmediate","BufferSyncSupport","_validateJavaScript","_validateTypeScript","listening","_onDelete","onDelete","_onWillChange","onWillChange","diagnosticDelayer","Delayer","syncedBuffers","pendingDiagnostics","updateConfiguration","onDidChangeVisibleTextEditors","syncedBuffer","requestDiagnostic","existingDocument","buffer","allBuffers","getForPath","pendingGetErr","wasBufferOpen","triggerDiagnostics","beforeCommand","closeResource","onContentChanged","shouldValidate","resources","handledResources","trigger","sendPendingDiagnostics","ceil","orderedFileSet","getOrderedFileSet","executeGetErrRequest","jsConfig","tsConfig","TypeScriptServerSpawner","_versionProvider","_versionManager","_logDirectoryProvider","_pluginPathsProvider","_logger","_factory","primaryServer","serverType","getCompositeServerType","spawnTsServer","shouldUseSeparateDiagnosticsServer","v400","defaultVersion","canceller","tsServerTraceDirectory","getTsServerArgs","cancellationPipeName","isLoggingEnabled","tsServerPath","kindToServerType","currentVersion","v401","v250","isWeb","logDir","getNewLogDirectory","pluginPaths","getPluginPaths","isUsingBundledTypeScriptVersion","enableForWorkspaceTypeScriptVersions","v260","getTsLocale","v291","v345","pluginPath","resolvePluginPath","workspacePath","RelativeWorkspacePathResolver","asAbsoluteWorkspacePath","workspaceFolder","VSCodeTelemetryReporter","clientVersionDelegate","_reporter","eventName","reporter","sendTelemetryEvent","packageInfo","aiKey","packageJSON","extensions","getExtension","memoize","appInsights","TelemetryReporter","extensionId","extensionVersion","userOptIn","logFilePath","logStream","createWriteStream","autoClose","updateUserOptIn","configListener","TELEMETRY_CONFIG_ID","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","defaultClient","appInsightsClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","commonProperties","getCommonProperties","userId","machineId","sessionId","endpointUrl","trackEvent","flushEventsToLogger","flushEventsToAI","default","AutoCollectConsole","AutoCollectExceptions","Contracts","_console","_exceptions","_performance","_serverRequests","_clientRequests","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","Configuration","getCorrelationContext","wrapWithCorrelationContext","collectConsoleLog","resendInterval","maxBytesOnDisk","setInternalLogging","enableDebugLogging","enableWarningLogging","consolePub","diagnostic_channel_1","originalBunyan","originalEmit","_emit","rec","noemit","level","includePrerelease","defaultResult","minver","compver","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","chunk","stderr","aiLoggingConsole","Console","_loop_1","originalMethod","consoleMethods_1","mongoCore2","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","requestId","startedData","succeeded","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","patchClassMemberFunction","classObject","connectionClass","hrDuration","query","callbackArgs","poolClass","webpackEmptyContext","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","queryResult","database","connectionParameters","patchCallback","trackingCallback","rowCount","preparable","plan","originalRedis","originalSend","RedisClient","internal_send_command","commandObj","cb_1","pubsubBound","address_1","address","startTime_1","originalWinston","curLevels","originalLog","Logger","loggingFilter","meta","levelKind","npm","levels","syslog","filters","zoneSpec","_properties","_parent","_name","_zoneDelegate","ZoneDelegate","assertZonePatched","ZoneAwarePromise","_currentZoneFrame","zone","_currentTask","getZoneWith","_callback","intercept","runGuarded","applyThis","applyArgs","ZoneFrame","invoke","runTask","runCount","previousTask","isPeriodic","cancelFn","invokeTask","scheduleMicroTask","customSchedule","scheduleTask","ZoneTask","scheduleMacroTask","customCancel","scheduleEventTask","cancelTask","__symbol__","parentDelegate","_taskCounts","microTask","macroTask","eventTask","_parentDelegate","_forkZS","onFork","_forkDlgt","_forkCurrZone","_interceptZS","onIntercept","_interceptDlgt","_interceptCurrZone","_invokeZS","onInvoke","_invokeDlgt","_invokeCurrZone","_handleErrorZS","onHandleError","_handleErrorDlgt","_handleErrorCurrZone","_scheduleTaskZS","onScheduleTask","_scheduleTaskDlgt","_scheduleTaskCurrZone","_invokeTaskZS","onInvokeTask","_invokeTaskDlgt","_invokeTaskCurrZone","_cancelTaskZS","onCancelTask","_cancelTaskDlgt","_cancelTaskCurrZone","_hasTaskZS","onHasTask","_hasTaskDlgt","_hasTaskCurrZone","targetZone","scheduleFn","scheduleQueueDrain","_microTaskQueue","_updateTaskCount","hasTask","isEmpty","counts","prev","_numberOfNestedTaskFrames","drainMicroTaskQueue","symbolSetTimeout","symbolPromise","symbolThen","_isDrainingMicrotaskQueue","_uncaughtPromiseErrors","consoleError","rejection","uncaughtPromiseError","isThenable","forwardResolution","forwardRejection","symbolState","symbolValue","makeResolver","promise","resolvePromise","clearRejectedNoCatch","scheduleResolveOrReject","error_1","currentTask","chainPromise","onFulfilled","onRejected","executor","race","rej","onResolve","onReject","values_1","resolvedValues","values_2","FrameType","NativePromise","patchThen","NativePromiseProtototype","NativePromiseThen","nativePromise","fetchPromise","zoneAwareFrame","NativeError","blackListedStackFrames","ZoneAwareError","createProperty","error_2","createMethodProperty","errorMethod","errorProperties","pKeys","createErrorProperties","getErrorPropertiesForPrototype","newProps","cKeys","cKey","originalStack","frames_1","zoneFrame","frame","frameType","blackList","transition","zoneAwareStack","defineProperties","getPrototypeOf","stackTraceLimit","targetObject","constructorOpt","captureStackTrace","structuredStackTrace","getFunctionName","detectZone","parentZoneDelegate","currentZone","parentZD","frames_2","runFrame","runGuardedFrame","runTaskFrame","fnName","zoneSymbol","_global$1","EVENT_TASKS","findExistingRegisteredTask","capture","remove","eventTasks","useCapturing","defaultListenerMetaCreator","invokeAddFunc","addFnSymbol","invokeRemoveFunc","removeFnSymbol","makeZoneAwareAddListener","addFnName","removeFnName","useCapturingParam","allowDuplicates","isPrepend","metaCreator","defaultUseCapturing","scheduleEventListener","attachRegisteredEvent","cancelEventListener","handleEvent","validZoneHandler","makeZoneAwareRemoveListener","symbol","patchMethod","patchFn","delegateName","createNamedFn","callAndReturnFirstParam","zoneAwareAddListener$1","zoneAwarePrependListener","zoneAwareRemoveListener$1","zoneAwareRemoveAllListeners","findAllExistingRegisteredTasks","makeZoneAwareRemoveAllListeners","zoneAwareListeners","patchTimer","setName","cancelName","nameSuffix","setNative","clearNative","tasksByHandleId","clearTask","handle","funcName","callbackIndex","patchMacroTask","crypto","httpClient","_global","timers","patchNextTick","nativeRandomBytes_1","randomBytes","nativePbkdf2_1","pbkdf2","ClientRequest","ClientRequest_1","factory","_methodNames","Contracts_1","clients","subscriber","trackTrace","Information","Generated_1","RemoteDependencyDataConstants","TYPE_HTTP","TYPE_AI","domainSupportsProperties","domain","applicationVersion","deviceId","deviceLocale","deviceModel","deviceOEMName","deviceOSVersion","deviceType","locationIp","operationParentId","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","userAuthUserId","cloudRole","cloudRoleInstance","internalSdkVersion","internalAgentVersion","internalNodeName","Measurement","sampleRate","exceptions","hasFullStack","parsedStack","metrics","TelemetryType","telemetryTypeToBaseType","Event","Exception","Trace","Metric","Request","Dependency","baseTypeToTelemetryType","baseType","bunyanToAILevelMap","10","20","30","40","50","60","Critical","AIlevel","winstonToAILevelMap","og","emerg","alert","crit","notice","verbose","silly","unknown","_exceptionListenerHandle","reThrow","trackException","exception","isAppCrashing","_rejectionListenerHandle","UNCAUGHT_EXCEPTION_HANDLER_NAME","UNHANDLED_REJECTION_HANDLER_NAME","removeListener","_getUrlFromRequestOptions","baseTelemetry","dependencyId","urlObject","search","dependencyName","toUpperCase","remoteDependencyType","remoteDependencyTarget","resultCode","dependencyTypeName","originalOptions_1","parsedQuery","dbName","databaseName","commandName","queryObj","sqlString","sql","connectionConfig","_connection","socketPath","q","conn","_getAbsoluteUrl","socketRemoteAddress","socket","remoteAddress","parseHeaders","connection","connectionRemoteAddress","legacySocketRemoteAddress","sourceCorrelationId","newTags","_getIp","_getId","encrypted","pathName","ipMatch","check","ip","rawHeaders","parseId","userAgent","rootId","cookieValue","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","Config","Context","Channel","TelemetryProcessors","Sender","EnvelopeFactory","iKey","_telemetryProcessors","sender","disableAppInsights","maxBatchSize","maxBatchIntervalMs","track","triggerSend","telemetryType","envelope","createEnvelope","toISOString","accepted","runTelemetryProcessors","samplingTelemetryProcessor","send","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","endpointBase","_getInstrumentationKey","samplingPercentage","setCorrelationId","ENV_profileQueryEndpoint","ENV_http_proxy","ENV_https_proxy","_profileQueryEndpoint","endpoint","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","packageJsonPath","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","__dirname","appVersion","packageJson","DefaultRoleName","arch","sdkVersion","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","_sender","setDiskRetryMode","payload","_stringify","_timeoutHandle","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","getSamplingHashCode","zlib","child_process","_config","_onSuccess","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","ICACLS_PATH","withCredentials","gzip","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","aclProc","spawn","windowsHide","signal","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdio","stdout","_getACLIdentitySync","_getACLArguments","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","mkdir","_getShallowDirectorySize","totalSize","fileStats","isFile","_getShallowDirectorySizeSync","TEMPDIR_PREFIX","getTime","fileFullPath","dirSize","tempDir","firstFile","readFile","systemdrive","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","baseData","getTags","severityLevel","remoteDependency","exceptionDetails","typeName","parseStack","requestData","responseCode","metric","Aggregation","stdDev","frames","totalSizeInBytes","_StackFrame","parsedFrame","sizeInBytes","acceptedLeft","acceptedRight","howMany","assembly","baseSize","Messages","Tracer","logger","readTrace","TSS_TRACE","responseExpected","queueLength","logLevel","TypeScriptWorkspaceSymbolProvider","searchAllOpenProjects","getDocument","toOpenedFiledPath","v390","searchValue","maxResultCount","toSymbolInformation","doesResourceLookLikeATypeScriptFile","doesResourceLookLikeAJavaScriptFile","getLabel","SymbolInformation","Field","documents","registerWorkspaceSymbolProvider","LazyValue","_getValue","_hasValue","ManagedFileContextManager","normalizePath","isInManagedFileContext","updateContext","isManagedFile","executeCommand","contextName","isManagedScriptFile","isManagedConfigFile","isSupportedLanguageMode","isJsConfigOrTsConfigFileName","NodeRequestCanceller","getTempFile","tracer","logDirectory","mkdtempSync","logPath","globalVersion","bundledVersion","globals","loadVersionsFromSetting","contributedTsNextVersion","tsdkVersions","localTsdkVersions","nodeVersions","localNodeModulesVersions","allVersions","paths","getContributedVersion","showErrorMessage","pathToTs","extension","serverPath","extensionPath","TypeScriptVersion","getApiVersion","isValid","tsdkPathSetting","loadTypeScriptVersionsFromPath","getTypeScriptVersion","tsdkVersion","desc","registerCommand","impl","thisArg","TypeScriptServerPlugin","_pluginConfigurations","_onDidUpdatePlugins","onDidChangePlugins","_onDidUpdateConfig","onDidUpdateConfig","_plugins","newPlugins","readPlugins","pluginMap","pack","contributes","typescriptServerPlugins","createRandomFile","fileExtension","tmpFile","deleteFile","CURSOR","cursorIndex","showTextDocument","selection","Selection","isDirty","save","wait","ms","updateConfig","documentUri","newConfig","oldConfig","configKey","ConfigurationTarget","Global","onChangedDocument","joinLines","lines","expectedDocContent","strictEqual","expectedCursorPos","deepEqual","autoClosingBrackets","typescriptCompleteFunctionCalls","insertMode","snippetSuggestions","suggestSelection","javascriptQuoteStyle","typescriptQuoteStyle","insertModesValues","didChangeDocument","FileType","File","configs","findConfigFiles","getWorkspaceFolder","posixPath","findFiles","mapChildren","TsconfigLinkProvider","jsonc","getExtendsLink","getFilesLinks","getReferencesLinks","extendsNode","isPathValue","DocumentLink","getRange","endsWith","workspaceFolderPath","pathNodeToLink","pathNode","getFileTarget","getFolderTarget","patterns","registerDocumentLinkProvider"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 70);\n","module.exports = require(\"vscode\");","module.exports = require(\"path\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Helpers for converting FROM vscode types TO ts types\n */\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\nexport namespace Range {\n\texport const fromTextSpan = (span: Proto.TextSpan): vscode.Range =>\n\t\tfromLocations(span.start, span.end);\n\n\texport const toTextSpan = (range: vscode.Range): Proto.TextSpan => ({\n\t\tstart: Position.toLocation(range.start),\n\t\tend: Position.toLocation(range.end)\n\t});\n\n\texport const fromLocations = (start: Proto.Location, end: Proto.Location): vscode.Range =>\n\t\tnew vscode.Range(\n\t\t\tMath.max(0, start.line - 1), Math.max(start.offset - 1, 0),\n\t\t\tMath.max(0, end.line - 1), Math.max(0, end.offset - 1));\n\n\texport const toFileRangeRequestArgs = (file: string, range: vscode.Range): Proto.FileRangeRequestArgs => ({\n\t\tfile,\n\t\tstartLine: range.start.line + 1,\n\t\tstartOffset: range.start.character + 1,\n\t\tendLine: range.end.line + 1,\n\t\tendOffset: range.end.character + 1\n\t});\n\n\texport const toFormattingRequestArgs = (file: string, range: vscode.Range): Proto.FormatRequestArgs => ({\n\t\tfile,\n\t\tline: range.start.line + 1,\n\t\toffset: range.start.character + 1,\n\t\tendLine: range.end.line + 1,\n\t\tendOffset: range.end.character + 1\n\t});\n}\n\nexport namespace Position {\n\texport const fromLocation = (tslocation: Proto.Location): vscode.Position =>\n\t\tnew vscode.Position(tslocation.line - 1, tslocation.offset - 1);\n\n\texport const toLocation = (vsPosition: vscode.Position): Proto.Location => ({\n\t\tline: vsPosition.line + 1,\n\t\toffset: vsPosition.character + 1,\n\t});\n\n\texport const toFileLocationRequestArgs = (file: string, position: vscode.Position): Proto.FileLocationRequestArgs => ({\n\t\tfile,\n\t\tline: position.line + 1,\n\t\toffset: position.character + 1,\n\t});\n}\n\nexport namespace Location {\n\texport const fromTextSpan = (resource: vscode.Uri, tsTextSpan: Proto.TextSpan): vscode.Location =>\n\t\tnew vscode.Location(resource, Range.fromTextSpan(tsTextSpan));\n}\n\nexport namespace TextEdit {\n\texport const fromCodeEdit = (edit: Proto.CodeEdit): vscode.TextEdit =>\n\t\tnew vscode.TextEdit(\n\t\t\tRange.fromTextSpan(edit),\n\t\t\tedit.newText);\n}\n\nexport namespace WorkspaceEdit {\n\texport function fromFileCodeEdits(\n\t\tclient: ITypeScriptServiceClient,\n\t\tedits: Iterable<Proto.FileCodeEdits>\n\t): vscode.WorkspaceEdit {\n\t\treturn withFileCodeEdits(new vscode.WorkspaceEdit(), client, edits);\n\t}\n\n\texport function withFileCodeEdits(\n\t\tworkspaceEdit: vscode.WorkspaceEdit,\n\t\tclient: ITypeScriptServiceClient,\n\t\tedits: Iterable<Proto.FileCodeEdits>\n\t): vscode.WorkspaceEdit {\n\t\tfor (const edit of edits) {\n\t\t\tconst resource = client.toResource(edit.fileName);\n\t\t\tfor (const textChange of edit.textChanges) {\n\t\t\t\tworkspaceEdit.replace(resource,\n\t\t\t\t\tRange.fromTextSpan(textChange),\n\t\t\t\t\ttextChange.newText);\n\t\t\t}\n\t\t}\n\n\t\treturn workspaceEdit;\n\t}\n}\n\nexport namespace SymbolKind {\n\texport function fromProtocolScriptElementKind(kind: Proto.ScriptElementKind) {\n\t\tswitch (kind) {\n\t\t\tcase PConst.Kind.module: return vscode.SymbolKind.Module;\n\t\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\t\tcase PConst.Kind.enumMember: return vscode.SymbolKind.EnumMember;\n\t\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\t\tcase PConst.Kind.indexSignature: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.callSignature: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.let: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.const: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.localVariable: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.alias: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\t\tcase PConst.Kind.localFunction: return vscode.SymbolKind.Function;\n\t\t\tcase PConst.Kind.constructSignature: return vscode.SymbolKind.Constructor;\n\t\t\tcase PConst.Kind.constructorImplementation: return vscode.SymbolKind.Constructor;\n\t\t\tcase PConst.Kind.typeParameter: return vscode.SymbolKind.TypeParameter;\n\t\t\tcase PConst.Kind.string: return vscode.SymbolKind.String;\n\t\t\tdefault: return vscode.SymbolKind.Variable;\n\t\t}\n\t}\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions_1 = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions_1.availableLanguages) {\r\n                var value = vscodeOptions_1.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions_1.locale)) {\r\n                options.locale = vscodeOptions_1.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions_1._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions_1._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions_1._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions_1._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions_1._languagePackId)) {\r\n                options.languagePackId = vscodeOptions_1._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions_1._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions_1._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions_1._corruptedFile) {\r\n                        var dirname = path.dirname(vscodeOptions_1._corruptedFile);\r\n                        fs.exists(dirname, function (exists) {\r\n                            if (exists) {\r\n                                fs.writeFile(vscodeOptions_1._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                                    console.error(err);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as Proto from './protocol';\nimport BufferSyncSupport from './tsServer/bufferSyncSupport';\nimport { ExectuionTarget } from './tsServer/server';\nimport { TypeScriptVersion } from './tsServer/versionProvider';\nimport API from './utils/api';\nimport { TypeScriptServiceConfiguration } from './utils/configuration';\nimport { PluginManager } from './utils/plugins';\nimport { TelemetryReporter } from './utils/telemetry';\n\nexport enum ServerType {\n\tSyntax = 'syntax',\n\tSemantic = 'semantic',\n}\n\nexport namespace ServerResponse {\n\n\texport class Cancelled {\n\t\tpublic readonly type = 'cancelled';\n\n\t\tconstructor(\n\t\t\tpublic readonly reason: string\n\t\t) { }\n\t}\n\n\texport const NoContent = { type: 'noContent' } as const;\n\n\texport type Response<T extends Proto.Response> = T | Cancelled | typeof NoContent;\n}\n\ninterface StandardTsServerRequests {\n\t'applyCodeActionCommand': [Proto.ApplyCodeActionCommandRequestArgs, Proto.ApplyCodeActionCommandResponse];\n\t'completionEntryDetails': [Proto.CompletionDetailsRequestArgs, Proto.CompletionDetailsResponse];\n\t'completionInfo': [Proto.CompletionsRequestArgs, Proto.CompletionInfoResponse];\n\t'completions': [Proto.CompletionsRequestArgs, Proto.CompletionsResponse];\n\t'configure': [Proto.ConfigureRequestArguments, Proto.ConfigureResponse];\n\t'definition': [Proto.FileLocationRequestArgs, Proto.DefinitionResponse];\n\t'definitionAndBoundSpan': [Proto.FileLocationRequestArgs, Proto.DefinitionInfoAndBoundSpanResponse];\n\t'docCommentTemplate': [Proto.FileLocationRequestArgs, Proto.DocCommandTemplateResponse];\n\t'documentHighlights': [Proto.DocumentHighlightsRequestArgs, Proto.DocumentHighlightsResponse];\n\t'format': [Proto.FormatRequestArgs, Proto.FormatResponse];\n\t'formatonkey': [Proto.FormatOnKeyRequestArgs, Proto.FormatResponse];\n\t'getApplicableRefactors': [Proto.GetApplicableRefactorsRequestArgs, Proto.GetApplicableRefactorsResponse];\n\t'getCodeFixes': [Proto.CodeFixRequestArgs, Proto.CodeFixResponse];\n\t'getCombinedCodeFix': [Proto.GetCombinedCodeFixRequestArgs, Proto.GetCombinedCodeFixResponse];\n\t'getEditsForFileRename': [Proto.GetEditsForFileRenameRequestArgs, Proto.GetEditsForFileRenameResponse];\n\t'getEditsForRefactor': [Proto.GetEditsForRefactorRequestArgs, Proto.GetEditsForRefactorResponse];\n\t'getOutliningSpans': [Proto.FileRequestArgs, Proto.OutliningSpansResponse];\n\t'getSupportedCodeFixes': [null, Proto.GetSupportedCodeFixesResponse];\n\t'implementation': [Proto.FileLocationRequestArgs, Proto.ImplementationResponse];\n\t'jsxClosingTag': [Proto.JsxClosingTagRequestArgs, Proto.JsxClosingTagResponse];\n\t'navto': [Proto.NavtoRequestArgs, Proto.NavtoResponse];\n\t'navtree': [Proto.FileRequestArgs, Proto.NavTreeResponse];\n\t'organizeImports': [Proto.OrganizeImportsRequestArgs, Proto.OrganizeImportsResponse];\n\t'projectInfo': [Proto.ProjectInfoRequestArgs, Proto.ProjectInfoResponse];\n\t'quickinfo': [Proto.FileLocationRequestArgs, Proto.QuickInfoResponse];\n\t'references': [Proto.FileLocationRequestArgs, Proto.ReferencesResponse];\n\t'rename': [Proto.RenameRequestArgs, Proto.RenameResponse];\n\t'selectionRange': [Proto.SelectionRangeRequestArgs, Proto.SelectionRangeResponse];\n\t'signatureHelp': [Proto.SignatureHelpRequestArgs, Proto.SignatureHelpResponse];\n\t'typeDefinition': [Proto.FileLocationRequestArgs, Proto.TypeDefinitionResponse];\n\t'updateOpen': [Proto.UpdateOpenRequestArgs, Proto.Response];\n\t'prepareCallHierarchy': [Proto.FileLocationRequestArgs, Proto.PrepareCallHierarchyResponse];\n\t'provideCallHierarchyIncomingCalls': [Proto.FileLocationRequestArgs, Proto.ProvideCallHierarchyIncomingCallsResponse];\n\t'provideCallHierarchyOutgoingCalls': [Proto.FileLocationRequestArgs, Proto.ProvideCallHierarchyOutgoingCallsResponse];\n\t'fileReferences': [Proto.FileRequestArgs, Proto.FileReferencesResponse];\n}\n\ninterface NoResponseTsServerRequests {\n\t'open': [Proto.OpenRequestArgs, null];\n\t'close': [Proto.FileRequestArgs, null];\n\t'change': [Proto.ChangeRequestArgs, null];\n\t'compilerOptionsForInferredProjects': [Proto.SetCompilerOptionsForInferredProjectsArgs, null];\n\t'reloadProjects': [null, null];\n\t'configurePlugin': [Proto.ConfigurePluginRequest, Proto.ConfigurePluginResponse];\n}\n\ninterface AsyncTsServerRequests {\n\t'geterr': [Proto.GeterrRequestArgs, Proto.Response];\n\t'geterrForProject': [Proto.GeterrForProjectRequestArgs, Proto.Response];\n}\n\nexport type TypeScriptRequests = StandardTsServerRequests & NoResponseTsServerRequests & AsyncTsServerRequests;\n\nexport type ExecConfig = {\n\treadonly lowPriority?: boolean;\n\treadonly nonRecoverable?: boolean;\n\treadonly cancelOnResourceChange?: vscode.Uri;\n\treadonly executionTarget?: ExectuionTarget;\n};\n\nexport enum ClientCapability {\n\t/**\n\t * Basic syntax server. All clients should support this.\n\t */\n\tSyntax,\n\n\t/**\n\t * Advanced syntax server that can provide single file IntelliSense.\n\t */\n\tEnhancedSyntax,\n\n\t/**\n\t * Complete, multi-file semantic server\n\t */\n\tSemantic,\n}\n\nexport class ClientCapabilities {\n\tprivate readonly capabilities: ReadonlySet<ClientCapability>;\n\n\tconstructor(...capabilities: ClientCapability[]) {\n\t\tthis.capabilities = new Set(capabilities);\n\t}\n\n\tpublic has(capability: ClientCapability): boolean {\n\t\treturn this.capabilities.has(capability);\n\t}\n}\n\nexport interface ITypeScriptServiceClient {\n\t/**\n\t * Convert a resource (VS Code) to a normalized path (TypeScript).\n\t *\n\t * Does not try handling case insensitivity.\n\t */\n\tnormalizedPath(resource: vscode.Uri): string | undefined;\n\n\t/**\n\t * Map a resource to a normalized path\n\t *\n\t * This will attempt to handle case insensitivity.\n\t */\n\ttoPath(resource: vscode.Uri): string | undefined;\n\n\t/**\n\t * Convert a path to a resource.\n\t */\n\ttoResource(filepath: string): vscode.Uri;\n\n\t/**\n\t * Tries to ensure that a vscode document is open on the TS server.\n\t *\n\t * @return The normalized path or `undefined` if the document is not open on the server.\n\t */\n\ttoOpenedFilePath(document: vscode.TextDocument, options?: {\n\t\tsuppressAlertOnFailure?: boolean\n\t}): string | undefined;\n\n\t/**\n\t * Checks if `resource` has a given capability.\n\t */\n\thasCapabilityForResource(resource: vscode.Uri, capability: ClientCapability): boolean;\n\n\tgetWorkspaceRootForResource(resource: vscode.Uri): string | undefined;\n\n\treadonly onTsServerStarted: vscode.Event<{ version: TypeScriptVersion, usedApiVersion: API }>;\n\treadonly onProjectLanguageServiceStateChanged: vscode.Event<Proto.ProjectLanguageServiceStateEventBody>;\n\treadonly onDidBeginInstallTypings: vscode.Event<Proto.BeginInstallTypesEventBody>;\n\treadonly onDidEndInstallTypings: vscode.Event<Proto.EndInstallTypesEventBody>;\n\treadonly onTypesInstallerInitializationFailed: vscode.Event<Proto.TypesInstallerInitializationFailedEventBody>;\n\n\treadonly capabilities: ClientCapabilities;\n\treadonly onDidChangeCapabilities: vscode.Event<void>;\n\n\tonReady(f: () => void): Promise<void>;\n\n\tshowVersionPicker(): void;\n\n\treadonly apiVersion: API;\n\n\treadonly pluginManager: PluginManager;\n\treadonly configuration: TypeScriptServiceConfiguration;\n\treadonly bufferSyncSupport: BufferSyncSupport;\n\treadonly telemetryReporter: TelemetryReporter;\n\n\texecute<K extends keyof StandardTsServerRequests>(\n\t\tcommand: K,\n\t\targs: StandardTsServerRequests[K][0],\n\t\ttoken: vscode.CancellationToken,\n\t\tconfig?: ExecConfig\n\t): Promise<ServerResponse.Response<StandardTsServerRequests[K][1]>>;\n\n\texecuteWithoutWaitingForResponse<K extends keyof NoResponseTsServerRequests>(\n\t\tcommand: K,\n\t\targs: NoResponseTsServerRequests[K][0]\n\t): void;\n\n\texecuteAsync<K extends keyof AsyncTsServerRequests>(\n\t\tcommand: K,\n\t\targs: AsyncTsServerRequests[K][0],\n\t\ttoken: vscode.CancellationToken\n\t): Promise<ServerResponse.Response<Proto.Response>>;\n\n\t/**\n\t * Cancel on going geterr requests and re-queue them after `f` has been evaluated.\n\t */\n\tinterruptGetErr<R>(f: () => R): R;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ITypeScriptServiceClient, ClientCapability } from '../typescriptService';\nimport API from './api';\nimport { Disposable } from './dispose';\n\nexport class Condition extends Disposable {\n\tprivate _value: boolean;\n\n\tconstructor(\n\t\tprivate readonly getValue: () => boolean,\n\t\tonUpdate: (handler: () => void) => void,\n\t) {\n\t\tsuper();\n\t\tthis._value = this.getValue();\n\n\t\tonUpdate(() => {\n\t\t\tconst newValue = this.getValue();\n\t\t\tif (newValue !== this._value) {\n\t\t\t\tthis._value = newValue;\n\t\t\t\tthis._onDidChange.fire();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic get value(): boolean { return this._value; }\n\n\tprivate readonly _onDidChange = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onDidChange = this._onDidChange.event;\n}\n\nclass ConditionalRegistration {\n\tprivate registration: vscode.Disposable | undefined = undefined;\n\n\tpublic constructor(\n\t\tprivate readonly conditions: readonly Condition[],\n\t\tprivate readonly doRegister: () => vscode.Disposable\n\t) {\n\t\tfor (const condition of conditions) {\n\t\t\tcondition.onDidChange(() => this.update());\n\t\t}\n\t\tthis.update();\n\t}\n\n\tpublic dispose() {\n\t\tthis.registration?.dispose();\n\t\tthis.registration = undefined;\n\t}\n\n\tprivate update() {\n\t\tconst enabled = this.conditions.every(condition => condition.value);\n\t\tif (enabled) {\n\t\t\tif (!this.registration) {\n\t\t\t\tthis.registration = this.doRegister();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.registration) {\n\t\t\t\tthis.registration.dispose();\n\t\t\t\tthis.registration = undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function conditionalRegistration(\n\tconditions: readonly Condition[],\n\tdoRegister: () => vscode.Disposable,\n): vscode.Disposable {\n\treturn new ConditionalRegistration(conditions, doRegister);\n}\n\nexport function requireMinVersion(\n\tclient: ITypeScriptServiceClient,\n\tminVersion: API,\n) {\n\treturn new Condition(\n\t\t() => client.apiVersion.gte(minVersion),\n\t\tclient.onTsServerStarted\n\t);\n}\n\nexport function requireConfiguration(\n\tlanguage: string,\n\tconfigValue: string,\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\tconst config = vscode.workspace.getConfiguration(language, null);\n\t\t\treturn !!config.get<boolean>(configValue);\n\t\t},\n\t\tvscode.workspace.onDidChangeConfiguration\n\t);\n}\n\nexport function requireSomeCapability(\n\tclient: ITypeScriptServiceClient,\n\t...capabilities: readonly ClientCapability[]\n) {\n\treturn new Condition(\n\t\t() => capabilities.some(requiredCapability => client.capabilities.has(requiredCapability)),\n\t\tclient.onDidChangeCapabilities\n\t);\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport function disposeAll(disposables: vscode.Disposable[]) {\n\twhile (disposables.length) {\n\t\tconst item = disposables.pop();\n\t\tif (item) {\n\t\t\titem.dispose();\n\t\t}\n\t}\n}\n\nexport abstract class Disposable {\n\tprivate _isDisposed = false;\n\n\tprotected _disposables: vscode.Disposable[] = [];\n\n\tpublic dispose(): any {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isDisposed = true;\n\t\tdisposeAll(this._disposables);\n\t}\n\n\tprotected _register<T extends vscode.Disposable>(value: T): T {\n\t\tif (this._isDisposed) {\n\t\t\tvalue.dispose();\n\t\t} else {\n\t\t\tthis._disposables.push(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected get isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n}","module.exports = require(\"fs\");","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\r\nvar Logging = (function () {\r\n    function Logging() {\r\n    }\r\n    Logging.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (Logging.enableDebug) {\r\n            console.info(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.warn = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (!Logging.disableWarnings) {\r\n            console.warn(Logging.TAG + message, optionalParams);\r\n        }\r\n    };\r\n    Logging.enableDebug = false;\r\n    Logging.disableWarnings = false;\r\n    Logging.TAG = \"ApplicationInsights:\";\r\n    return Logging;\r\n}());\r\nmodule.exports = Logging;\r\n//# sourceMappingURL=Logging.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const empty = Object.freeze([]);\n\nexport function equals<T>(\n\ta: ReadonlyArray<T>,\n\tb: ReadonlyArray<T>,\n\titemEquals: (a: T, b: T) => boolean = (a, b) => a === b\n): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\treturn a.every((x, i) => itemEquals(x, b[i]));\n}\n\nexport function flatten<T>(array: ReadonlyArray<T>[]): T[] {\n\treturn Array.prototype.concat.apply([], array);\n}\n\nexport function coalesce<T>(array: ReadonlyArray<T | undefined>): T[] {\n\treturn <T[]>array.filter(e => !!e);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class Kind {\n\tpublic static readonly alias = 'alias';\n\tpublic static readonly callSignature = 'call';\n\tpublic static readonly class = 'class';\n\tpublic static readonly const = 'const';\n\tpublic static readonly constructorImplementation = 'constructor';\n\tpublic static readonly constructSignature = 'construct';\n\tpublic static readonly directory = 'directory';\n\tpublic static readonly enum = 'enum';\n\tpublic static readonly enumMember = 'enum member';\n\tpublic static readonly externalModuleName = 'external module name';\n\tpublic static readonly function = 'function';\n\tpublic static readonly indexSignature = 'index';\n\tpublic static readonly interface = 'interface';\n\tpublic static readonly keyword = 'keyword';\n\tpublic static readonly let = 'let';\n\tpublic static readonly localFunction = 'local function';\n\tpublic static readonly localVariable = 'local var';\n\tpublic static readonly method = 'method';\n\tpublic static readonly memberGetAccessor = 'getter';\n\tpublic static readonly memberSetAccessor = 'setter';\n\tpublic static readonly memberVariable = 'property';\n\tpublic static readonly module = 'module';\n\tpublic static readonly primitiveType = 'primitive type';\n\tpublic static readonly script = 'script';\n\tpublic static readonly type = 'type';\n\tpublic static readonly variable = 'var';\n\tpublic static readonly warning = 'warning';\n\tpublic static readonly string = 'string';\n\tpublic static readonly parameter = 'parameter';\n\tpublic static readonly typeParameter = 'type parameter';\n}\n\n\nexport class DiagnosticCategory {\n\tpublic static readonly error = 'error';\n\tpublic static readonly warning = 'warning';\n\tpublic static readonly suggestion = 'suggestion';\n}\n\nexport class KindModifiers {\n\tpublic static readonly optional = 'optional';\n\tpublic static readonly depreacted = 'deprecated';\n\tpublic static readonly color = 'color';\n\n\tpublic static readonly dtsFile = '.d.ts';\n\tpublic static readonly tsFile = '.ts';\n\tpublic static readonly tsxFile = '.tsx';\n\tpublic static readonly jsFile = '.js';\n\tpublic static readonly jsxFile = '.jsx';\n\tpublic static readonly jsonFile = '.json';\n\n\tpublic static readonly fileExtensionKindModifiers = [\n\t\tKindModifiers.dtsFile,\n\t\tKindModifiers.tsFile,\n\t\tKindModifiers.tsxFile,\n\t\tKindModifiers.jsFile,\n\t\tKindModifiers.jsxFile,\n\t\tKindModifiers.jsonFile,\n\t];\n}\n\nexport class DisplayPartKind {\n\tpublic static readonly functionName = 'functionName';\n\tpublic static readonly methodName = 'methodName';\n\tpublic static readonly parameterName = 'parameterName';\n\tpublic static readonly propertyName = 'propertyName';\n\tpublic static readonly punctuation = 'punctuation';\n\tpublic static readonly text = 'text';\n}\n\nexport enum EventName {\n\tsyntaxDiag = 'syntaxDiag',\n\tsemanticDiag = 'semanticDiag',\n\tsuggestionDiag = 'suggestionDiag',\n\tconfigFileDiag = 'configFileDiag',\n\ttelemetry = 'telemetry',\n\tprojectLanguageServiceState = 'projectLanguageServiceState',\n\tprojectsUpdatedInBackground = 'projectsUpdatedInBackground',\n\tbeginInstallTypes = 'beginInstallTypes',\n\tendInstallTypes = 'endInstallTypes',\n\ttypesInstallerInitializationFailed = 'typesInstallerInitializationFailed',\n\tsurveyReady = 'surveyReady',\n\tprojectLoadingStart = 'projectLoadingStart',\n\tprojectLoadingFinish = 'projectLoadingFinish',\n}\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./Constants\"));\r\n__export(require(\"./Generated\"));\r\n__export(require(\"./TelemetryTypes\"));\r\n//# sourceMappingURL=index.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport const typescript = 'typescript';\nexport const typescriptreact = 'typescriptreact';\nexport const javascript = 'javascript';\nexport const javascriptreact = 'javascriptreact';\nexport const jsxTags = 'jsx-tags';\n\n\nexport function isSupportedLanguageMode(doc: vscode.TextDocument) {\n\treturn vscode.languages.match([typescript, typescriptreact, javascript, javascriptreact], doc) > 0;\n}\n\nexport function isTypeScriptDocument(doc: vscode.TextDocument) {\n\treturn vscode.languages.match([typescript, typescriptreact], doc) > 0;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const file = 'file';\nexport const untitled = 'untitled';\nexport const git = 'git';\n/** Live share scheme */\nexport const vsls = 'vsls';\nexport const walkThroughSnippet = 'walkThroughSnippet';\n\nexport const semanticSupportedSchemes = [\n\tfile,\n\tuntitled,\n\twalkThroughSnippet,\n];\n\n/**\n * File scheme for which JS/TS language feature should be disabled\n */\nexport const disabledSchemes = new Set([\n\tgit,\n\tvsls\n]);\n","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * The abstract common base of all domains.\r\n */\r\nvar Domain = (function () {\r\n    function Domain() {\r\n    }\r\n    return Domain;\r\n}());\r\nmodule.exports = Domain;\r\n//# sourceMappingURL=Domain.js.map","\"use strict\";\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar url = require(\"url\");\r\nvar constants = require(\"constants\");\r\nvar Logging = require(\"./Logging\");\r\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\r\nvar Util = (function () {\r\n    function Util() {\r\n    }\r\n    /**\r\n     * helper method to access userId and sessionId cookie\r\n     */\r\n    Util.getCookie = function (name, cookie) {\r\n        var value = \"\";\r\n        if (name && name.length && typeof cookie === \"string\") {\r\n            var cookieName = name + \"=\";\r\n            var cookies = cookie.split(\";\");\r\n            for (var i = 0; i < cookies.length; i++) {\r\n                var cookie = cookies[i];\r\n                cookie = Util.trim(cookie);\r\n                if (cookie && cookie.indexOf(cookieName) === 0) {\r\n                    value = cookie.substring(cookieName.length, cookies[i].length);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    /**\r\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\r\n     */\r\n    Util.trim = function (str) {\r\n        if (typeof str === \"string\") {\r\n            return str.replace(/^\\s+|\\s+$/g, \"\");\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    };\r\n    /**\r\n     * Convert an array of int32 to Base64 (no '==' at the end).\r\n     * MSB first.\r\n     */\r\n    Util.int32ArrayToBase64 = function (array) {\r\n        var toChar = function (v, i) {\r\n            return String.fromCharCode((v >> i) & 0xFF);\r\n        };\r\n        var int32AsString = function (v) {\r\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\r\n        };\r\n        var x = array.map(int32AsString).join(\"\");\r\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\r\n        var s = b.toString(\"base64\");\r\n        return s.substr(0, s.indexOf(\"=\"));\r\n    };\r\n    /**\r\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\r\n     */\r\n    Util.random32 = function () {\r\n        return (0x100000000 * Math.random()) | 0;\r\n    };\r\n    /**\r\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\r\n     */\r\n    Util.randomu32 = function () {\r\n        return Util.random32() + 0x80000000;\r\n    };\r\n    /**\r\n     * generate W3C-compatible trace id\r\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\r\n     */\r\n    Util.w3cTraceId = function () {\r\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\r\n        var oct = \"\", tmp;\r\n        for (var a = 0; a < 4; a++) {\r\n            tmp = Util.random32();\r\n            oct +=\r\n                hexValues[tmp & 0xF] +\r\n                    hexValues[tmp >> 4 & 0xF] +\r\n                    hexValues[tmp >> 8 & 0xF] +\r\n                    hexValues[tmp >> 12 & 0xF] +\r\n                    hexValues[tmp >> 16 & 0xF] +\r\n                    hexValues[tmp >> 20 & 0xF] +\r\n                    hexValues[tmp >> 24 & 0xF] +\r\n                    hexValues[tmp >> 28 & 0xF];\r\n        }\r\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\r\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\r\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\r\n    };\r\n    /**\r\n     * Check if an object is of type Array\r\n     */\r\n    Util.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Error\r\n     */\r\n    Util.isError = function (obj) {\r\n        return obj instanceof Error;\r\n    };\r\n    Util.isPrimitive = function (input) {\r\n        var propType = typeof input;\r\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\r\n    };\r\n    /**\r\n     * Check if an object is of type Date\r\n     */\r\n    Util.isDate = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\r\n    };\r\n    /**\r\n     * Convert ms to c# time span format\r\n     */\r\n    Util.msToTimeSpan = function (totalms) {\r\n        if (isNaN(totalms) || totalms < 0) {\r\n            totalms = 0;\r\n        }\r\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\r\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\r\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\r\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\r\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\r\n        min = min.length < 2 ? \"0\" + min : min;\r\n        hour = hour.length < 2 ? \"0\" + hour : hour;\r\n        var daysText = days > 0 ? days + \".\" : \"\";\r\n        return daysText + hour + \":\" + min + \":\" + sec;\r\n    };\r\n    /**\r\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\r\n     * Simplify a generic Node Error into a simpler map for customDimensions\r\n     * Custom errors can still implement toJSON to override this functionality\r\n     */\r\n    Util.extractError = function (err) {\r\n        // Error is often subclassed so may have code OR id properties:\r\n        // https://nodejs.org/api/errors.html#errors_error_code\r\n        var looseError = err;\r\n        return {\r\n            message: err.message,\r\n            code: looseError.code || looseError.id || \"\",\r\n        };\r\n    };\r\n    /**\r\n     * Manually call toJSON if available to pre-convert the value.\r\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\r\n     * This avoids double escaping of quotes for Date objects, for example.\r\n     */\r\n    Util.extractObject = function (origProperty) {\r\n        if (origProperty instanceof Error) {\r\n            return Util.extractError(origProperty);\r\n        }\r\n        if (typeof origProperty.toJSON === \"function\") {\r\n            return origProperty.toJSON();\r\n        }\r\n        return origProperty;\r\n    };\r\n    /**\r\n     * Validate that an object is of type { [key: string]: string }\r\n     */\r\n    Util.validateStringMap = function (obj) {\r\n        if (typeof obj !== \"object\") {\r\n            Logging.info(\"Invalid properties dropped from payload\");\r\n            return;\r\n        }\r\n        var map = {};\r\n        for (var field in obj) {\r\n            var property = '';\r\n            var origProperty = obj[field];\r\n            var propType = typeof origProperty;\r\n            if (Util.isPrimitive(origProperty)) {\r\n                property = origProperty.toString();\r\n            }\r\n            else if (origProperty === null || propType === \"undefined\") {\r\n                property = \"\";\r\n            }\r\n            else if (propType === \"function\") {\r\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\r\n                continue;\r\n            }\r\n            else {\r\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\r\n                try {\r\n                    if (Util.isPrimitive(stringTarget)) {\r\n                        property = stringTarget;\r\n                    }\r\n                    else {\r\n                        property = JSON.stringify(stringTarget);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\r\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\r\n                }\r\n            }\r\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\r\n        }\r\n        return map;\r\n    };\r\n    /**\r\n     * Checks if a request url is not on a excluded domain list\r\n     * and if it is safe to add correlation headers\r\n     */\r\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\r\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\r\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\r\n            return true;\r\n        }\r\n        for (var i = 0; i < excludedDomains.length; i++) {\r\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\r\n            if (regex.test(url.parse(requestUrl).hostname)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Util.getCorrelationContextTarget = function (response, key) {\r\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\r\n        if (contextHeaders) {\r\n            var keyValues = contextHeaders.split(\",\");\r\n            for (var i = 0; i < keyValues.length; ++i) {\r\n                var keyValue = keyValues[i].split(\"=\");\r\n                if (keyValue.length == 2 && keyValue[0] == key) {\r\n                    return keyValue[1];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate request\r\n     *\r\n     * Proxify the request creation to handle proxy http\r\n     *\r\n     * @param {string} requestUrl url endpoint\r\n     * @param {Object} requestOptions Request option\r\n     * @param {Function} requestCallback callback on request\r\n     * @returns {http.ClientRequest} request object\r\n     */\r\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\r\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\r\n            requestUrl = 'https:' + requestUrl;\r\n        }\r\n        var requestUrlParsed = url.parse(requestUrl);\r\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\r\n        var proxyUrl = undefined;\r\n        if (requestUrlParsed.protocol === 'https:') {\r\n            proxyUrl = config.proxyHttpsUrl || undefined;\r\n        }\r\n        if (requestUrlParsed.protocol === 'http:') {\r\n            proxyUrl = config.proxyHttpUrl || undefined;\r\n        }\r\n        if (proxyUrl) {\r\n            if (proxyUrl.indexOf('//') === 0) {\r\n                proxyUrl = 'http:' + proxyUrl;\r\n            }\r\n            var proxyUrlParsed = url.parse(proxyUrl);\r\n            // https is not supported at the moment\r\n            if (proxyUrlParsed.protocol === 'https:') {\r\n                Logging.info(\"Proxies that use HTTPS are not supported\");\r\n                proxyUrl = undefined;\r\n            }\r\n            else {\r\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\r\n            }\r\n        }\r\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\r\n        if (isHttps && config.httpsAgent !== undefined) {\r\n            options.agent = config.httpsAgent;\r\n        }\r\n        else if (!isHttps && config.httpAgent !== undefined) {\r\n            options.agent = config.httpAgent;\r\n        }\r\n        else if (isHttps) {\r\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\r\n            options.agent = Util.tlsRestrictedAgent;\r\n        }\r\n        if (isHttps) {\r\n            return https.request(options, requestCallback);\r\n        }\r\n        else {\r\n            return http.request(options, requestCallback);\r\n        }\r\n    };\r\n    ;\r\n    Util.MAX_PROPERTY_LENGTH = 8192;\r\n    Util.tlsRestrictedAgent = new https.Agent({\r\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\r\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\r\n    });\r\n    return Util;\r\n}());\r\nmodule.exports = Util;\r\n//# sourceMappingURL=Util.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nconst noopDisposable = vscode.Disposable.from();\n\nexport const nulToken: vscode.CancellationToken = {\n\tisCancellationRequested: false,\n\tonCancellationRequested: () => noopDisposable\n};\n","module.exports = require(\"os\");",null,"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Logging = require(\"../Library/Logging\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar CorrelationContextManager = (function () {\r\n    function CorrelationContextManager() {\r\n    }\r\n    /**\r\n     *  Provides the current Context.\r\n     *  The context is the most recent one entered into for the current\r\n     *  logical chain of execution, including across asynchronous calls.\r\n     */\r\n    CorrelationContextManager.getCurrentContext = function () {\r\n        if (!CorrelationContextManager.enabled) {\r\n            return null;\r\n        }\r\n        return Zone.current.get(\"context\");\r\n    };\r\n    /**\r\n     *  A helper to generate objects conforming to the CorrelationContext interface\r\n     */\r\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader) {\r\n        parentId = parentId || operationId;\r\n        if (this.enabled) {\r\n            return {\r\n                operation: {\r\n                    name: operationName,\r\n                    id: operationId,\r\n                    parentId: parentId\r\n                },\r\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    /**\r\n     *  Runs a function inside a given Context.\r\n     *  All logical children of the execution path that entered this Context\r\n     *  will receive this Context object on calls to GetCurrentContext.\r\n     */\r\n    CorrelationContextManager.runWithContext = function (context, fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            var newZone = Zone.current.fork({\r\n                name: \"AI-\" + ((context && context.operation.parentId) || \"Unknown\"),\r\n                properties: { context: context }\r\n            });\r\n            newZone.run(fn);\r\n        }\r\n        else {\r\n            fn();\r\n        }\r\n    };\r\n    /**\r\n     *  Patches a callback to restore the correct Context when getCurrentContext\r\n     *  is run within it. This is necessary if automatic correlation fails to work\r\n     *  with user-included libraries.\r\n     *\r\n     *  The supplied callback will be given the same context that was present for\r\n     *  the call to wrapCallback.  */\r\n    CorrelationContextManager.wrapCallback = function (fn) {\r\n        if (CorrelationContextManager.enabled) {\r\n            return Zone.current.wrap(fn, \"User-wrapped method\");\r\n        }\r\n        return fn;\r\n    };\r\n    /**\r\n     *  Enables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.enable = function () {\r\n        if (this.enabled) {\r\n            return;\r\n        }\r\n        if (!this.isNodeVersionCompatible()) {\r\n            this.enabled = false;\r\n            return;\r\n        }\r\n        // Run patches for Zone.js\r\n        if (!CorrelationContextManager.hasEverEnabled) {\r\n            this.hasEverEnabled = true;\r\n            // Load in Zone.js\r\n            try {\r\n                // Require zone if we can't detect its presence - guarded because of issue #346\r\n                // Note that usually multiple requires of zone.js does not error - but we see reports of it happening\r\n                // in the Azure Functions environment.\r\n                // This indicates that the file is being included multiple times in the same global scope,\r\n                // averting require's cache somehow.\r\n                if (typeof Zone === \"undefined\") {\r\n                    require(\"zone.js\");\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Zone was already loaded even though we couldn't find its global variable\r\n                Logging.warn(\"Failed to require zone.js\");\r\n            }\r\n            DiagChannel.registerContextPreservation(function (cb) {\r\n                return Zone.current.wrap(cb, \"AI-ContextPreservation\");\r\n            });\r\n            this.patchError();\r\n            this.patchTimers([\"setTimeout\", \"setInterval\"]);\r\n        }\r\n        this.enabled = true;\r\n    };\r\n    /**\r\n     *  Disables the CorrelationContextManager.\r\n     */\r\n    CorrelationContextManager.disable = function () {\r\n        this.enabled = false;\r\n    };\r\n    /**\r\n     *  Reports if the CorrelationContextManager is able to run in this environment\r\n     */\r\n    CorrelationContextManager.isNodeVersionCompatible = function () {\r\n        // Unit tests warn of errors < 3.3 from timer patching. All versions before 4 were 0.x\r\n        var nodeVer = process.versions.node.split(\".\");\r\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\r\n    };\r\n    // Zone.js breaks concatenation of timer return values.\r\n    // This fixes that.\r\n    CorrelationContextManager.patchTimers = function (methodNames) {\r\n        methodNames.forEach(function (methodName) {\r\n            var orig = global[methodName];\r\n            global[methodName] = function () {\r\n                var ret = orig.apply(this, arguments);\r\n                ret.toString = function () {\r\n                    if (this.data && typeof this.data.handleId !== 'undefined') {\r\n                        return this.data.handleId.toString();\r\n                    }\r\n                    else {\r\n                        return Object.prototype.toString.call(this);\r\n                    }\r\n                };\r\n                return ret;\r\n            };\r\n        });\r\n    };\r\n    // Zone.js breaks deepEqual on error objects (by making internal properties enumerable).\r\n    // This fixes that by subclassing the error object and making all properties not enumerable\r\n    CorrelationContextManager.patchError = function () {\r\n        var orig = global.Error;\r\n        // New error handler\r\n        function AppInsightsAsyncCorrelatedErrorWrapper() {\r\n            if (!(this instanceof AppInsightsAsyncCorrelatedErrorWrapper)) {\r\n                return AppInsightsAsyncCorrelatedErrorWrapper.apply(Object.create(AppInsightsAsyncCorrelatedErrorWrapper.prototype), arguments);\r\n            }\r\n            // Is this object set to rewrite the stack?\r\n            // If so, we should turn off some Zone stuff that is prone to break\r\n            var stackRewrite = orig.stackRewrite;\r\n            if (orig.prepareStackTrace) {\r\n                orig.stackRewrite = false;\r\n                var stackTrace = orig.prepareStackTrace;\r\n                orig.prepareStackTrace = function (e, s) {\r\n                    // Remove some AI and Zone methods from the stack trace\r\n                    // Otherwise we leave side-effects\r\n                    // Algorithm is to find the first frame on the stack after the first instance(s)\r\n                    // of AutoCollection/CorrelationContextManager\r\n                    // Eg. this should return the User frame on an array like below:\r\n                    //  Zone | Zone | CorrelationContextManager | CorrelationContextManager | User\r\n                    var foundOne = false;\r\n                    for (var i = 0; i < s.length; i++) {\r\n                        var fileName = s[i].getFileName();\r\n                        if (fileName) {\r\n                            if (fileName.indexOf(\"AutoCollection/CorrelationContextManager\") === -1 &&\r\n                                fileName.indexOf(\"AutoCollection\\\\CorrelationContextManager\") === -1) {\r\n                                if (foundOne) {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            else {\r\n                                foundOne = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    // Loop above goes one extra step\r\n                    i = Math.max(0, i - 1);\r\n                    if (foundOne) {\r\n                        s.splice(0, i);\r\n                    }\r\n                    return stackTrace(e, s);\r\n                };\r\n            }\r\n            // Apply the error constructor\r\n            orig.apply(this, arguments);\r\n            // Restore Zone stack rewriting settings\r\n            orig.stackRewrite = stackRewrite;\r\n            // Remove unexpected bits from stack trace\r\n            if (this.stack && typeof this.stack === \"string\") {\r\n                var stackFrames = this.stack.split(\"\\n\");\r\n                // Remove this class\r\n                if (stackFrames.length > 3) {\r\n                    if (stackFrames[2].trim().indexOf(\"at Error.AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\r\n                        stackFrames.splice(2, 1);\r\n                    }\r\n                    else if (stackFrames[1].trim().indexOf(\"at AppInsightsAsyncCorrelatedErrorWrapper.ZoneAwareError\") === 0\r\n                        && stackFrames[2].trim().indexOf(\"at new AppInsightsAsyncCorrelatedErrorWrapper\") === 0) {\r\n                        stackFrames.splice(1, 2);\r\n                    }\r\n                }\r\n                // Remove AI correlation ids\r\n                this.stack = stackFrames.map(function (v) {\r\n                    var startIndex = v.indexOf(\") [\");\r\n                    if (startIndex > -1) {\r\n                        v = v.substr(0, startIndex + 1);\r\n                    }\r\n                    return v;\r\n                }).join(\"\\n\");\r\n            }\r\n            // getOwnPropertyNames should be a superset of Object.keys...\r\n            // This appears to not always be the case\r\n            var props = Object.getOwnPropertyNames(this).concat(Object.keys(this));\r\n            // Zone.js will automatically create some hidden properties at read time.\r\n            // We need to proactively make those not enumerable as well as the currently visible properties\r\n            for (var i = 0; i < props.length; i++) {\r\n                var propertyName = props[i];\r\n                var hiddenPropertyName = Zone['__symbol__'](propertyName);\r\n                Object.defineProperty(this, propertyName, { enumerable: false });\r\n                Object.defineProperty(this, hiddenPropertyName, { enumerable: false, writable: true });\r\n            }\r\n            return this;\r\n        }\r\n        // Inherit from the Zone.js error handler\r\n        AppInsightsAsyncCorrelatedErrorWrapper.prototype = orig.prototype;\r\n        // We need this loop to copy outer methods like Error.captureStackTrace\r\n        var props = Object.getOwnPropertyNames(orig);\r\n        for (var i = 0; i < props.length; i++) {\r\n            var propertyName = props[i];\r\n            if (!AppInsightsAsyncCorrelatedErrorWrapper[propertyName]) {\r\n                Object.defineProperty(AppInsightsAsyncCorrelatedErrorWrapper, propertyName, Object.getOwnPropertyDescriptor(orig, propertyName));\r\n            }\r\n        }\r\n        // explicit cast to <any> required to avoid type error for captureStackTrace\r\n        // with latest node.d.ts (despite workaround above)\r\n        global.Error = AppInsightsAsyncCorrelatedErrorWrapper;\r\n    };\r\n    CorrelationContextManager.enabled = false;\r\n    CorrelationContextManager.hasEverEnabled = false;\r\n    return CorrelationContextManager;\r\n}());\r\nexports.CorrelationContextManager = CorrelationContextManager;\r\nvar CustomPropertiesImpl = (function () {\r\n    function CustomPropertiesImpl(header) {\r\n        this.props = [];\r\n        this.addHeaderData(header);\r\n    }\r\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\r\n        var keyvals = header ? header.split(\", \") : [];\r\n        this.props = keyvals.map(function (keyval) {\r\n            var parts = keyval.split(\"=\");\r\n            return { key: parts[0], value: parts[1] };\r\n        }).concat(this.props);\r\n    };\r\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\r\n        return this.props.map(function (keyval) {\r\n            return keyval.key + \"=\" + keyval.value;\r\n        }).join(\", \");\r\n    };\r\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                return keyval.value;\r\n            }\r\n        }\r\n        return;\r\n    };\r\n    // TODO: Strictly according to the spec, properties which are recieved from\r\n    // an incoming request should be left untouched, while we may add our own new\r\n    // properties. The logic here will need to change to track that.\r\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\r\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\r\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\r\n            return;\r\n        }\r\n        for (var i = 0; i < this.props.length; ++i) {\r\n            var keyval = this.props[i];\r\n            if (keyval.key === prop) {\r\n                keyval.value = val;\r\n                return;\r\n            }\r\n        }\r\n        this.props.push({ key: prop, value: val });\r\n    };\r\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\r\n    return CustomPropertiesImpl;\r\n}());\r\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\r\nmodule.exports = {\r\n    /**\r\n     * Request-Context header\r\n     */\r\n    requestContextHeader: \"request-context\",\r\n    /**\r\n     * Source instrumentation header that is added by an application while making http\r\n     * requests and retrieved by the other application when processing incoming requests.\r\n     */\r\n    requestContextSourceKey: \"appId\",\r\n    /**\r\n     * Target instrumentation header that is added to the response and retrieved by the\r\n     * calling application when processing incoming responses.\r\n     */\r\n    requestContextTargetKey: \"appId\",\r\n    /**\r\n     * Request-Id header\r\n     */\r\n    requestIdHeader: \"request-id\",\r\n    /**\r\n     * Legacy Header containing the id of the immidiate caller\r\n     */\r\n    parentIdHeader: \"x-ms-request-id\",\r\n    /**\r\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\r\n     * accross transactions\r\n     */\r\n    rootIdHeader: \"x-ms-request-root-id\",\r\n    /**\r\n     * Correlation-Context header\r\n     *\r\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\r\n     */\r\n    correlationContextHeader: \"correlation-context\"\r\n};\r\n//# sourceMappingURL=RequestResponseHeaders.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from 'path';\nimport * as vscode from 'vscode';\nimport * as languageModeIds from './languageModeIds';\n\nexport const enum DiagnosticLanguage {\n\tJavaScript,\n\tTypeScript\n}\n\nexport const allDiagnosticLanguages = [DiagnosticLanguage.JavaScript, DiagnosticLanguage.TypeScript];\n\nexport interface LanguageDescription {\n\treadonly id: string;\n\treadonly diagnosticOwner: string;\n\treadonly diagnosticSource: string;\n\treadonly diagnosticLanguage: DiagnosticLanguage;\n\treadonly modeIds: string[];\n\treadonly configFilePattern?: RegExp;\n\treadonly isExternal?: boolean;\n}\n\nexport const standardLanguageDescriptions: LanguageDescription[] = [\n\t{\n\t\tid: 'typescript',\n\t\tdiagnosticOwner: 'typescript',\n\t\tdiagnosticSource: 'ts',\n\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\tmodeIds: [languageModeIds.typescript, languageModeIds.typescriptreact],\n\t\tconfigFilePattern: /^tsconfig(\\..*)?\\.json$/gi\n\t}, {\n\t\tid: 'javascript',\n\t\tdiagnosticOwner: 'typescript',\n\t\tdiagnosticSource: 'ts',\n\t\tdiagnosticLanguage: DiagnosticLanguage.JavaScript,\n\t\tmodeIds: [languageModeIds.javascript, languageModeIds.javascriptreact],\n\t\tconfigFilePattern: /^jsconfig(\\..*)?\\.json$/gi\n\t}\n];\n\nexport function isTsConfigFileName(fileName: string): boolean {\n\treturn /^tsconfig\\.(.+\\.)?json$/i.test(basename(fileName));\n}\n\nexport function isJsConfigOrTsConfigFileName(fileName: string): boolean {\n\treturn /^[jt]sconfig\\.(.+\\.)?json$/i.test(basename(fileName));\n}\n\nexport function doesResourceLookLikeATypeScriptFile(resource: vscode.Uri): boolean {\n\treturn /\\.tsx?$/i.test(resource.fsPath);\n}\n\nexport function doesResourceLookLikeAJavaScriptFile(resource: vscode.Uri): boolean {\n\treturn /\\.jsx?$/i.test(resource.fsPath);\n}\n","module.exports = require(\"assert\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function parseKindModifier(kindModifiers: string): Set<string> {\n\treturn new Set(kindModifiers.split(/,|\\s+/g));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function memoize(_target: any, key: string, descriptor: any) {\n\tlet fnKey: string | undefined;\n\tlet fn: Function | undefined;\n\n\tif (typeof descriptor.value === 'function') {\n\t\tfnKey = 'value';\n\t\tfn = descriptor.value;\n\t} else if (typeof descriptor.get === 'function') {\n\t\tfnKey = 'get';\n\t\tfn = descriptor.get;\n\t} else {\n\t\tthrow new Error('not supported');\n\t}\n\n\tconst memoizeKey = `$memoize$${key}`;\n\n\tdescriptor[fnKey] = function (...args: any[]) {\n\t\tif (!this.hasOwnProperty(memoizeKey)) {\n\t\t\tObject.defineProperty(this, memoizeKey, {\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: false,\n\t\t\t\tvalue: fn!.apply(this, args)\n\t\t\t});\n\t\t}\n\n\t\treturn this[memoizeKey];\n\t};\n}\n","module.exports = require(\"url\");","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","module.exports = require(\"util\");","module.exports = require(\"events\");","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as array from './arrays';\n\nexport function equals(one: any, other: any): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\tif (one === null || one === undefined || other === null || other === undefined) {\n\t\treturn false;\n\t}\n\tif (typeof one !== typeof other) {\n\t\treturn false;\n\t}\n\tif (typeof one !== 'object') {\n\t\treturn false;\n\t}\n\tif (Array.isArray(one) !== Array.isArray(other)) {\n\t\treturn false;\n\t}\n\n\tif (Array.isArray(one)) {\n\t\treturn array.equals(one, other, equals);\n\t} else {\n\t\tconst oneKeys: string[] = [];\n\t\tfor (const key in one) {\n\t\t\toneKeys.push(key);\n\t\t}\n\t\toneKeys.sort();\n\t\tconst otherKeys: string[] = [];\n\t\tfor (const key in other) {\n\t\t\totherKeys.push(key);\n\t\t}\n\t\totherKeys.sort();\n\t\tif (!array.equals(oneKeys, otherKeys)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn oneKeys.every(key => equals(one[key], other[key]));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../utils/fileSchemes';\n\n/**\n * Maps of file resources\n *\n * Attempts to handle correct mapping on both case sensitive and case in-sensitive\n * file systems.\n */\nexport class ResourceMap<T> {\n\n\tprivate static readonly defaultPathNormalizer = (resource: vscode.Uri): string => {\n\t\tif (resource.scheme === fileSchemes.file) {\n\t\t\treturn resource.fsPath;\n\t\t}\n\t\treturn resource.toString(true);\n\t};\n\n\tprivate readonly _map = new Map<string, { readonly resource: vscode.Uri, value: T }>();\n\n\tconstructor(\n\t\tprotected readonly _normalizePath: (resource: vscode.Uri) => string | undefined = ResourceMap.defaultPathNormalizer,\n\t\tprotected readonly config: {\n\t\t\treadonly onCaseInsenitiveFileSystem: boolean,\n\t\t},\n\t) { }\n\n\tpublic get size() {\n\t\treturn this._map.size;\n\t}\n\n\tpublic has(resource: vscode.Uri): boolean {\n\t\tconst file = this.toKey(resource);\n\t\treturn !!file && this._map.has(file);\n\t}\n\n\tpublic get(resource: vscode.Uri): T | undefined {\n\t\tconst file = this.toKey(resource);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst entry = this._map.get(file);\n\t\treturn entry ? entry.value : undefined;\n\t}\n\n\tpublic set(resource: vscode.Uri, value: T) {\n\t\tconst file = this.toKey(resource);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\t\tconst entry = this._map.get(file);\n\t\tif (entry) {\n\t\t\tentry.value = value;\n\t\t} else {\n\t\t\tthis._map.set(file, { resource, value });\n\t\t}\n\t}\n\n\tpublic delete(resource: vscode.Uri): void {\n\t\tconst file = this.toKey(resource);\n\t\tif (file) {\n\t\t\tthis._map.delete(file);\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tthis._map.clear();\n\t}\n\n\tpublic get values(): Iterable<T> {\n\t\treturn Array.from(this._map.values()).map(x => x.value);\n\t}\n\n\tpublic get entries(): Iterable<{ resource: vscode.Uri, value: T }> {\n\t\treturn this._map.values();\n\t}\n\n\tprivate toKey(resource: vscode.Uri): string | undefined {\n\t\tconst key = this._normalizePath(resource);\n\t\tif (!key) {\n\t\t\treturn key;\n\t\t}\n\t\treturn this.isCaseInsensitivePath(key) ? key.toLowerCase() : key;\n\t}\n\n\tprivate isCaseInsensitivePath(path: string) {\n\t\tif (isWindowsPath(path)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn path[0] === '/' && this.config.onCaseInsenitiveFileSystem;\n\t}\n}\n\nfunction isWindowsPath(path: string): boolean {\n\treturn /^[a-zA-Z]:[\\/\\\\]/.test(path);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\n\nfunction replaceLinks(text: string): string {\n\treturn text\n\t\t// Http(s) links\n\t\t.replace(/\\{@(link|linkplain|linkcode) (https?:\\/\\/[^ |}]+?)(?:[| ]([^{}\\n]+?))?\\}/gi, (_, tag: string, link: string, text?: string) => {\n\t\t\tswitch (tag) {\n\t\t\t\tcase 'linkcode':\n\t\t\t\t\treturn `[\\`${text ? text.trim() : link}\\`](${link})`;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn `[${text ? text.trim() : link}](${link})`;\n\t\t\t}\n\t\t});\n}\n\nfunction processInlineTags(text: string): string {\n\treturn replaceLinks(text);\n}\n\nfunction getTagBodyText(tag: Proto.JSDocTagInfo): string | undefined {\n\tif (!tag.text) {\n\t\treturn undefined;\n\t}\n\n\t// Convert to markdown code block if it is not already one\n\tfunction makeCodeblock(text: string): string {\n\t\tif (text.match(/^\\s*[~`]{3}/g)) {\n\t\t\treturn text;\n\t\t}\n\t\treturn '```\\n' + text + '\\n```';\n\t}\n\n\tswitch (tag.name) {\n\t\tcase 'example':\n\t\t\t// check for caption tags, fix for #79704\n\t\t\tconst captionTagMatches = tag.text.match(/<caption>(.*?)<\\/caption>\\s*(\\r\\n|\\n)/);\n\t\t\tif (captionTagMatches && captionTagMatches.index === 0) {\n\t\t\t\treturn captionTagMatches[1] + '\\n\\n' + makeCodeblock(tag.text.substr(captionTagMatches[0].length));\n\t\t\t} else {\n\t\t\t\treturn makeCodeblock(tag.text);\n\t\t\t}\n\t\tcase 'author':\n\t\t\t// fix obsucated email address, #80898\n\t\t\tconst emailMatch = tag.text.match(/(.+)\\s<([-.\\w]+@[-.\\w]+)>/);\n\n\t\t\tif (emailMatch === null) {\n\t\t\t\treturn tag.text;\n\t\t\t} else {\n\t\t\t\treturn `${emailMatch[1]} ${emailMatch[2]}`;\n\t\t\t}\n\t\tcase 'default':\n\t\t\treturn makeCodeblock(tag.text);\n\t}\n\n\treturn processInlineTags(tag.text);\n}\n\nfunction getTagDocumentation(tag: Proto.JSDocTagInfo): string | undefined {\n\tswitch (tag.name) {\n\t\tcase 'augments':\n\t\tcase 'extends':\n\t\tcase 'param':\n\t\tcase 'template':\n\t\t\tconst body = (tag.text || '').split(/^(\\S+)\\s*-?\\s*/);\n\t\t\tif (body?.length === 3) {\n\t\t\t\tconst param = body[1];\n\t\t\t\tconst doc = body[2];\n\t\t\t\tconst label = `*@${tag.name}* \\`${param}\\``;\n\t\t\t\tif (!doc) {\n\t\t\t\t\treturn label;\n\t\t\t\t}\n\t\t\t\treturn label + (doc.match(/\\r\\n|\\n/g) ? '  \\n' + processInlineTags(doc) : `  ${processInlineTags(doc)}`);\n\t\t\t}\n\t}\n\n\t// Generic tag\n\tconst label = `*@${tag.name}*`;\n\tconst text = getTagBodyText(tag);\n\tif (!text) {\n\t\treturn label;\n\t}\n\treturn label + (text.match(/\\r\\n|\\n/g) ? '  \\n' + text : `  ${text}`);\n}\n\nexport function plain(parts: Proto.SymbolDisplayPart[] | string): string {\n\treturn processInlineTags(\n\t\ttypeof parts === 'string'\n\t\t\t? parts\n\t\t\t: parts.map(part => part.text).join(''));\n}\n\nexport function tagsMarkdownPreview(tags: Proto.JSDocTagInfo[]): string {\n\treturn tags.map(getTagDocumentation).join('  \\n\\n');\n}\n\nexport function markdownDocumentation(\n\tdocumentation: Proto.SymbolDisplayPart[] | string,\n\ttags: Proto.JSDocTagInfo[]\n): vscode.MarkdownString {\n\tconst out = new vscode.MarkdownString();\n\taddMarkdownDocumentation(out, documentation, tags);\n\treturn out;\n}\n\nexport function addMarkdownDocumentation(\n\tout: vscode.MarkdownString,\n\tdocumentation: Proto.SymbolDisplayPart[] | string | undefined,\n\ttags: Proto.JSDocTagInfo[] | undefined\n): vscode.MarkdownString {\n\tif (documentation) {\n\t\tout.appendMarkdown(plain(documentation));\n\t}\n\n\tif (tags) {\n\t\tconst tagsPreview = tagsMarkdownPreview(tags);\n\t\tif (tagsPreview) {\n\t\t\tout.appendMarkdown('\\n\\n' + tagsPreview);\n\t\t}\n\t}\n\treturn out;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport * as typeConverters from '../utils/typeConverters';\n\n\nexport default class TypeScriptDefinitionProviderBase {\n\tconstructor(\n\t\tprotected readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tprotected async getSymbolLocations(\n\t\tdefinitionType: 'definition' | 'implementation' | 'typeDefinition',\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Location[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(file, position);\n\t\tconst response = await this.client.execute(definitionType, args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(location =>\n\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(location.file), location));\n\t}\n}","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\r\nif (exports.IsInitialized) {\r\n    var publishers = require(\"diagnostic-channel-publishers\");\r\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\r\n    var unpatchedModules = individualOptOuts.split(\",\");\r\n    var modules = {\r\n        bunyan: publishers.bunyan,\r\n        console: publishers.console,\r\n        mongodb: publishers.mongodb,\r\n        mongodbCore: publishers.mongodbCore,\r\n        mysql: publishers.mysql,\r\n        redis: publishers.redis,\r\n        pg: publishers.pg,\r\n        pgPool: publishers.pgPool,\r\n        winston: publishers.winston\r\n    };\r\n    for (var mod in modules) {\r\n        if (unpatchedModules.indexOf(mod) === -1) {\r\n            modules[mod].enable();\r\n        }\r\n    }\r\n}\r\nfunction registerContextPreservation(cb) {\r\n    if (!exports.IsInitialized) {\r\n        return;\r\n    }\r\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\r\n}\r\nexports.registerContextPreservation = registerContextPreservation;\r\n//# sourceMappingURL=initialization.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectHttpDependencies = (function () {\r\n    function AutoCollectHttpDependencies(client) {\r\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\r\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpDependencies.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._initialize();\r\n        }\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpDependencies.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var originalGet = http.get;\r\n        var originalRequest = http.request;\r\n        var originalHttpsRequest = https.request;\r\n        var clientRequestPatch = function (request, options) {\r\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\r\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\r\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\r\n            if (request && options && shouldCollect) {\r\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\r\n            }\r\n        };\r\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\r\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\r\n        // Patch both and leave a flag to not double-count on versions that just call through\r\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\r\n        http.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        https.request = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\r\n            clientRequestPatch(request, options);\r\n            return request;\r\n        };\r\n        // Node 8 calls http.request from http.get using a local reference!\r\n        // We have to patch .get manually in this case and can't just assume request is enough\r\n        // We have to replace the entire method in this case. We can't call the original.\r\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\r\n        http.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n        https.get = function (options) {\r\n            var requestArgs = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                requestArgs[_i - 1] = arguments[_i];\r\n            }\r\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\r\n            request.end();\r\n            return request;\r\n            var _a;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks an outgoing request. Because it may set headers this method must be called before\r\n     * writing content to or ending the request.\r\n     */\r\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\r\n        if (!telemetry.options || !telemetry.request || !client) {\r\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\r\n            return;\r\n        }\r\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\r\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\r\n        // Add the source correlationId to the request headers, if a value was not already provided.\r\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\r\n        // are not included in the v0.10 type declarations currently used. So check if the\r\n        // methods exist before invoking them.\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\r\n            if (client.config && client.config.correlationId) {\r\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\r\n                if (correlationHeader) {\r\n                    var components = correlationHeader.split(\",\");\r\n                    var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n                    if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\r\n                        telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                    }\r\n                }\r\n                else {\r\n                    telemetry.request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                }\r\n            }\r\n            if (currentContext && currentContext.operation) {\r\n                telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\r\n                // Also set legacy headers\r\n                telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\r\n                telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\r\n                var correlationContextHeader = currentContext.customProperties.serializeToHeader();\r\n                if (correlationContextHeader) {\r\n                    telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\r\n                }\r\n            }\r\n        }\r\n        // Collect dependency telemetry about the request when it finishes.\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on('response', function (response) {\r\n                requestParser.onResponse(response);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n            telemetry.request.on('error', function (e) {\r\n                requestParser.onError(e);\r\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\r\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\r\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\r\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\r\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\r\n                client.trackDependency(dependencyTelemetry);\r\n            });\r\n        }\r\n    };\r\n    AutoCollectHttpDependencies.prototype.dispose = function () {\r\n        AutoCollectHttpDependencies.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\r\n    AutoCollectHttpDependencies.requestNumber = 1;\r\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpDependencies;\r\n}());\r\nmodule.exports = AutoCollectHttpDependencies;\r\n//# sourceMappingURL=HttpDependencies.js.map","module.exports = require(\"http\");","module.exports = require(\"https\");","\"use strict\";\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar CorrelationIdManager = (function () {\r\n    function CorrelationIdManager() {\r\n    }\r\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\r\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\r\n        // If it 404s, the iKey is bad and we should give up\r\n        // If it fails otherwise, try again later\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\r\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\r\n            return;\r\n        }\r\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\r\n            return;\r\n        }\r\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\r\n        var fetchAppId = function () {\r\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                // This query has been cancelled.\r\n                return;\r\n            }\r\n            var requestOptions = {\r\n                method: 'GET',\r\n                // Ensure this request is not captured by auto-collection.\r\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\r\n                disableAppInsightsAutoCollection: true\r\n            };\r\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\r\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\r\n                if (res.statusCode === 200) {\r\n                    // Success; extract the appId from the body\r\n                    var appId_1 = \"\";\r\n                    res.setEncoding(\"utf-8\");\r\n                    res.on('data', function (data) {\r\n                        appId_1 += data;\r\n                    });\r\n                    res.on('end', function () {\r\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\r\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\r\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\r\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\r\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\r\n                        }\r\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                    });\r\n                }\r\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\r\n                    // Not found, probably a bad key. Do not try again.\r\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\r\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n                }\r\n                else {\r\n                    // Retry after timeout.\r\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\r\n                }\r\n            });\r\n            if (req) {\r\n                req.on('error', function (error) {\r\n                    // Unable to contact endpoint.\r\n                    // Do nothing for now.\r\n                    Logging.warn(CorrelationIdManager.TAG, error);\r\n                });\r\n                req.end();\r\n            }\r\n        };\r\n        setTimeout(fetchAppId, 0);\r\n    };\r\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\r\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\r\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\r\n        if (pendingLookups) {\r\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\r\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\r\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\r\n     * @param parentId\r\n     */\r\n    CorrelationIdManager.generateRequestId = function (parentId) {\r\n        if (parentId) {\r\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\r\n            if (parentId[parentId.length - 1] !== '.') {\r\n                parentId += '.';\r\n            }\r\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\r\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\r\n        }\r\n        else {\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n    };\r\n    /**\r\n     * Given a hierarchical identifier of the form |X.*\r\n     * return the root identifier X\r\n     * @param id\r\n     */\r\n    CorrelationIdManager.getRootId = function (id) {\r\n        var endIndex = id.indexOf('.');\r\n        if (endIndex < 0) {\r\n            endIndex = id.length;\r\n        }\r\n        var startIndex = id[0] === '|' ? 1 : 0;\r\n        return id.substring(startIndex, endIndex);\r\n    };\r\n    CorrelationIdManager.generateRootId = function () {\r\n        return '|' + Util.w3cTraceId() + '.';\r\n    };\r\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\r\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\r\n            return parentId + suffix + delimiter;\r\n        }\r\n        // Combined identifier would be too long, so we must truncate it.\r\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\r\n        // overflow delimiter '#'\r\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\r\n        if (parentId.length > trimPosition) {\r\n            for (; trimPosition > 1; --trimPosition) {\r\n                var c = parentId[trimPosition - 1];\r\n                if (c === '.' || c === '_') {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (trimPosition <= 1) {\r\n            // parentId is not a valid ID\r\n            return CorrelationIdManager.generateRootId();\r\n        }\r\n        suffix = Util.randomu32().toString(16);\r\n        while (suffix.length < 8) {\r\n            suffix = '0' + suffix;\r\n        }\r\n        return parentId.substring(0, trimPosition) + suffix + '#';\r\n    };\r\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\r\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\r\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\r\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\r\n    CorrelationIdManager.pendingLookups = {};\r\n    CorrelationIdManager.completedLookups = {};\r\n    CorrelationIdManager.requestIdMaxLength = 1024;\r\n    CorrelationIdManager.currentRootId = Util.randomu32();\r\n    return CorrelationIdManager;\r\n}());\r\nmodule.exports = CorrelationIdManager;\r\n//# sourceMappingURL=CorrelationIdManager.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as os from 'os';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nfunction makeRandomHexString(length: number): string {\n\tconst chars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\tlet result = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tconst idx = Math.floor(chars.length * Math.random());\n\t\tresult += chars[idx];\n\t}\n\treturn result;\n}\n\nconst getRootTempDir = (() => {\n\tlet dir: string | undefined;\n\treturn () => {\n\t\tif (!dir) {\n\t\t\tconst filename = `vscode-typescript${process.platform !== 'win32' && process.getuid ? process.getuid() : ''}`;\n\t\t\tdir = path.join(os.tmpdir(), filename);\n\t\t}\n\t\tif (!fs.existsSync(dir)) {\n\t\t\tfs.mkdirSync(dir);\n\t\t}\n\t\treturn dir;\n\t};\n})();\n\nexport const getInstanceTempDir = (() => {\n\tlet dir: string | undefined;\n\treturn () => {\n\t\tif (!dir) {\n\t\t\tdir = path.join(getRootTempDir(), makeRandomHexString(20));\n\t\t}\n\t\tif (!fs.existsSync(dir)) {\n\t\t\tfs.mkdirSync(dir);\n\t\t}\n\t\treturn dir;\n\t};\n})();\n\nexport function getTempFile(prefix: string): string {\n\treturn path.join(getInstanceTempDir(), `${prefix}-${makeRandomHexString(20)}.tmp`);\n}\n","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","exports.alphasort = alphasort\nexports.alphasorti = alphasorti\nexports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasorti (a, b) {\n  return a.toLowerCase().localeCompare(b.toLowerCase())\n}\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b)\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(self.nocase ? alphasorti : alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { isTypeScriptDocument } from '../utils/languageModeIds';\nimport { Command } from './commandManager';\n\nexport class LearnMoreAboutRefactoringsCommand implements Command {\n\tpublic static readonly id = '_typescript.learnMoreAboutRefactorings';\n\tpublic readonly id = LearnMoreAboutRefactoringsCommand.id;\n\n\tpublic execute() {\n\t\tconst docUrl = vscode.window.activeTextEditor && isTypeScriptDocument(vscode.window.activeTextEditor.document)\n\t\t\t? 'https://go.microsoft.com/fwlink/?linkid=2114477'\n\t\t\t: 'https://go.microsoft.com/fwlink/?linkid=2116761';\n\n\t\tvscode.env.openExternal(vscode.Uri.parse(docUrl));\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { EventName } from '../protocol.const';\nimport { CallbackMap } from '../tsServer/callbackMap';\nimport { RequestItem, RequestQueue, RequestQueueingType } from '../tsServer/requestQueue';\nimport { TypeScriptServerError } from '../tsServer/serverError';\nimport { ServerResponse, ServerType, TypeScriptRequests } from '../typescriptService';\nimport { TypeScriptServiceConfiguration } from '../utils/configuration';\nimport { Disposable } from '../utils/dispose';\nimport { TelemetryReporter } from '../utils/telemetry';\nimport Tracer from '../utils/tracer';\nimport { OngoingRequestCanceller } from './cancellation';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { TypeScriptVersion } from './versionProvider';\n\nexport enum ExectuionTarget {\n\tSemantic,\n\tSyntax\n}\n\nexport interface ITypeScriptServer {\n\treadonly onEvent: vscode.Event<Proto.Event>;\n\treadonly onExit: vscode.Event<any>;\n\treadonly onError: vscode.Event<any>;\n\n\treadonly tsServerLogFile: string | undefined;\n\n\tkill(): void;\n\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExectuionTarget }): undefined;\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\n\tdispose(): void;\n}\n\nexport interface TsServerDelegate {\n\tonFatalError(command: string, error: Error): void;\n}\n\nexport const enum TsServerProcessKind {\n\tMain = 'main',\n\tSyntax = 'syntax',\n\tSemantic = 'semantic',\n\tDiagnostics = 'diagnostics'\n}\n\nexport interface TsServerProcessFactory {\n\tfork(\n\t\ttsServerPath: string,\n\t\targs: readonly string[],\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tversionManager: TypeScriptVersionManager,\n\t): TsServerProcess;\n}\n\nexport interface TsServerProcess {\n\twrite(serverRequest: Proto.Request): void;\n\n\tonData(handler: (data: Proto.Response) => void): void;\n\tonExit(handler: (code: number | null) => void): void;\n\tonError(handler: (error: Error) => void): void;\n\n\tkill(): void;\n}\n\nexport class ProcessBasedTsServer extends Disposable implements ITypeScriptServer {\n\tprivate readonly _requestQueue = new RequestQueue();\n\tprivate readonly _callbacks = new CallbackMap<Proto.Response>();\n\tprivate readonly _pendingResponses = new Set<number>();\n\n\tconstructor(\n\t\tprivate readonly _serverId: string,\n\t\tprivate readonly _serverSource: ServerType,\n\t\tprivate readonly _process: TsServerProcess,\n\t\tprivate readonly _tsServerLogFile: string | undefined,\n\t\tprivate readonly _requestCanceller: OngoingRequestCanceller,\n\t\tprivate readonly _version: TypeScriptVersion,\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _tracer: Tracer,\n\t) {\n\t\tsuper();\n\n\t\tthis._process.onData(msg => {\n\t\t\tthis.dispatchMessage(msg);\n\t\t});\n\n\t\tthis._process.onExit(code => {\n\t\t\tthis._onExit.fire(code);\n\t\t\tthis._callbacks.destroy('server exited');\n\t\t});\n\n\t\tthis._process.onError(error => {\n\t\t\tthis._onError.fire(error);\n\t\t\tthis._callbacks.destroy('server errored');\n\t\t});\n\t}\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLogFile() { return this._tsServerLogFile; }\n\n\tprivate write(serverRequest: Proto.Request) {\n\t\tthis._process.write(serverRequest);\n\t}\n\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tthis._callbacks.destroy('server disposed');\n\t\tthis._pendingResponses.clear();\n\t}\n\n\tpublic kill() {\n\t\tthis._process.kill();\n\t}\n\n\tprivate dispatchMessage(message: Proto.Message) {\n\t\ttry {\n\t\t\tswitch (message.type) {\n\t\t\t\tcase 'response':\n\t\t\t\t\tif (this._serverSource) {\n\t\t\t\t\t\tthis.dispatchResponse({\n\t\t\t\t\t\t\t...(message as Proto.Response),\n\t\t\t\t\t\t\t_serverType: this._serverSource\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dispatchResponse(message as Proto.Response);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'event':\n\t\t\t\t\tconst event = message as Proto.Event;\n\t\t\t\t\tif (event.event === 'requestCompleted') {\n\t\t\t\t\t\tconst seq = (event as Proto.RequestCompletedEvent).body.request_seq;\n\t\t\t\t\t\tconst callback = this._callbacks.fetch(seq);\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tthis._tracer.traceRequestCompleted(this._serverId, 'requestCompleted', seq, callback);\n\t\t\t\t\t\t\tcallback.onSuccess(undefined);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._tracer.traceEvent(this._serverId, event);\n\t\t\t\t\t\tthis._onEvent.fire(event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unknown message type ${message.type} received`);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.sendNextRequests();\n\t\t}\n\t}\n\n\tprivate tryCancelRequest(seq: number, command: string): boolean {\n\t\ttry {\n\t\t\tif (this._requestQueue.tryDeletePendingRequest(seq)) {\n\t\t\t\tthis.logTrace(`Canceled request with sequence number ${seq}`);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (this._requestCanceller.tryCancelOngoingRequest(seq)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.logTrace(`Tried to cancel request with sequence number ${seq}. But request got already delivered.`);\n\t\t\treturn false;\n\t\t} finally {\n\t\t\tconst callback = this.fetchCallback(seq);\n\t\t\tif (callback) {\n\t\t\t\tcallback.onSuccess(new ServerResponse.Cancelled(`Cancelled request ${seq} - ${command}`));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate dispatchResponse(response: Proto.Response) {\n\t\tconst callback = this.fetchCallback(response.request_seq);\n\t\tif (!callback) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tracer.traceResponse(this._serverId, response, callback);\n\t\tif (response.success) {\n\t\t\tcallback.onSuccess(response);\n\t\t} else if (response.message === 'No content available.') {\n\t\t\t// Special case where response itself is successful but there is not any data to return.\n\t\t\tcallback.onSuccess(ServerResponse.NoContent);\n\t\t} else {\n\t\t\tcallback.onError(TypeScriptServerError.create(this._serverId, this._version, response));\n\t\t}\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExectuionTarget }): undefined;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\tconst request = this._requestQueue.createRequest(command, args);\n\t\tconst requestInfo: RequestItem = {\n\t\t\trequest,\n\t\t\texpectsResponse: executeInfo.expectsResult,\n\t\t\tisAsync: executeInfo.isAsync,\n\t\t\tqueueingType: ProcessBasedTsServer.getQueueingType(command, executeInfo.lowPriority)\n\t\t};\n\t\tlet result: Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\t\tif (executeInfo.expectsResult) {\n\t\t\tresult = new Promise<ServerResponse.Response<Proto.Response>>((resolve, reject) => {\n\t\t\t\tthis._callbacks.add(request.seq, { onSuccess: resolve as () => ServerResponse.Response<Proto.Response> | undefined, onError: reject, queuingStartTime: Date.now(), isAsync: executeInfo.isAsync }, executeInfo.isAsync);\n\n\t\t\t\tif (executeInfo.token) {\n\t\t\t\t\texecuteInfo.token.onCancellationRequested(() => {\n\t\t\t\t\t\tthis.tryCancelRequest(request.seq, command);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch((err: Error) => {\n\t\t\t\tif (err instanceof TypeScriptServerError) {\n\t\t\t\t\tif (!executeInfo.token || !executeInfo.token.isCancellationRequested) {\n\t\t\t\t\t\t/* __GDPR__\n\t\t\t\t\t\t\t\"languageServiceErrorResponse\" : {\n\t\t\t\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\t\t\t\t\"${TypeScriptRequestErrorProperties}\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tthis._telemetryReporter.logTelemetry('languageServiceErrorResponse', err.telemetry);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t});\n\t\t}\n\n\t\tthis._requestQueue.enqueue(requestInfo);\n\t\tthis.sendNextRequests();\n\n\t\treturn result;\n\t}\n\n\tprivate sendNextRequests(): void {\n\t\twhile (this._pendingResponses.size === 0 && this._requestQueue.length > 0) {\n\t\t\tconst item = this._requestQueue.dequeue();\n\t\t\tif (item) {\n\t\t\t\tthis.sendRequest(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate sendRequest(requestItem: RequestItem): void {\n\t\tconst serverRequest = requestItem.request;\n\t\tthis._tracer.traceRequest(this._serverId, serverRequest, requestItem.expectsResponse, this._requestQueue.length);\n\n\t\tif (requestItem.expectsResponse && !requestItem.isAsync) {\n\t\t\tthis._pendingResponses.add(requestItem.request.seq);\n\t\t}\n\n\t\ttry {\n\t\t\tthis.write(serverRequest);\n\t\t} catch (err) {\n\t\t\tconst callback = this.fetchCallback(serverRequest.seq);\n\t\t\tif (callback) {\n\t\t\t\tcallback.onError(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate fetchCallback(seq: number) {\n\t\tconst callback = this._callbacks.fetch(seq);\n\t\tif (!callback) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._pendingResponses.delete(seq);\n\t\treturn callback;\n\t}\n\n\tprivate logTrace(message: string) {\n\t\tthis._tracer.logTrace(this._serverId, message);\n\t}\n\n\tprivate static readonly fenceCommands = new Set(['change', 'close', 'open', 'updateOpen']);\n\n\tprivate static getQueueingType(\n\t\tcommand: string,\n\t\tlowPriority?: boolean\n\t): RequestQueueingType {\n\t\tif (ProcessBasedTsServer.fenceCommands.has(command)) {\n\t\t\treturn RequestQueueingType.Fence;\n\t\t}\n\t\treturn lowPriority ? RequestQueueingType.LowPriority : RequestQueueingType.Normal;\n\t}\n}\n\n\ninterface ExecuteInfo {\n\treadonly isAsync: boolean;\n\treadonly token?: vscode.CancellationToken;\n\treadonly expectsResult: boolean;\n\treadonly lowPriority?: boolean;\n\treadonly executionTarget?: ExectuionTarget;\n}\n\nclass RequestRouter {\n\n\tprivate static readonly sharedCommands = new Set<keyof TypeScriptRequests>([\n\t\t'change',\n\t\t'close',\n\t\t'open',\n\t\t'updateOpen',\n\t\t'configure',\n\t]);\n\n\tconstructor(\n\t\tprivate readonly servers: ReadonlyArray<{\n\t\t\treadonly server: ITypeScriptServer;\n\t\t\tcanRun?(command: keyof TypeScriptRequests, executeInfo: ExecuteInfo): void;\n\t\t}>,\n\t\tprivate readonly delegate: TsServerDelegate,\n\t) { }\n\n\tpublic execute(command: keyof TypeScriptRequests, args: any, executeInfo: ExecuteInfo): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\tif (RequestRouter.sharedCommands.has(command) && typeof executeInfo.executionTarget === 'undefined') {\n\t\t\t// Dispatch shared commands to all servers but only return from first one\n\n\t\t\tconst requestStates: RequestState.State[] = this.servers.map(() => RequestState.Unresolved);\n\n\t\t\t// Also make sure we never cancel requests to just one server\n\t\t\tlet token: vscode.CancellationToken | undefined = undefined;\n\t\t\tif (executeInfo.token) {\n\t\t\t\tconst source = new vscode.CancellationTokenSource();\n\t\t\t\texecuteInfo.token.onCancellationRequested(() => {\n\t\t\t\t\tif (requestStates.some(state => state === RequestState.Resolved)) {\n\t\t\t\t\t\t// Don't cancel.\n\t\t\t\t\t\t// One of the servers completed this request so we don't want to leave the other\n\t\t\t\t\t\t// in a different state.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsource.cancel();\n\t\t\t\t});\n\t\t\t\ttoken = source.token;\n\t\t\t}\n\n\t\t\tlet firstRequest: Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\n\t\t\tfor (let serverIndex = 0; serverIndex < this.servers.length; ++serverIndex) {\n\t\t\t\tconst server = this.servers[serverIndex].server;\n\n\t\t\t\tconst request = server.executeImpl(command, args, { ...executeInfo, token });\n\t\t\t\tif (serverIndex === 0) {\n\t\t\t\t\tfirstRequest = request;\n\t\t\t\t}\n\t\t\t\tif (request) {\n\t\t\t\t\trequest\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\trequestStates[serverIndex] = RequestState.Resolved;\n\t\t\t\t\t\t\tconst erroredRequest = requestStates.find(state => state.type === RequestState.Type.Errored) as RequestState.Errored | undefined;\n\t\t\t\t\t\t\tif (erroredRequest) {\n\t\t\t\t\t\t\t\t// We've gone out of sync\n\t\t\t\t\t\t\t\tthis.delegate.onFatalError(command, erroredRequest.err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, err => {\n\t\t\t\t\t\t\trequestStates[serverIndex] = new RequestState.Errored(err);\n\t\t\t\t\t\t\tif (requestStates.some(state => state === RequestState.Resolved)) {\n\t\t\t\t\t\t\t\t// We've gone out of sync\n\t\t\t\t\t\t\t\tthis.delegate.onFatalError(command, err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn firstRequest;\n\t\t}\n\n\t\tfor (const { canRun, server } of this.servers) {\n\t\t\tif (!canRun || canRun(command, executeInfo)) {\n\t\t\t\treturn server.executeImpl(command, args, executeInfo);\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(`Could not find server for command: '${command}'`);\n\t}\n}\n\nexport class GetErrRoutingTsServer extends Disposable implements ITypeScriptServer {\n\n\tprivate static readonly diagnosticEvents = new Set<string>([\n\t\tEventName.configFileDiag,\n\t\tEventName.syntaxDiag,\n\t\tEventName.semanticDiag,\n\t\tEventName.suggestionDiag\n\t]);\n\n\tprivate readonly getErrServer: ITypeScriptServer;\n\tprivate readonly mainServer: ITypeScriptServer;\n\tprivate readonly router: RequestRouter;\n\n\tpublic constructor(\n\t\tservers: { getErr: ITypeScriptServer, primary: ITypeScriptServer },\n\t\tdelegate: TsServerDelegate,\n\t) {\n\t\tsuper();\n\n\t\tthis.getErrServer = servers.getErr;\n\t\tthis.mainServer = servers.primary;\n\n\t\tthis.router = new RequestRouter(\n\t\t\t[\n\t\t\t\t{ server: this.getErrServer, canRun: (command) => ['geterr', 'geterrForProject'].includes(command) },\n\t\t\t\t{ server: this.mainServer, canRun: undefined /* gets all other commands */ }\n\t\t\t],\n\t\t\tdelegate);\n\n\t\tthis._register(this.getErrServer.onEvent(e => {\n\t\t\tif (GetErrRoutingTsServer.diagnosticEvents.has(e.event)) {\n\t\t\t\tthis._onEvent.fire(e);\n\t\t\t}\n\t\t\t// Ignore all other events\n\t\t}));\n\t\tthis._register(this.mainServer.onEvent(e => {\n\t\t\tif (!GetErrRoutingTsServer.diagnosticEvents.has(e.event)) {\n\t\t\t\tthis._onEvent.fire(e);\n\t\t\t}\n\t\t\t// Ignore all other events\n\t\t}));\n\n\t\tthis._register(this.getErrServer.onError(e => this._onError.fire(e)));\n\t\tthis._register(this.mainServer.onError(e => this._onError.fire(e)));\n\n\t\tthis._register(this.mainServer.onExit(e => {\n\t\t\tthis._onExit.fire(e);\n\t\t\tthis.getErrServer.kill();\n\t\t}));\n\t}\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLogFile() { return this.mainServer.tsServerLogFile; }\n\n\tpublic kill(): void {\n\t\tthis.getErrServer.kill();\n\t\tthis.mainServer.kill();\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExectuionTarget }): undefined;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\treturn this.router.execute(command, args, executeInfo);\n\t}\n}\n\n\nexport class SyntaxRoutingTsServer extends Disposable implements ITypeScriptServer {\n\n\t/**\n\t * Commands that should always be run on the syntax server.\n\t */\n\tprivate static readonly syntaxAlwaysCommands = new Set<keyof TypeScriptRequests>([\n\t\t'navtree',\n\t\t'getOutliningSpans',\n\t\t'jsxClosingTag',\n\t\t'selectionRange',\n\t\t'format',\n\t\t'formatonkey',\n\t\t'docCommentTemplate',\n\t]);\n\n\t/**\n\t * Commands that should always be run on the semantic server.\n\t */\n\tprivate static readonly semanticCommands = new Set<keyof TypeScriptRequests>([\n\t\t'geterr',\n\t\t'geterrForProject',\n\t\t'projectInfo',\n\t\t'configurePlugin',\n\t]);\n\n\t/**\n\t * Commands that can be run on the syntax server but would benefit from being upgraded to the semantic server.\n\t */\n\tprivate static readonly syntaxAllowedCommands = new Set<keyof TypeScriptRequests>([\n\t\t'completions',\n\t\t'completionEntryDetails',\n\t\t'completionInfo',\n\t\t'definition',\n\t\t'definitionAndBoundSpan',\n\t\t'documentHighlights',\n\t\t'implementation',\n\t\t'navto',\n\t\t'quickinfo',\n\t\t'references',\n\t\t'rename',\n\t\t'signatureHelp',\n\t]);\n\n\tprivate readonly syntaxServer: ITypeScriptServer;\n\tprivate readonly semanticServer: ITypeScriptServer;\n\tprivate readonly router: RequestRouter;\n\n\tprivate _projectLoading = true;\n\n\tpublic constructor(\n\t\tservers: { syntax: ITypeScriptServer, semantic: ITypeScriptServer },\n\t\tdelegate: TsServerDelegate,\n\t\tenableDynamicRouting: boolean,\n\t) {\n\t\tsuper();\n\n\t\tthis.syntaxServer = servers.syntax;\n\t\tthis.semanticServer = servers.semantic;\n\n\t\tthis.router = new RequestRouter(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tserver: this.syntaxServer,\n\t\t\t\t\tcanRun: (command, execInfo) => {\n\t\t\t\t\t\tswitch (execInfo.executionTarget) {\n\t\t\t\t\t\t\tcase ExectuionTarget.Semantic: return false;\n\t\t\t\t\t\t\tcase ExectuionTarget.Syntax: return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (SyntaxRoutingTsServer.syntaxAlwaysCommands.has(command)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (SyntaxRoutingTsServer.semanticCommands.has(command)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (enableDynamicRouting && this.projectLoading && SyntaxRoutingTsServer.syntaxAllowedCommands.has(command)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tserver: this.semanticServer,\n\t\t\t\t\tcanRun: undefined /* gets all other commands */\n\t\t\t\t}\n\t\t\t],\n\t\t\tdelegate);\n\n\t\tthis._register(this.syntaxServer.onEvent(e => {\n\t\t\treturn this._onEvent.fire(e);\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onEvent(e => {\n\t\t\tswitch (e.event) {\n\t\t\t\tcase EventName.projectLoadingStart:\n\t\t\t\t\tthis._projectLoading = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EventName.projectLoadingFinish:\n\t\t\t\tcase EventName.semanticDiag:\n\t\t\t\tcase EventName.syntaxDiag:\n\t\t\t\tcase EventName.suggestionDiag:\n\t\t\t\tcase EventName.configFileDiag:\n\t\t\t\t\tthis._projectLoading = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this._onEvent.fire(e);\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onExit(e => {\n\t\t\tthis._onExit.fire(e);\n\t\t\tthis.syntaxServer.kill();\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onError(e => this._onError.fire(e)));\n\t}\n\n\tprivate get projectLoading() { return this._projectLoading; }\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLogFile() { return this.semanticServer.tsServerLogFile; }\n\n\tpublic kill(): void {\n\t\tthis.syntaxServer.kill();\n\t\tthis.semanticServer.kill();\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExectuionTarget }): undefined;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExectuionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\treturn this.router.execute(command, args, executeInfo);\n\t}\n}\n\nnamespace RequestState {\n\texport const enum Type { Unresolved, Resolved, Errored }\n\n\texport const Unresolved = { type: Type.Unresolved } as const;\n\n\texport const Resolved = { type: Type.Resolved } as const;\n\n\texport class Errored {\n\t\treadonly type = Type.Errored;\n\n\t\tconstructor(\n\t\t\tpublic readonly err: Error\n\t\t) { }\n\t}\n\n\texport type State = typeof Unresolved | typeof Resolved | Errored;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from '../protocol';\nimport { TypeScriptVersion } from './versionProvider';\n\n\nexport class TypeScriptServerError extends Error {\n\tpublic static create(\n\t\tserverId: string,\n\t\tversion: TypeScriptVersion,\n\t\tresponse: Proto.Response\n\t): TypeScriptServerError {\n\t\tconst parsedResult = TypeScriptServerError.parseErrorText(response);\n\t\treturn new TypeScriptServerError(serverId, version, response, parsedResult?.message, parsedResult?.stack, parsedResult?.sanitizedStack);\n\t}\n\n\tprivate constructor(\n\t\tpublic readonly serverId: string,\n\t\tpublic readonly version: TypeScriptVersion,\n\t\tprivate readonly response: Proto.Response,\n\t\tpublic readonly serverMessage: string | undefined,\n\t\tpublic readonly serverStack: string | undefined,\n\t\tprivate readonly sanitizedStack: string | undefined\n\t) {\n\t\tsuper(`<${serverId}> TypeScript Server Error (${version.displayName})\\n${serverMessage}\\n${serverStack}`);\n\t}\n\n\tpublic get serverErrorText() { return this.response.message; }\n\n\tpublic get serverCommand() { return this.response.command; }\n\n\tpublic get telemetry() {\n\t\t// The \"sanitizedstack\" has been purged of error messages, paths, and file names (other than tsserver)\n\t\t// and, thus, can be classified as SystemMetaData, rather than CallstackOrException.\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptRequestErrorProperties\" : {\n\t\t\t\t\"command\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"serverid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"sanitizedstack\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\t\t\t}\n\t\t*/\n\t\treturn {\n\t\t\tcommand: this.serverCommand,\n\t\t\tserverid: this.serverId,\n\t\t\tsanitizedstack: this.sanitizedStack || '',\n\t\t} as const;\n\t}\n\n\t/**\n\t * Given a `errorText` from a tsserver request indicating failure in handling a request,\n\t * prepares a payload for telemetry-logging.\n\t */\n\tprivate static parseErrorText(response: Proto.Response) {\n\t\tconst errorText = response.message;\n\t\tif (errorText) {\n\t\t\tconst errorPrefix = 'Error processing request. ';\n\t\t\tif (errorText.startsWith(errorPrefix)) {\n\t\t\t\tconst prefixFreeErrorText = errorText.substr(errorPrefix.length);\n\t\t\t\tconst newlineIndex = prefixFreeErrorText.indexOf('\\n');\n\t\t\t\tif (newlineIndex >= 0) {\n\t\t\t\t\t// Newline expected between message and stack.\n\t\t\t\t\tconst stack = prefixFreeErrorText.substring(newlineIndex + 1);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessage: prefixFreeErrorText.substring(0, newlineIndex),\n\t\t\t\t\t\tstack,\n\t\t\t\t\t\tsanitizedStack: TypeScriptServerError.sanitizeStack(stack)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Drop everything but \".js\" and line/column numbers (though retain \"tsserver\" if that's the filename).\n\t */\n\tprivate static sanitizeStack(message: string | undefined) {\n\t\tif (!message) {\n\t\t\treturn '';\n\t\t}\n\t\tconst regex = /(\\btsserver)?(\\.(?:ts|tsx|js|jsx)(?::\\d+(?::\\d+)?)?)\\)?$/igm;\n\t\tlet serverStack = '';\n\t\twhile (true) {\n\t\t\tconst match = regex.exec(message);\n\t\t\tif (!match) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// [1] is 'tsserver' or undefined\n\t\t\t// [2] is '.js:{line_number}:{column_number}'\n\t\t\tserverStack += `${match[1] || 'suppressed'}${match[2]}\\n`;\n\t\t}\n\t\treturn serverStack;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport * as typeConverters from './typeConverters';\n\nexport function getEditForCodeAction(\n\tclient: ITypeScriptServiceClient,\n\taction: Proto.CodeAction\n): vscode.WorkspaceEdit | undefined {\n\treturn action.changes && action.changes.length\n\t\t? typeConverters.WorkspaceEdit.fromFileCodeEdits(client, action.changes)\n\t\t: undefined;\n}\n\nexport async function applyCodeAction(\n\tclient: ITypeScriptServiceClient,\n\taction: Proto.CodeAction,\n\ttoken: vscode.CancellationToken\n): Promise<boolean> {\n\tconst workspaceEdit = getEditForCodeAction(client, action);\n\tif (workspaceEdit) {\n\t\tif (!(await vscode.workspace.applyEdit(workspaceEdit))) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn applyCodeActionCommands(client, action.commands, token);\n}\n\nexport async function applyCodeActionCommands(\n\tclient: ITypeScriptServiceClient,\n\tcommands: ReadonlyArray<{}> | undefined,\n\ttoken: vscode.CancellationToken,\n): Promise<boolean> {\n\tif (commands && commands.length) {\n\t\tfor (const command of commands) {\n\t\t\tawait client.execute('applyCodeActionCommand', { command }, token);\n\t\t}\n\t}\n\treturn true;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const variableDeclaredButNeverUsed = new Set([6196, 6133]);\nexport const propertyDeclaretedButNeverUsed = new Set([6138]);\nexport const allImportsAreUnused = new Set([6192]);\nexport const unreachableCode = new Set([7027]);\nexport const unusedLabel = new Set([7028]);\nexport const fallThroughCaseInSwitch = new Set([7029]);\nexport const notAllCodePathsReturnAValue = new Set([7030]);\nexport const incorrectlyImplementsInterface = new Set([2420]);\nexport const cannotFindName = new Set([2552, 2304]);\nexport const extendsShouldBeImplements = new Set([2689]);\nexport const asyncOnlyAllowedInAsyncFunctions = new Set([1308]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const annotateWithTypeFromJSDoc = 'annotateWithTypeFromJSDoc';\nexport const constructorForDerivedNeedSuperCall = 'constructorForDerivedNeedSuperCall';\nexport const extendsInterfaceBecomesImplements = 'extendsInterfaceBecomesImplements';\nexport const awaitInSyncFunction = 'fixAwaitInSyncFunction';\nexport const classIncorrectlyImplementsInterface = 'fixClassIncorrectlyImplementsInterface';\nexport const classDoesntImplementInheritedAbstractMember = 'fixClassDoesntImplementInheritedAbstractMember';\nexport const unreachableCode = 'fixUnreachableCode';\nexport const unusedIdentifier = 'unusedIdentifier';\nexport const forgottenThisPropertyAccess = 'forgottenThisPropertyAccess';\nexport const spelling = 'spelling';\nexport const fixImport = 'import';\nexport const addMissingAwait = 'addMissingAwait';\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ITask<T> {\n\t(): T;\n}\n\nexport class Delayer<T> {\n\n\tpublic defaultDelay: number;\n\tprivate timeout: any; // Timer\n\tprivate completionPromise: Promise<T | null> | null;\n\tprivate onSuccess: ((value: T | PromiseLike<T> | undefined) => void) | null;\n\tprivate task: ITask<T> | null;\n\n\tconstructor(defaultDelay: number) {\n\t\tthis.defaultDelay = defaultDelay;\n\t\tthis.timeout = null;\n\t\tthis.completionPromise = null;\n\t\tthis.onSuccess = null;\n\t\tthis.task = null;\n\t}\n\n\tpublic trigger(task: ITask<T>, delay: number = this.defaultDelay): Promise<T | null> {\n\t\tthis.task = task;\n\t\tif (delay >= 0) {\n\t\t\tthis.cancelTimeout();\n\t\t}\n\n\t\tif (!this.completionPromise) {\n\t\t\tthis.completionPromise = new Promise<T | undefined>((resolve) => {\n\t\t\t\tthis.onSuccess = resolve;\n\t\t\t}).then(() => {\n\t\t\t\tthis.completionPromise = null;\n\t\t\t\tthis.onSuccess = null;\n\t\t\t\tconst result = this.task && this.task();\n\t\t\t\tthis.task = null;\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\tif (delay >= 0 || this.timeout === null) {\n\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\tthis.timeout = null;\n\t\t\t\tif (this.onSuccess) {\n\t\t\t\t\tthis.onSuccess(undefined);\n\t\t\t\t}\n\t\t\t}, delay >= 0 ? delay : this.defaultDelay);\n\t\t}\n\n\t\treturn this.completionPromise;\n\t}\n\n\tprivate cancelTimeout(): void {\n\t\tif (this.timeout !== null) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as os from 'os';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport * as objects from '../utils/objects';\n\nexport enum TsServerLogLevel {\n\tOff,\n\tNormal,\n\tTerse,\n\tVerbose,\n}\n\nexport namespace TsServerLogLevel {\n\texport function fromString(value: string): TsServerLogLevel {\n\t\tswitch (value && value.toLowerCase()) {\n\t\t\tcase 'normal':\n\t\t\t\treturn TsServerLogLevel.Normal;\n\t\t\tcase 'terse':\n\t\t\t\treturn TsServerLogLevel.Terse;\n\t\t\tcase 'verbose':\n\t\t\t\treturn TsServerLogLevel.Verbose;\n\t\t\tcase 'off':\n\t\t\tdefault:\n\t\t\t\treturn TsServerLogLevel.Off;\n\t\t}\n\t}\n\n\texport function toString(value: TsServerLogLevel): string {\n\t\tswitch (value) {\n\t\t\tcase TsServerLogLevel.Normal:\n\t\t\t\treturn 'normal';\n\t\t\tcase TsServerLogLevel.Terse:\n\t\t\t\treturn 'terse';\n\t\t\tcase TsServerLogLevel.Verbose:\n\t\t\t\treturn 'verbose';\n\t\t\tcase TsServerLogLevel.Off:\n\t\t\tdefault:\n\t\t\t\treturn 'off';\n\t\t}\n\t}\n}\n\nexport const enum SeparateSyntaxServerConfiguration {\n\tDisabled,\n\tEnabled,\n}\n\nexport class ImplicitProjectConfiguration {\n\n\tpublic readonly checkJs: boolean;\n\tpublic readonly experimentalDecorators: boolean;\n\tpublic readonly strictNullChecks: boolean;\n\tpublic readonly strictFunctionTypes: boolean;\n\n\tconstructor(configuration: vscode.WorkspaceConfiguration) {\n\t\tthis.checkJs = ImplicitProjectConfiguration.readCheckJs(configuration);\n\t\tthis.experimentalDecorators = ImplicitProjectConfiguration.readExperimentalDecorators(configuration);\n\t\tthis.strictNullChecks = ImplicitProjectConfiguration.readImplicitStrictNullChecks(configuration);\n\t\tthis.strictFunctionTypes = ImplicitProjectConfiguration.readImplicitStrictFunctionTypes(configuration);\n\t}\n\n\tpublic isEqualTo(other: ImplicitProjectConfiguration): boolean {\n\t\treturn objects.equals(this, other);\n\t}\n\n\tprivate static readCheckJs(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.checkJs')\n\t\t\t?? configuration.get<boolean>('javascript.implicitProjectConfig.checkJs', false);\n\t}\n\n\tprivate static readExperimentalDecorators(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.experimentalDecorators')\n\t\t\t?? configuration.get<boolean>('javascript.implicitProjectConfig.experimentalDecorators', false);\n\t}\n\n\tprivate static readImplicitStrictNullChecks(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strictNullChecks', false);\n\t}\n\n\tprivate static readImplicitStrictFunctionTypes(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strictFunctionTypes', true);\n\t}\n}\n\nexport class TypeScriptServiceConfiguration {\n\tpublic readonly locale: string | null;\n\tpublic readonly globalTsdk: string | null;\n\tpublic readonly localTsdk: string | null;\n\tpublic readonly npmLocation: string | null;\n\tpublic readonly tsServerLogLevel: TsServerLogLevel = TsServerLogLevel.Off;\n\tpublic readonly tsServerPluginPaths: readonly string[];\n\tpublic readonly implictProjectConfiguration: ImplicitProjectConfiguration;\n\tpublic readonly disableAutomaticTypeAcquisition: boolean;\n\tpublic readonly separateSyntaxServer: SeparateSyntaxServerConfiguration;\n\tpublic readonly enableProjectDiagnostics: boolean;\n\tpublic readonly maxTsServerMemory: number;\n\tpublic readonly enablePromptUseWorkspaceTsdk: boolean;\n\tpublic readonly watchOptions: protocol.WatchOptions | undefined;\n\tpublic readonly includePackageJsonAutoImports: 'auto' | 'on' | 'off' | undefined;\n\tpublic readonly enableTsServerTracing: boolean;\n\n\tpublic static loadFromWorkspace(): TypeScriptServiceConfiguration {\n\t\treturn new TypeScriptServiceConfiguration();\n\t}\n\n\tprivate constructor() {\n\t\tconst configuration = vscode.workspace.getConfiguration();\n\n\t\tthis.locale = TypeScriptServiceConfiguration.extractLocale(configuration);\n\t\tthis.globalTsdk = TypeScriptServiceConfiguration.extractGlobalTsdk(configuration);\n\t\tthis.localTsdk = TypeScriptServiceConfiguration.extractLocalTsdk(configuration);\n\t\tthis.npmLocation = TypeScriptServiceConfiguration.readNpmLocation(configuration);\n\t\tthis.tsServerLogLevel = TypeScriptServiceConfiguration.readTsServerLogLevel(configuration);\n\t\tthis.tsServerPluginPaths = TypeScriptServiceConfiguration.readTsServerPluginPaths(configuration);\n\t\tthis.implictProjectConfiguration = new ImplicitProjectConfiguration(configuration);\n\t\tthis.disableAutomaticTypeAcquisition = TypeScriptServiceConfiguration.readDisableAutomaticTypeAcquisition(configuration);\n\t\tthis.separateSyntaxServer = TypeScriptServiceConfiguration.readUseSeparateSyntaxServer(configuration);\n\t\tthis.enableProjectDiagnostics = TypeScriptServiceConfiguration.readEnableProjectDiagnostics(configuration);\n\t\tthis.maxTsServerMemory = TypeScriptServiceConfiguration.readMaxTsServerMemory(configuration);\n\t\tthis.enablePromptUseWorkspaceTsdk = TypeScriptServiceConfiguration.readEnablePromptUseWorkspaceTsdk(configuration);\n\t\tthis.watchOptions = TypeScriptServiceConfiguration.readWatchOptions(configuration);\n\t\tthis.includePackageJsonAutoImports = TypeScriptServiceConfiguration.readIncludePackageJsonAutoImports(configuration);\n\t\tthis.enableTsServerTracing = TypeScriptServiceConfiguration.readEnableTsServerTracing(configuration);\n\t}\n\n\tpublic isEqualTo(other: TypeScriptServiceConfiguration): boolean {\n\t\treturn objects.equals(this, other);\n\t}\n\n\tprivate static fixPathPrefixes(inspectValue: string): string {\n\t\tconst pathPrefixes = ['~' + path.sep];\n\t\tfor (const pathPrefix of pathPrefixes) {\n\t\t\tif (inspectValue.startsWith(pathPrefix)) {\n\t\t\t\treturn path.join(os.homedir(), inspectValue.slice(pathPrefix.length));\n\t\t\t}\n\t\t}\n\t\treturn inspectValue;\n\t}\n\n\tprivate static extractGlobalTsdk(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\tconst inspect = configuration.inspect('typescript.tsdk');\n\t\tif (inspect && typeof inspect.globalValue === 'string') {\n\t\t\treturn this.fixPathPrefixes(inspect.globalValue);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate static extractLocalTsdk(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\tconst inspect = configuration.inspect('typescript.tsdk');\n\t\tif (inspect && typeof inspect.workspaceValue === 'string') {\n\t\t\treturn this.fixPathPrefixes(inspect.workspaceValue);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate static readTsServerLogLevel(configuration: vscode.WorkspaceConfiguration): TsServerLogLevel {\n\t\tconst setting = configuration.get<string>('typescript.tsserver.log', 'off');\n\t\treturn TsServerLogLevel.fromString(setting);\n\t}\n\n\tprivate static readTsServerPluginPaths(configuration: vscode.WorkspaceConfiguration): string[] {\n\t\treturn configuration.get<string[]>('typescript.tsserver.pluginPaths', []);\n\t}\n\n\tprivate static readNpmLocation(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn configuration.get<string | null>('typescript.npm', null);\n\t}\n\n\tprivate static readDisableAutomaticTypeAcquisition(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.disableAutomaticTypeAcquisition', false);\n\t}\n\n\tprivate static extractLocale(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn configuration.get<string | null>('typescript.locale', null);\n\t}\n\n\tprivate static readUseSeparateSyntaxServer(configuration: vscode.WorkspaceConfiguration): SeparateSyntaxServerConfiguration {\n\t\tconst value = configuration.get('typescript.tsserver.useSeparateSyntaxServer', true);\n\t\tif (value === true) {\n\t\t\treturn SeparateSyntaxServerConfiguration.Enabled;\n\t\t}\n\t\treturn SeparateSyntaxServerConfiguration.Disabled;\n\t}\n\n\tprivate static readEnableProjectDiagnostics(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.experimental.enableProjectDiagnostics', false);\n\t}\n\n\tprivate static readWatchOptions(configuration: vscode.WorkspaceConfiguration): protocol.WatchOptions | undefined {\n\t\treturn configuration.get<protocol.WatchOptions>('typescript.tsserver.watchOptions');\n\t}\n\n\tprivate static readIncludePackageJsonAutoImports(configuration: vscode.WorkspaceConfiguration): 'auto' | 'on' | 'off' | undefined {\n\t\treturn configuration.get<'auto' | 'on' | 'off'>('typescript.preferences.includePackageJsonAutoImports');\n\t}\n\n\tprivate static readMaxTsServerMemory(configuration: vscode.WorkspaceConfiguration): number {\n\t\tconst defaultMaxMemory = 3072;\n\t\tconst minimumMaxMemory = 128;\n\t\tconst memoryInMB = configuration.get<number>('typescript.tsserver.maxTsServerMemory', defaultMaxMemory);\n\t\tif (!Number.isSafeInteger(memoryInMB)) {\n\t\t\treturn defaultMaxMemory;\n\t\t}\n\t\treturn Math.max(memoryInMB, minimumMaxMemory);\n\t}\n\n\tprivate static readEnablePromptUseWorkspaceTsdk(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.enablePromptUseWorkspaceTsdk', false);\n\t}\n\n\tprivate static readEnableTsServerTracing(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.enableTracing', false);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport function isWeb(): boolean {\n\t// @ts-expect-error\n\treturn typeof navigator !== 'undefined' && vscode.env.uiKind === vscode.UIKind.Web;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as path from 'path';\nimport * as vscode from 'vscode';\n\nexport class RelativeWorkspacePathResolver {\n\tpublic static asAbsoluteWorkspacePath(relativePath: string): string | undefined {\n\t\tfor (const root of vscode.workspace.workspaceFolders || []) {\n\t\t\tconst rootPrefixes = [`./${root.name}/`, `${root.name}/`, `.\\\\${root.name}\\\\`, `${root.name}\\\\`];\n\t\t\tfor (const rootPrefix of rootPrefixes) {\n\t\t\t\tif (relativePath.startsWith(rootPrefix)) {\n\t\t\t\t\treturn path.join(root.uri.fsPath, relativePath.replace(rootPrefix, ''));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","module.exports = require(\"module\");","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AvailabilityData = require(\"./AvailabilityData\");\r\nexports.Base = require(\"./Base\");\r\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\r\nexports.Data = require(\"./Data\");\r\nexports.DataPoint = require(\"./DataPoint\");\r\nexports.DataPointType = require(\"./DataPointType\");\r\nexports.Domain = require(\"./Domain\");\r\nexports.Envelope = require(\"./Envelope\");\r\nexports.EventData = require(\"./EventData\");\r\nexports.ExceptionData = require(\"./ExceptionData\");\r\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\r\nexports.MessageData = require(\"./MessageData\");\r\nexports.MetricData = require(\"./MetricData\");\r\nexports.PageViewData = require(\"./PageViewData\");\r\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\r\nexports.RequestData = require(\"./RequestData\");\r\nexports.SeverityLevel = require(\"./SeverityLevel\");\r\nexports.StackFrame = require(\"./StackFrame\");\r\n//# sourceMappingURL=index.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Data struct to contain only C section with custom fields.\r\n */\r\nvar Base = (function () {\r\n    function Base() {\r\n    }\r\n    return Base;\r\n}());\r\nmodule.exports = Base;\r\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Type of the metric data measurement.\r\n */\r\nvar DataPointType;\r\n(function (DataPointType) {\r\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\r\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\r\n})(DataPointType || (DataPointType = {}));\r\nmodule.exports = DataPointType;\r\n//# sourceMappingURL=DataPointType.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\r\n */\r\nvar EventData = (function (_super) {\r\n    __extends(EventData, _super);\r\n    function EventData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return EventData;\r\n}(Domain));\r\nmodule.exports = EventData;\r\n//# sourceMappingURL=EventData.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar AutoCollectPerformance = (function () {\r\n    function AutoCollectPerformance(client) {\r\n        if (!!AutoCollectPerformance.INSTANCE) {\r\n            throw new Error(\"Performance tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectPerformance.INSTANCE = this;\r\n        this._isInitialized = false;\r\n        this._client = client;\r\n    }\r\n    AutoCollectPerformance.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        this._isEnabled = isEnabled;\r\n        if (this._isEnabled && !this._isInitialized) {\r\n            this._isInitialized = true;\r\n        }\r\n        if (isEnabled) {\r\n            if (!this._handle) {\r\n                this._lastCpus = os.cpus();\r\n                this._lastRequests = {\r\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n                    time: +new Date\r\n                };\r\n                if (typeof process.cpuUsage === 'function') {\r\n                    this._lastAppCpuUsage = process.cpuUsage();\r\n                }\r\n                this._lastHrtime = process.hrtime();\r\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, 60000);\r\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\r\n            }\r\n        }\r\n        else {\r\n            if (this._handle) {\r\n                clearInterval(this._handle);\r\n                this._handle = undefined;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectPerformance.countRequest = function (request, response) {\r\n        var _this = this;\r\n        if (!AutoCollectPerformance.isEnabled()) {\r\n            return;\r\n        }\r\n        var start = +new Date;\r\n        if (!request || !response) {\r\n            Logging.warn(\"AutoCollectPerformance.countRequest was called with invalid parameters: \", !!request, !!response);\r\n            return;\r\n        }\r\n        // response listeners\r\n        if (typeof response.once === \"function\") {\r\n            response.once(\"finish\", function () {\r\n                var end = +new Date;\r\n                _this._lastRequestExecutionTime = end - start;\r\n                AutoCollectPerformance._totalRequestCount++;\r\n                if (response.statusCode >= 400) {\r\n                    AutoCollectPerformance._totalFailedRequestCount++;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    AutoCollectPerformance.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectPerformance.isEnabled = function () {\r\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\r\n    };\r\n    AutoCollectPerformance.prototype.trackPerformance = function () {\r\n        this._trackCpu();\r\n        this._trackMemory();\r\n        this._trackNetwork();\r\n    };\r\n    AutoCollectPerformance.prototype._trackCpu = function () {\r\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\r\n        // to find the delta since the last measurement\r\n        var cpus = os.cpus();\r\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\r\n            var totalUser = 0;\r\n            var totalSys = 0;\r\n            var totalNice = 0;\r\n            var totalIdle = 0;\r\n            var totalIrq = 0;\r\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\r\n                var cpu = cpus[i];\r\n                var lastCpu = this._lastCpus[i];\r\n                var name = \"% cpu(\" + i + \") \";\r\n                var model = cpu.model;\r\n                var speed = cpu.speed;\r\n                var times = cpu.times;\r\n                var lastTimes = lastCpu.times;\r\n                // user cpu time (or) % CPU time spent in user space\r\n                var user = (times.user - lastTimes.user) || 0;\r\n                totalUser += user;\r\n                // system cpu time (or) % CPU time spent in kernel space\r\n                var sys = (times.sys - lastTimes.sys) || 0;\r\n                totalSys += sys;\r\n                // user nice cpu time (or) % CPU time spent on low priority processes\r\n                var nice = (times.nice - lastTimes.nice) || 0;\r\n                totalNice += nice;\r\n                // idle cpu time (or) % CPU time spent idle\r\n                var idle = (times.idle - lastTimes.idle) || 0;\r\n                totalIdle += idle;\r\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\r\n                var irq = (times.irq - lastTimes.irq) || 0;\r\n                totalIrq += irq;\r\n            }\r\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\r\n            var appCpuPercent = undefined;\r\n            if (typeof process.cpuUsage === 'function') {\r\n                var appCpuUsage = process.cpuUsage();\r\n                var hrtime = process.hrtime();\r\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\r\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\r\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\r\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\r\n                }\r\n                // Set previous\r\n                this._lastAppCpuUsage = appCpuUsage;\r\n                this._lastHrtime = hrtime;\r\n            }\r\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\r\n            this._client.trackMetric({ name: \"\\\\Processor(_Total)\\\\% Processor Time\", value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\r\n            this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\", value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\r\n        }\r\n        this._lastCpus = cpus;\r\n    };\r\n    AutoCollectPerformance.prototype._trackMemory = function () {\r\n        var freeMem = os.freemem();\r\n        var usedMem = process.memoryUsage().rss;\r\n        this._client.trackMetric({ name: \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\", value: usedMem });\r\n        this._client.trackMetric({ name: \"\\\\Memory\\\\Available Bytes\", value: freeMem });\r\n    };\r\n    AutoCollectPerformance.prototype._trackNetwork = function () {\r\n        // track total request counters\r\n        var lastRequests = this._lastRequests;\r\n        var requests = {\r\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\r\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\r\n            time: +new Date\r\n        };\r\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\r\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\r\n        var elapsedMs = requests.time - lastRequests.time;\r\n        var elapsedSeconds = elapsedMs / 1000;\r\n        if (elapsedMs > 0) {\r\n            var requestsPerSec = intervalRequests / elapsedSeconds;\r\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\r\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\", value: requestsPerSec });\r\n            this._client.trackMetric({ name: \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\", value: AutoCollectPerformance._lastRequestExecutionTime });\r\n        }\r\n        this._lastRequests = requests;\r\n    };\r\n    AutoCollectPerformance.prototype.dispose = function () {\r\n        AutoCollectPerformance.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectPerformance._totalRequestCount = 0;\r\n    AutoCollectPerformance._totalFailedRequestCount = 0;\r\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\r\n    return AutoCollectPerformance;\r\n}());\r\nmodule.exports = AutoCollectPerformance;\r\n//# sourceMappingURL=Performance.js.map","\"use strict\";\r\n/**\r\n * Base class for helpers that read data from HTTP requst/response objects and convert them\r\n * into the telemetry contract objects.\r\n */\r\nvar RequestParser = (function () {\r\n    function RequestParser() {\r\n    }\r\n    /**\r\n     * Gets a url parsed out from request options\r\n     */\r\n    RequestParser.prototype.getUrl = function () {\r\n        return this.url;\r\n    };\r\n    RequestParser.prototype.RequestParser = function () {\r\n        this.startTime = +new Date();\r\n    };\r\n    RequestParser.prototype._setStatus = function (status, error) {\r\n        var endTime = +new Date();\r\n        this.duration = endTime - this.startTime;\r\n        this.statusCode = status;\r\n        var properties = this.properties || {};\r\n        if (error) {\r\n            if (typeof error === \"string\") {\r\n                properties[\"error\"] = error;\r\n            }\r\n            else if (error instanceof Error) {\r\n                properties[\"error\"] = error.message;\r\n            }\r\n            else if (typeof error === \"object\") {\r\n                for (var key in error) {\r\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\r\n                }\r\n            }\r\n        }\r\n        this.properties = properties;\r\n    };\r\n    RequestParser.prototype._isSuccess = function () {\r\n        return (0 < this.statusCode) && (this.statusCode < 400);\r\n    };\r\n    return RequestParser;\r\n}());\r\nmodule.exports = RequestParser;\r\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\r\nvar http = require(\"http\");\r\nvar https = require(\"https\");\r\nvar Logging = require(\"../Library/Logging\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar HttpRequestParser = require(\"./HttpRequestParser\");\r\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\r\nvar AutoCollectPerformance = require(\"./Performance\");\r\nvar AutoCollectHttpRequests = (function () {\r\n    function AutoCollectHttpRequests(client) {\r\n        if (!!AutoCollectHttpRequests.INSTANCE) {\r\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectHttpRequests.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\r\n        this._isEnabled = isEnabled;\r\n        // Autocorrelation requires automatic monitoring of incoming server requests\r\n        // Disabling autocollection but enabling autocorrelation will still enable\r\n        // request monitoring but will not produce request events\r\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\r\n            this.useAutoCorrelation(this._isAutoCorrelating);\r\n            this._initialize();\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled) {\r\n        if (isEnabled && !this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.enable();\r\n        }\r\n        else if (!isEnabled && this._isAutoCorrelating) {\r\n            CorrelationContextManager_1.CorrelationContextManager.disable();\r\n        }\r\n        this._isAutoCorrelating = isEnabled;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\r\n        return this._isAutoCorrelating;\r\n    };\r\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\r\n        if (!this._isAutoCorrelating) {\r\n            return;\r\n        }\r\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader());\r\n    };\r\n    AutoCollectHttpRequests.prototype._initialize = function () {\r\n        var _this = this;\r\n        this._isInitialized = true;\r\n        var wrapOnRequestHandler = function (onRequest) {\r\n            if (!onRequest) {\r\n                return undefined;\r\n            }\r\n            if (typeof onRequest !== 'function') {\r\n                throw new Error('onRequest handler must be a function');\r\n            }\r\n            return function (request, response) {\r\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\r\n                if (request && shouldCollect) {\r\n                    // Set up correlation context\r\n                    var requestParser_1 = new HttpRequestParser(request);\r\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\r\n                    // Note: Check for if correlation is enabled happens within this method.\r\n                    // If not enabled, function will directly call the callback.\r\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\r\n                        if (_this._isEnabled) {\r\n                            // Mark as auto collected\r\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\r\n                            // Auto collect request\r\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\r\n                        }\r\n                        // Add this request to the performance counter\r\n                        // Note: Check for if perf counters are enabled happens within this method.\r\n                        // TODO: Refactor common bits between trackRequest and countRequest so they can\r\n                        // be used together, even when perf counters are on, and request tracking is off\r\n                        AutoCollectPerformance.countRequest(request, response);\r\n                        if (typeof onRequest === \"function\") {\r\n                            onRequest(request, response);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    if (typeof onRequest === \"function\") {\r\n                        onRequest(request, response);\r\n                    }\r\n                }\r\n            };\r\n        };\r\n        // The `http.createServer` function will instantiate a new http.Server object.\r\n        // Inside the Server's constructor, it is using addListener to register the\r\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\r\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\r\n        //    the http.createServer call. Or\r\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\r\n        //    fresh server instance. This seems more stable for possible future changes as\r\n        //    it also covers the case where the Server might not use addListener to manage\r\n        //    the callback internally.\r\n        //    And also as long as the constructor uses addListener to add the handle, it is\r\n        //    ok to patch the addListener after construction only. Because if we would patch\r\n        //    the prototype one and the createServer method, we would wrap the handler twice\r\n        //    in case of the constructor call.\r\n        var wrapServerEventHandler = function (server) {\r\n            var originalAddListener = server.addListener.bind(server);\r\n            server.addListener = function (eventType, eventHandler) {\r\n                switch (eventType) {\r\n                    case 'request':\r\n                    case 'checkContinue':\r\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\r\n                    default:\r\n                        return originalAddListener(eventType, eventHandler);\r\n                }\r\n            };\r\n            // on is an alias to addListener only\r\n            server.on = server.addListener;\r\n        };\r\n        var originalHttpServer = http.createServer;\r\n        http.createServer = function (onRequest) {\r\n            // todo: get a pointer to the server so the IP address can be read from server.address\r\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n        var originalHttpsServer = https.createServer;\r\n        https.createServer = function (options, onRequest) {\r\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\r\n            wrapServerEventHandler(server);\r\n            return server;\r\n        };\r\n    };\r\n    /**\r\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\r\n     */\r\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\r\n        // Overwrite correlation context with request parser results\r\n        if (correlationContext) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\r\n    };\r\n    /**\r\n     * Tracks a request by listening to the response 'finish' event\r\n     */\r\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\r\n        if (!telemetry.request || !telemetry.response || !client) {\r\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\r\n            return;\r\n        }\r\n        // store data about the request\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\r\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\r\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\r\n        }\r\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\r\n        if (correlationContext && !_requestParser) {\r\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\r\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\r\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\r\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\r\n        }\r\n        // response listeners\r\n        if (telemetry.response.once) {\r\n            telemetry.response.once(\"finish\", function () {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\r\n            });\r\n        }\r\n        // track a failed request if an error is emitted\r\n        if (telemetry.request.on) {\r\n            telemetry.request.on(\"error\", function (error) {\r\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Add the target correlationId to the response headers, if not already provided.\r\n     */\r\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\r\n        if (client.config && client.config.correlationId &&\r\n            response.getHeader && response.setHeader && !response.headersSent) {\r\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\r\n            if (correlationHeader) {\r\n                var components = correlationHeader.split(\",\");\r\n                var key_1 = RequestResponseHeaders.requestContextSourceKey + \"=\";\r\n                if (!components.some(function (value) { return value.substring(0, key_1.length) === key_1; })) {\r\n                    response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n                }\r\n            }\r\n            else {\r\n                response.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\r\n            }\r\n        }\r\n    };\r\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\r\n        if (error) {\r\n            requestParser.onError(error, ellapsedMilliseconds);\r\n        }\r\n        else {\r\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\r\n        }\r\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\r\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\r\n        if (telemetry.tagOverrides) {\r\n            for (var key in telemetry.tagOverrides) {\r\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\r\n            }\r\n        }\r\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\r\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\r\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\r\n        client.trackRequest(requestTelemetry);\r\n    };\r\n    AutoCollectHttpRequests.prototype.dispose = function () {\r\n        AutoCollectHttpRequests.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\r\n    return AutoCollectHttpRequests;\r\n}());\r\nmodule.exports = AutoCollectHttpRequests;\r\n//# sourceMappingURL=HttpRequests.js.map","module.exports = require(\"child_process\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var len = text.length;\n    var pos = 0, value = '', tokenOffset = 0, token = 16 /* Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                var ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var safeLength = len - 1; // For lookahead.\n                    var commentClosed = false;\n                    while (pos < safeLength) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenStartLine: function () { return lineStartOffset; },\n        getTokenStartCharacter: function () { return tokenOffset - prevTokenLineStartOffset; },\n        getTokenError: function () { return scanError; },\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nexport function format(documentText, range, options) {\n    var initialIndentLevel;\n    var formatText;\n    var formatTextStart;\n    var rangeStart;\n    var rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        var endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    var eol = getEOL(options, documentText);\n    var lineBreak = false;\n    var indentLevel = 0;\n    var indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    var scanner = createScanner(formatText, false);\n    var hasError = false;\n    function newLineAndIndent() {\n        return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n    }\n    function scanNext() {\n        var token = scanner.scan();\n        lineBreak = false;\n        while (token === 15 /* Trivia */ || token === 14 /* LineBreakTrivia */) {\n            lineBreak = lineBreak || (token === 14 /* LineBreakTrivia */);\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* Unknown */ || scanner.getTokenError() !== 0 /* None */;\n        return token;\n    }\n    var editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && startOffset < rangeEnd && endOffset > rangeStart && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    var firstToken = scanNext();\n    if (firstToken !== 17 /* EOF */) {\n        var firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        var initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* EOF */) {\n        var firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        var secondToken = scanNext();\n        var replaceContent = '';\n        while (!lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n            // comments on the same line: keep them on the same line, but ignore them otherwise\n            var commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            replaceContent = secondToken === 12 /* LineCommentTrivia */ ? newLineAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* CloseBraceToken */) {\n            if (firstToken !== 1 /* OpenBraceToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else if (secondToken === 4 /* CloseBracketToken */) {\n            if (firstToken !== 3 /* OpenBracketToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* OpenBracketToken */:\n                case 1 /* OpenBraceToken */:\n                    indentLevel++;\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 5 /* CommaToken */:\n                case 12 /* LineCommentTrivia */:\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    if (lineBreak) {\n                        replaceContent = newLineAndIndent();\n                    }\n                    else {\n                        // symbol following comment on the same line: keep on same line, separate with ' '\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* ColonToken */:\n                    replaceContent = ' ';\n                    break;\n                case 10 /* StringLiteral */:\n                    if (secondToken === 6 /* ColonToken */) {\n                        replaceContent = '';\n                        break;\n                    }\n                // fall through\n                case 7 /* NullKeyword */:\n                case 8 /* TrueKeyword */:\n                case 9 /* FalseKeyword */:\n                case 11 /* NumericLiteral */:\n                case 2 /* CloseBraceToken */:\n                case 4 /* CloseBracketToken */:\n                    if (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */) {\n                        replaceContent = ' ';\n                    }\n                    else if (secondToken !== 5 /* CommaToken */ && secondToken !== 17 /* EOF */) {\n                        hasError = true;\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n                replaceContent = newLineAndIndent();\n            }\n        }\n        var secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    var result = '';\n    for (var i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    var i = 0;\n    var nChars = 0;\n    var tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        var ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    var segments = []; // strings or numbers\n    var earlyReturnException = new Object();\n    var previousNode = undefined;\n    var previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: undefined\n    };\n    var isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = undefined;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: function (name, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onArrayBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.push(0);\n            },\n            onArrayEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onLiteralValue: function (value, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: function (sep, offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = undefined;\n                }\n                else if (sep === ',') {\n                    var last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = undefined;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode: previousNode,\n        isAtPropertyKey: isAtPropertyKey,\n        matches: function (pattern) {\n            var k = 0;\n            for (var i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    var visitor = {\n        onObjectBegin: function (offset) {\n            currentParent = onValue({ type: 'object', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: function (name, offset, length) {\n            currentParent = onValue({ type: 'property', offset: offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset: offset, length: length, parent: currentParent });\n        },\n        onObjectEnd: function (offset, length) {\n            ensurePropertyComplete(offset + length); // in case of a missing value for a property: make sure property is complete\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: function (offset, length) {\n            currentParent = onValue({ type: 'array', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: function (value, offset, length) {\n            onValue({ type: getNodeType(value), offset: offset, length: length, parent: currentParent, value: value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: function (sep, offset, length) {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    var result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return undefined;\n    }\n    var node = root;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return undefined;\n            }\n            var found = false;\n            for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n                var propertyNode = _b[_a];\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return undefined;\n            }\n        }\n        else {\n            var index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return undefined;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    var path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        var key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        var index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            var obj = Object.create(null);\n            for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                var prop = _a[_i];\n                var valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return undefined;\n    }\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    if (contains(node, offset, includeRightBound)) {\n        var children = node.children;\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length && children[i].offset <= offset; i++) {\n                var item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return undefined;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options) {\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var tokenValue = _scanner.getTokenValue();\n                var value = Number(tokenValue);\n                if (isNaN(value)) {\n                    handleError(2 /* InvalidNumberFormat */);\n                    value = 0;\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    var _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* LineCommentTrivia */:\n            case 13 /* BlockCommentTrivia */:\n            case 17 /* EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== undefined) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* EOF */);\n    return parts.join('');\n}\nexport function getNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        case 'object': {\n            if (!value) {\n                return 'null';\n            }\n            else if (Array.isArray(value)) {\n                return 'array';\n            }\n            return 'object';\n        }\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { format, isEOL } from './format';\nimport { parseTree, findNodeAtLocation } from './parser';\nexport function removeProperty(text, path, options) {\n    return setProperty(text, path, void 0, options);\n}\nexport function setProperty(text, originalPath, value, options) {\n    var _a;\n    var path = originalPath.slice();\n    var errors = [];\n    var root = parseTree(text, errors);\n    var parent = void 0;\n    var lastSegment = void 0;\n    while (path.length > 0) {\n        lastSegment = path.pop();\n        parent = findNodeAtLocation(root, path);\n        if (parent === void 0 && value !== void 0) {\n            if (typeof lastSegment === 'string') {\n                value = (_a = {}, _a[lastSegment] = value, _a);\n            }\n            else {\n                value = [value];\n            }\n        }\n        else {\n            break;\n        }\n    }\n    if (!parent) {\n        // empty document\n        if (value === void 0) { // delete\n            throw new Error('Can not delete in empty document');\n        }\n        return withFormatting(text, { offset: root ? root.offset : 0, length: root ? root.length : 0, content: JSON.stringify(value) }, options);\n    }\n    else if (parent.type === 'object' && typeof lastSegment === 'string' && Array.isArray(parent.children)) {\n        var existing = findNodeAtLocation(parent, [lastSegment]);\n        if (existing !== void 0) {\n            if (value === void 0) { // delete\n                if (!existing.parent) {\n                    throw new Error('Malformed AST');\n                }\n                var propertyIndex = parent.children.indexOf(existing.parent);\n                var removeBegin = void 0;\n                var removeEnd = existing.parent.offset + existing.parent.length;\n                if (propertyIndex > 0) {\n                    // remove the comma of the previous node\n                    var previous = parent.children[propertyIndex - 1];\n                    removeBegin = previous.offset + previous.length;\n                }\n                else {\n                    removeBegin = parent.offset + 1;\n                    if (parent.children.length > 1) {\n                        // remove the comma of the next node\n                        var next = parent.children[1];\n                        removeEnd = next.offset;\n                    }\n                }\n                return withFormatting(text, { offset: removeBegin, length: removeEnd - removeBegin, content: '' }, options);\n            }\n            else {\n                // set value of existing property\n                return withFormatting(text, { offset: existing.offset, length: existing.length, content: JSON.stringify(value) }, options);\n            }\n        }\n        else {\n            if (value === void 0) { // delete\n                return []; // property does not exist, nothing to do\n            }\n            var newProperty = JSON.stringify(lastSegment) + \": \" + JSON.stringify(value);\n            var index = options.getInsertionIndex ? options.getInsertionIndex(parent.children.map(function (p) { return p.children[0].value; })) : parent.children.length;\n            var edit = void 0;\n            if (index > 0) {\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            else if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty + ',' };\n            }\n            return withFormatting(text, edit, options);\n        }\n    }\n    else if (parent.type === 'array' && typeof lastSegment === 'number' && Array.isArray(parent.children)) {\n        var insertIndex = lastSegment;\n        if (insertIndex === -1) {\n            // Insert\n            var newProperty = \"\" + JSON.stringify(value);\n            var edit = void 0;\n            if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                var previous = parent.children[parent.children.length - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value === void 0 && parent.children.length >= 0) {\n            // Removal\n            var removalIndex = lastSegment;\n            var toRemove = parent.children[removalIndex];\n            var edit = void 0;\n            if (parent.children.length === 1) {\n                // only item\n                edit = { offset: parent.offset + 1, length: parent.length - 2, content: '' };\n            }\n            else if (parent.children.length - 1 === removalIndex) {\n                // last item\n                var previous = parent.children[removalIndex - 1];\n                var offset = previous.offset + previous.length;\n                var parentEndOffset = parent.offset + parent.length;\n                edit = { offset: offset, length: parentEndOffset - 2 - offset, content: '' };\n            }\n            else {\n                edit = { offset: toRemove.offset, length: parent.children[removalIndex + 1].offset - toRemove.offset, content: '' };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value !== void 0) {\n            var edit = void 0;\n            var newProperty = \"\" + JSON.stringify(value);\n            if (!options.isArrayInsertion && parent.children.length > lastSegment) {\n                var toModify = parent.children[lastSegment];\n                edit = { offset: toModify.offset, length: toModify.length, content: newProperty };\n            }\n            else if (parent.children.length === 0 || lastSegment === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: parent.children.length === 0 ? newProperty : newProperty + ',' };\n            }\n            else {\n                var index = lastSegment > parent.children.length ? parent.children.length : lastSegment;\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else {\n            throw new Error(\"Can not \" + (value === void 0 ? 'remove' : (options.isArrayInsertion ? 'insert' : 'modify')) + \" Array index \" + insertIndex + \" as length is not sufficient\");\n        }\n    }\n    else {\n        throw new Error(\"Can not add \" + (typeof lastSegment !== 'number' ? 'index' : 'property') + \" to parent of type \" + parent.type);\n    }\n}\nfunction withFormatting(text, edit, options) {\n    if (!options.formattingOptions) {\n        return [edit];\n    }\n    // apply the edit\n    var newText = applyEdit(text, edit);\n    // format the new text\n    var begin = edit.offset;\n    var end = edit.offset + edit.content.length;\n    if (edit.length === 0 || edit.content.length === 0) { // insert or remove\n        while (begin > 0 && !isEOL(newText, begin - 1)) {\n            begin--;\n        }\n        while (end < newText.length && !isEOL(newText, end)) {\n            end++;\n        }\n    }\n    var edits = format(newText, { offset: begin, length: end - begin }, options.formattingOptions);\n    // apply the formatting edits and track the begin and end offsets of the changes\n    for (var i = edits.length - 1; i >= 0; i--) {\n        var edit_1 = edits[i];\n        newText = applyEdit(newText, edit_1);\n        begin = Math.min(begin, edit_1.offset);\n        end = Math.max(end, edit_1.offset + edit_1.length);\n        end += edit_1.content.length - edit_1.length;\n    }\n    // create a single edit with all changes\n    var editLength = text.length - (newText.length - end) - begin;\n    return [{ offset: begin, length: editLength, content: newText.substring(begin, end) }];\n}\nexport function applyEdit(text, edit) {\n    return text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\n}\nexport function isWS(text, offset) {\n    return '\\r\\n \\t'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format';\nimport * as edit from './impl/edit';\nimport * as scanner from './impl/scanner';\nimport * as parser from './impl/parser';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport var createScanner = scanner.createScanner;\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport var getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nexport var parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport var parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport var findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the innermost node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport var findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport var getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport var getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport var visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport var stripComments = parser.stripComments;\nexport function printParseErrorCode(code) {\n    switch (code) {\n        case 1 /* InvalidSymbol */: return 'InvalidSymbol';\n        case 2 /* InvalidNumberFormat */: return 'InvalidNumberFormat';\n        case 3 /* PropertyNameExpected */: return 'PropertyNameExpected';\n        case 4 /* ValueExpected */: return 'ValueExpected';\n        case 5 /* ColonExpected */: return 'ColonExpected';\n        case 6 /* CommaExpected */: return 'CommaExpected';\n        case 7 /* CloseBraceExpected */: return 'CloseBraceExpected';\n        case 8 /* CloseBracketExpected */: return 'CloseBracketExpected';\n        case 9 /* EndOfFileExpected */: return 'EndOfFileExpected';\n        case 10 /* InvalidCommentToken */: return 'InvalidCommentToken';\n        case 11 /* UnexpectedEndOfComment */: return 'UnexpectedEndOfComment';\n        case 12 /* UnexpectedEndOfString */: return 'UnexpectedEndOfString';\n        case 13 /* UnexpectedEndOfNumber */: return 'UnexpectedEndOfNumber';\n        case 14 /* InvalidUnicode */: return 'InvalidUnicode';\n        case 15 /* InvalidEscapeCharacter */: return 'InvalidEscapeCharacter';\n        case 16 /* InvalidCharacter */: return 'InvalidCharacter';\n    }\n    return '<unknown ParseErrorCode>';\n}\n/**\n * Computes the edits needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edits needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options);\n}\n/**\n * Applies edits to a input string.\n */\nexport function applyEdits(text, edits) {\n    for (var i = edits.length - 1; i >= 0; i--) {\n        text = edit.applyEdit(text, edits[i]);\n    }\n    return text;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as rimraf from 'rimraf';\nimport * as vscode from 'vscode';\nimport { Api, getExtensionApi } from './api';\nimport { registerBaseCommands } from './commands/index';\nimport { LanguageConfigurationManager } from './languageFeatures/languageConfiguration';\nimport { createLazyClientHost, lazilyActivateClient } from './lazyClientHost';\nimport { nodeRequestCancellerFactory } from './tsServer/cancellation.electron';\nimport { NodeLogDirectoryProvider } from './tsServer/logDirectoryProvider.electron';\nimport { ChildServerProcess } from './tsServer/serverProcess.electron';\nimport { DiskTypeScriptVersionProvider } from './tsServer/versionProvider.electron';\nimport { CommandManager } from './commands/commandManager';\nimport { onCaseInsenitiveFileSystem } from './utils/fileSystem.electron';\nimport { PluginManager } from './utils/plugins';\nimport * as temp from './utils/temp.electron';\n\nexport function activate(\n\tcontext: vscode.ExtensionContext\n): Api {\n\tconst pluginManager = new PluginManager();\n\tcontext.subscriptions.push(pluginManager);\n\n\tconst commandManager = new CommandManager();\n\tcontext.subscriptions.push(commandManager);\n\n\tconst onCompletionAccepted = new vscode.EventEmitter<vscode.CompletionItem>();\n\tcontext.subscriptions.push(onCompletionAccepted);\n\n\tconst logDirectoryProvider = new NodeLogDirectoryProvider(context);\n\tconst versionProvider = new DiskTypeScriptVersionProvider();\n\n\tcontext.subscriptions.push(new LanguageConfigurationManager());\n\n\tconst lazyClientHost = createLazyClientHost(context, onCaseInsenitiveFileSystem(), {\n\t\tpluginManager,\n\t\tcommandManager,\n\t\tlogDirectoryProvider,\n\t\tcancellerFactory: nodeRequestCancellerFactory,\n\t\tversionProvider,\n\t\tprocessFactory: ChildServerProcess,\n\t}, item => {\n\t\tonCompletionAccepted.fire(item);\n\t});\n\n\tregisterBaseCommands(commandManager, lazyClientHost, pluginManager);\n\n\timport('./task/taskProvider').then(module => {\n\t\tcontext.subscriptions.push(module.register(lazyClientHost.map(x => x.serviceClient)));\n\t});\n\n\timport('./languageFeatures/tsconfig').then(module => {\n\t\tcontext.subscriptions.push(module.register());\n\t});\n\n\tcontext.subscriptions.push(lazilyActivateClient(lazyClientHost, pluginManager));\n\n\treturn getExtensionApi(onCompletionAccepted.event, pluginManager);\n}\n\nexport function deactivate() {\n\trimraf.sync(temp.getInstanceTempDir());\n}\n","module.exports = rimraf\nrimraf.sync = rimrafSync\n\nvar assert = require(\"assert\")\nvar path = require(\"path\")\nvar fs = require(\"fs\")\nvar glob = undefined\ntry {\n  glob = require(\"glob\")\n} catch (_err) {\n  // treat glob as optional.\n}\nvar _0666 = parseInt('666', 8)\n\nvar defaultGlobOpts = {\n  nosort: true,\n  silent: true\n}\n\n// for EMFILE handling\nvar timeout = 0\n\nvar isWindows = (process.platform === \"win32\")\n\nfunction defaults (options) {\n  var methods = [\n    'unlink',\n    'chmod',\n    'stat',\n    'lstat',\n    'rmdir',\n    'readdir'\n  ]\n  methods.forEach(function(m) {\n    options[m] = options[m] || fs[m]\n    m = m + 'Sync'\n    options[m] = options[m] || fs[m]\n  })\n\n  options.maxBusyTries = options.maxBusyTries || 3\n  options.emfileWait = options.emfileWait || 1000\n  if (options.glob === false) {\n    options.disableGlob = true\n  }\n  if (options.disableGlob !== true && glob === undefined) {\n    throw Error('glob dependency not found, set `options.disableGlob = true` if intentional')\n  }\n  options.disableGlob = options.disableGlob || false\n  options.glob = options.glob || defaultGlobOpts\n}\n\nfunction rimraf (p, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert.equal(typeof cb, 'function', 'rimraf: callback function required')\n  assert(options, 'rimraf: invalid options argument provided')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  defaults(options)\n\n  var busyTries = 0\n  var errState = null\n  var n = 0\n\n  if (options.disableGlob || !glob.hasMagic(p))\n    return afterGlob(null, [p])\n\n  options.lstat(p, function (er, stat) {\n    if (!er)\n      return afterGlob(null, [p])\n\n    glob(p, options.glob, afterGlob)\n  })\n\n  function next (er) {\n    errState = errState || er\n    if (--n === 0)\n      cb(errState)\n  }\n\n  function afterGlob (er, results) {\n    if (er)\n      return cb(er)\n\n    n = results.length\n    if (n === 0)\n      return cb()\n\n    results.forEach(function (p) {\n      rimraf_(p, options, function CB (er) {\n        if (er) {\n          if ((er.code === \"EBUSY\" || er.code === \"ENOTEMPTY\" || er.code === \"EPERM\") &&\n              busyTries < options.maxBusyTries) {\n            busyTries ++\n            var time = busyTries * 100\n            // try again, with the same exact callback as this one.\n            return setTimeout(function () {\n              rimraf_(p, options, CB)\n            }, time)\n          }\n\n          // this one won't happen if graceful-fs is used.\n          if (er.code === \"EMFILE\" && timeout < options.emfileWait) {\n            return setTimeout(function () {\n              rimraf_(p, options, CB)\n            }, timeout ++)\n          }\n\n          // already gone\n          if (er.code === \"ENOENT\") er = null\n        }\n\n        timeout = 0\n        next(er)\n      })\n    })\n  }\n}\n\n// Two possible strategies.\n// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR\n// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR\n//\n// Both result in an extra syscall when you guess wrong.  However, there\n// are likely far more normal files in the world than directories.  This\n// is based on the assumption that a the average number of files per\n// directory is >= 1.\n//\n// If anyone ever complains about this, then I guess the strategy could\n// be made configurable somehow.  But until then, YAGNI.\nfunction rimraf_ (p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  // sunos lets the root user unlink directories, which is... weird.\n  // so we have to lstat here and make sure it's not a dir.\n  options.lstat(p, function (er, st) {\n    if (er && er.code === \"ENOENT\")\n      return cb(null)\n\n    // Windows can EPERM on stat.  Life is suffering.\n    if (er && er.code === \"EPERM\" && isWindows)\n      fixWinEPERM(p, options, er, cb)\n\n    if (st && st.isDirectory())\n      return rmdir(p, options, er, cb)\n\n    options.unlink(p, function (er) {\n      if (er) {\n        if (er.code === \"ENOENT\")\n          return cb(null)\n        if (er.code === \"EPERM\")\n          return (isWindows)\n            ? fixWinEPERM(p, options, er, cb)\n            : rmdir(p, options, er, cb)\n        if (er.code === \"EISDIR\")\n          return rmdir(p, options, er, cb)\n      }\n      return cb(er)\n    })\n  })\n}\n\nfunction fixWinEPERM (p, options, er, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n  if (er)\n    assert(er instanceof Error)\n\n  options.chmod(p, _0666, function (er2) {\n    if (er2)\n      cb(er2.code === \"ENOENT\" ? null : er)\n    else\n      options.stat(p, function(er3, stats) {\n        if (er3)\n          cb(er3.code === \"ENOENT\" ? null : er)\n        else if (stats.isDirectory())\n          rmdir(p, options, er, cb)\n        else\n          options.unlink(p, cb)\n      })\n  })\n}\n\nfunction fixWinEPERMSync (p, options, er) {\n  assert(p)\n  assert(options)\n  if (er)\n    assert(er instanceof Error)\n\n  try {\n    options.chmodSync(p, _0666)\n  } catch (er2) {\n    if (er2.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  try {\n    var stats = options.statSync(p)\n  } catch (er3) {\n    if (er3.code === \"ENOENT\")\n      return\n    else\n      throw er\n  }\n\n  if (stats.isDirectory())\n    rmdirSync(p, options, er)\n  else\n    options.unlinkSync(p)\n}\n\nfunction rmdir (p, options, originalEr, cb) {\n  assert(p)\n  assert(options)\n  if (originalEr)\n    assert(originalEr instanceof Error)\n  assert(typeof cb === 'function')\n\n  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)\n  // if we guessed wrong, and it's not a directory, then\n  // raise the original error.\n  options.rmdir(p, function (er) {\n    if (er && (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\"))\n      rmkids(p, options, cb)\n    else if (er && er.code === \"ENOTDIR\")\n      cb(originalEr)\n    else\n      cb(er)\n  })\n}\n\nfunction rmkids(p, options, cb) {\n  assert(p)\n  assert(options)\n  assert(typeof cb === 'function')\n\n  options.readdir(p, function (er, files) {\n    if (er)\n      return cb(er)\n    var n = files.length\n    if (n === 0)\n      return options.rmdir(p, cb)\n    var errState\n    files.forEach(function (f) {\n      rimraf(path.join(p, f), options, function (er) {\n        if (errState)\n          return\n        if (er)\n          return cb(errState = er)\n        if (--n === 0)\n          options.rmdir(p, cb)\n      })\n    })\n  })\n}\n\n// this looks simpler, and is strictly *faster*, but will\n// tie up the JavaScript thread and fail on excessively\n// deep directory trees.\nfunction rimrafSync (p, options) {\n  options = options || {}\n  defaults(options)\n\n  assert(p, 'rimraf: missing path')\n  assert.equal(typeof p, 'string', 'rimraf: path should be a string')\n  assert(options, 'rimraf: missing options')\n  assert.equal(typeof options, 'object', 'rimraf: options should be object')\n\n  var results\n\n  if (options.disableGlob || !glob.hasMagic(p)) {\n    results = [p]\n  } else {\n    try {\n      options.lstatSync(p)\n      results = [p]\n    } catch (er) {\n      results = glob.sync(p, options.glob)\n    }\n  }\n\n  if (!results.length)\n    return\n\n  for (var i = 0; i < results.length; i++) {\n    var p = results[i]\n\n    try {\n      var st = options.lstatSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n\n      // Windows can EPERM on stat.  Life is suffering.\n      if (er.code === \"EPERM\" && isWindows)\n        fixWinEPERMSync(p, options, er)\n    }\n\n    try {\n      // sunos lets the root user unlink directories, which is... weird.\n      if (st && st.isDirectory())\n        rmdirSync(p, options, null)\n      else\n        options.unlinkSync(p)\n    } catch (er) {\n      if (er.code === \"ENOENT\")\n        return\n      if (er.code === \"EPERM\")\n        return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er)\n      if (er.code !== \"EISDIR\")\n        throw er\n\n      rmdirSync(p, options, er)\n    }\n  }\n}\n\nfunction rmdirSync (p, options, originalEr) {\n  assert(p)\n  assert(options)\n  if (originalEr)\n    assert(originalEr instanceof Error)\n\n  try {\n    options.rmdirSync(p)\n  } catch (er) {\n    if (er.code === \"ENOENT\")\n      return\n    if (er.code === \"ENOTDIR\")\n      throw originalEr\n    if (er.code === \"ENOTEMPTY\" || er.code === \"EEXIST\" || er.code === \"EPERM\")\n      rmkidsSync(p, options)\n  }\n}\n\nfunction rmkidsSync (p, options) {\n  assert(p)\n  assert(options)\n  options.readdirSync(p).forEach(function (f) {\n    rimrafSync(path.join(p, f), options)\n  })\n\n  // We only end up here once we got ENOTEMPTY at least once, and\n  // at this point, we are guaranteed to have removed all the kids.\n  // So, we know that it won't be ENOENT or ENOTDIR or anything else.\n  // try really hard to delete stuff on windows, because it has a\n  // PROFOUNDLY annoying habit of not closing handles promptly when\n  // files are deleted, resulting in spurious ENOTEMPTY errors.\n  var retries = isWindows ? 100 : 1\n  var i = 0\n  do {\n    var threw = true\n    try {\n      var ret = options.rmdirSync(p, options)\n      threw = false\n      return ret\n    } finally {\n      if (++i < retries && threw)\n        continue\n    }\n  } while (true)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { PluginManager } from './utils/plugins';\n\nclass ApiV0 {\n\tpublic constructor(\n\t\tpublic readonly onCompletionAccepted: vscode.Event<vscode.CompletionItem & { metadata?: any }>,\n\t\tprivate readonly _pluginManager: PluginManager,\n\t) { }\n\n\tconfigurePlugin(pluginId: string, configuration: {}): void {\n\t\tthis._pluginManager.setConfiguration(pluginId, configuration);\n\t}\n}\n\nexport interface Api {\n\tgetAPI(version: 0): ApiV0 | undefined;\n}\n\nexport function getExtensionApi(\n\tonCompletionAccepted: vscode.Event<vscode.CompletionItem>,\n\tpluginManager: PluginManager,\n): Api {\n\treturn {\n\t\tgetAPI(version) {\n\t\t\tif (version === 0) {\n\t\t\t\treturn new ApiV0(onCompletionAccepted, pluginManager);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t};\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { PluginManager } from '../utils/plugins';\nimport { CommandManager } from './commandManager';\nimport { ConfigurePluginCommand } from './configurePlugin';\nimport { JavaScriptGoToProjectConfigCommand, TypeScriptGoToProjectConfigCommand } from './goToProjectConfiguration';\nimport { LearnMoreAboutRefactoringsCommand } from './learnMoreAboutRefactorings';\nimport { OpenTsServerLogCommand } from './openTsServerLog';\nimport { ReloadJavaScriptProjectsCommand, ReloadTypeScriptProjectsCommand } from './reloadProject';\nimport { RestartTsServerCommand } from './restartTsServer';\nimport { SelectTypeScriptVersionCommand } from './selectTypeScriptVersion';\n\nexport function registerBaseCommands(\n\tcommandManager: CommandManager,\n\tlazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\tpluginManager: PluginManager\n): void {\n\tcommandManager.register(new ReloadTypeScriptProjectsCommand(lazyClientHost));\n\tcommandManager.register(new ReloadJavaScriptProjectsCommand(lazyClientHost));\n\tcommandManager.register(new SelectTypeScriptVersionCommand(lazyClientHost));\n\tcommandManager.register(new OpenTsServerLogCommand(lazyClientHost));\n\tcommandManager.register(new RestartTsServerCommand(lazyClientHost));\n\tcommandManager.register(new TypeScriptGoToProjectConfigCommand(lazyClientHost));\n\tcommandManager.register(new JavaScriptGoToProjectConfigCommand(lazyClientHost));\n\tcommandManager.register(new ConfigurePluginCommand(pluginManager));\n\tcommandManager.register(new LearnMoreAboutRefactoringsCommand());\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PluginManager } from '../utils/plugins';\nimport { Command } from './commandManager';\n\nexport class ConfigurePluginCommand implements Command {\n\tpublic readonly id = '_typescript.configurePlugin';\n\n\tpublic constructor(\n\t\tprivate readonly pluginManager: PluginManager,\n\t) { }\n\n\tpublic execute(pluginId: string, configuration: any) {\n\t\tthis.pluginManager.setConfiguration(pluginId, configuration);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { openProjectConfigForFile, ProjectType } from '../utils/tsconfig';\nimport { Command } from './commandManager';\n\nexport class TypeScriptGoToProjectConfigCommand implements Command {\n\tpublic readonly id = 'typescript.goToProjectConfig';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\t) { }\n\n\tpublic execute() {\n\t\tconst editor = vscode.window.activeTextEditor;\n\t\tif (editor) {\n\t\t\topenProjectConfigForFile(ProjectType.TypeScript, this.lazyClientHost.value.serviceClient, editor.document.uri);\n\t\t}\n\t}\n}\n\nexport class JavaScriptGoToProjectConfigCommand implements Command {\n\tpublic readonly id = 'javascript.goToProjectConfig';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\t) { }\n\n\tpublic execute() {\n\t\tconst editor = vscode.window.activeTextEditor;\n\t\tif (editor) {\n\t\t\topenProjectConfigForFile(ProjectType.JavaScript, this.lazyClientHost.value.serviceClient, editor.document.uri);\n\t\t}\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class OpenTsServerLogCommand implements Command {\n\tpublic readonly id = 'typescript.openTsServerLog';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.openTsServerLogFile();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class ReloadTypeScriptProjectsCommand implements Command {\n\tpublic readonly id = 'typescript.reloadProjects';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.reloadProjects();\n\t}\n}\n\nexport class ReloadJavaScriptProjectsCommand implements Command {\n\tpublic readonly id = 'javascript.reloadProjects';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.reloadProjects();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class RestartTsServerCommand implements Command {\n\tpublic readonly id = 'typescript.restartTsServer';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.restartTsServer();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class SelectTypeScriptVersionCommand implements Command {\n\tpublic readonly id = 'typescript.selectTypeScriptVersion';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.showVersionPicker();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* --------------------------------------------------------------------------------------------\n * Includes code from typescript-sublime-plugin project, obtained from\n * https://github.com/microsoft/TypeScript-Sublime-Plugin/blob/master/TypeScript%20Indent.tmPreferences\n * ------------------------------------------------------------------------------------------ */\n\nimport * as vscode from 'vscode';\nimport { Disposable } from '../utils/dispose';\nimport * as languageModeIds from '../utils/languageModeIds';\n\nconst jsTsLanguageConfiguration: vscode.LanguageConfiguration = {\n\tindentationRules: {\n\t\tdecreaseIndentPattern: /^((?!.*?\\/\\*).*\\*\\/)?\\s*[\\}\\]].*$/,\n\t\tincreaseIndentPattern: /^((?!\\/\\/).)*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/\n\t},\n\twordPattern: /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g,\n\tonEnterRules: [\n\t\t{\n\t\t\t// e.g. /** | */\n\t\t\tbeforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\n\t\t\tafterText: /^\\s*\\*\\/$/,\n\t\t\taction: { indentAction: vscode.IndentAction.IndentOutdent, appendText: ' * ' },\n\t\t}, {\n\t\t\t// e.g. /** ...|\n\t\t\tbeforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, appendText: ' * ' },\n\t\t}, {\n\t\t\t// e.g.  * ...|\n\t\t\tbeforeText: /^(\\t|[ ])*[ ]\\*([ ]([^\\*]|\\*(?!\\/))*)?$/,\n\t\t\tpreviousLineText: /(?=^(\\s*(\\/\\*\\*|\\*)).*)(?=(?!(\\s*\\*\\/)))/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, appendText: '* ' },\n\t\t}, {\n\t\t\t// e.g.  */|\n\t\t\tbeforeText: /^(\\t|[ ])*[ ]\\*\\/\\s*$/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, removeText: 1 },\n\t\t},\n\t\t{\n\t\t\t// e.g.  *-----*/|\n\t\t\tbeforeText: /^(\\t|[ ])*[ ]\\*[^/]*\\*\\/\\s*$/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, removeText: 1 },\n\t\t},\n\t\t{\n\t\t\tbeforeText: /^\\s*(\\bcase\\s.+:|\\bdefault:)$/,\n\t\t\tafterText: /^(?!\\s*(\\bcase\\b|\\bdefault\\b))/,\n\t\t\taction: { indentAction: vscode.IndentAction.Indent },\n\t\t}\n\t]\n};\n\nconst EMPTY_ELEMENTS: string[] = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr'];\n\nconst jsxTagsLanguageConfiguration: vscode.LanguageConfiguration = {\n\twordPattern: /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\$\\^\\&\\*\\(\\)\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\s]+)/g,\n\tonEnterRules: [\n\t\t{\n\t\t\tbeforeText: new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join('|')}))([_:\\\\w][_:\\\\w\\\\-.\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n\t\t\tafterText: /^<\\/([_:\\w][_:\\w-.\\d]*)\\s*>$/i,\n\t\t\taction: { indentAction: vscode.IndentAction.IndentOutdent }\n\t\t},\n\t\t{\n\t\t\tbeforeText: new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join('|')}))([_:\\\\w][_:\\\\w\\\\-.\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n\t\t\taction: { indentAction: vscode.IndentAction.Indent }\n\t\t},\n\t\t{\n\t\t\t// `beforeText` only applies to tokens of a given language. Since we are dealing with jsx-tags,\n\t\t\t// make sure we apply to the closing `>` of a tag so that mixed language spans\n\t\t\t// such as `<div onclick={1}>` are handled properly.\n\t\t\tbeforeText: /^>$/,\n\t\t\tafterText: /^<\\/([_:\\w][_:\\w-.\\d]*)\\s*>$/i,\n\t\t\taction: { indentAction: vscode.IndentAction.IndentOutdent }\n\t\t},\n\t\t{\n\t\t\tbeforeText: /^>$/,\n\t\t\taction: { indentAction: vscode.IndentAction.Indent }\n\t\t},\n\t],\n};\n\nexport class LanguageConfigurationManager extends Disposable {\n\n\tconstructor() {\n\t\tsuper();\n\t\tconst standardLanguages = [\n\t\t\tlanguageModeIds.javascript,\n\t\t\tlanguageModeIds.javascriptreact,\n\t\t\tlanguageModeIds.typescript,\n\t\t\tlanguageModeIds.typescriptreact,\n\t\t];\n\t\tfor (const language of standardLanguages) {\n\t\t\tthis.registerConfiguration(language, jsTsLanguageConfiguration);\n\t\t}\n\n\t\tthis.registerConfiguration(languageModeIds.jsxTags, jsxTagsLanguageConfiguration);\n\t}\n\n\tprivate registerConfiguration(language: string, config: vscode.LanguageConfiguration) {\n\t\tthis._register(vscode.languages.setLanguageConfiguration(language, config));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { CommandManager } from './commands/commandManager';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { TsServerProcessFactory } from './tsServer/server';\nimport { ITypeScriptVersionProvider } from './tsServer/versionProvider';\nimport TypeScriptServiceClientHost from './typeScriptServiceClientHost';\nimport { flatten } from './utils/arrays';\nimport * as fileSchemes from './utils/fileSchemes';\nimport { standardLanguageDescriptions } from './utils/languageDescription';\nimport { lazy, Lazy } from './utils/lazy';\nimport ManagedFileContextManager from './utils/managedFileContext';\nimport { PluginManager } from './utils/plugins';\n\nexport function createLazyClientHost(\n\tcontext: vscode.ExtensionContext,\n\tonCaseInsenitiveFileSystem: boolean,\n\tservices: {\n\t\tpluginManager: PluginManager,\n\t\tcommandManager: CommandManager,\n\t\tlogDirectoryProvider: ILogDirectoryProvider,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\tversionProvider: ITypeScriptVersionProvider,\n\t\tprocessFactory: TsServerProcessFactory,\n\t},\n\tonCompletionAccepted: (item: vscode.CompletionItem) => void,\n): Lazy<TypeScriptServiceClientHost> {\n\treturn lazy(() => {\n\t\tconst clientHost = new TypeScriptServiceClientHost(\n\t\t\tstandardLanguageDescriptions,\n\t\t\tcontext,\n\t\t\tonCaseInsenitiveFileSystem,\n\t\t\tservices,\n\t\t\tonCompletionAccepted);\n\n\t\tcontext.subscriptions.push(clientHost);\n\n\t\treturn clientHost;\n\t});\n}\n\nexport function lazilyActivateClient(\n\tlazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\tpluginManager: PluginManager,\n): vscode.Disposable {\n\tconst disposables: vscode.Disposable[] = [];\n\n\tconst supportedLanguage = flatten([\n\t\t...standardLanguageDescriptions.map(x => x.modeIds),\n\t\t...pluginManager.plugins.map(x => x.languages)\n\t]);\n\n\tlet hasActivated = false;\n\tconst maybeActivate = (textDocument: vscode.TextDocument): boolean => {\n\t\tif (!hasActivated && isSupportedDocument(supportedLanguage, textDocument)) {\n\t\t\thasActivated = true;\n\t\t\t// Force activation\n\t\t\tvoid lazyClientHost.value;\n\n\t\t\tdisposables.push(new ManagedFileContextManager(resource => {\n\t\t\t\treturn lazyClientHost.value.serviceClient.toPath(resource);\n\t\t\t}));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst didActivate = vscode.workspace.textDocuments.some(maybeActivate);\n\tif (!didActivate) {\n\t\tconst openListener = vscode.workspace.onDidOpenTextDocument(doc => {\n\t\t\tif (maybeActivate(doc)) {\n\t\t\t\topenListener.dispose();\n\t\t\t}\n\t\t}, undefined, disposables);\n\t}\n\n\treturn vscode.Disposable.from(...disposables);\n}\n\nfunction isSupportedDocument(\n\tsupportedLanguage: readonly string[],\n\tdocument: vscode.TextDocument\n): boolean {\n\treturn supportedLanguage.indexOf(document.languageId) >= 0\n\t\t&& !fileSchemes.disabledSchemes.has(document.uri.scheme);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* --------------------------------------------------------------------------------------------\n * Includes code from typescript-sublime-plugin project, obtained from\n * https://github.com/microsoft/TypeScript-Sublime-Plugin/blob/master/TypeScript%20Indent.tmPreferences\n * ------------------------------------------------------------------------------------------ */\n\nimport * as vscode from 'vscode';\nimport { DiagnosticKind } from './languageFeatures/diagnostics';\nimport FileConfigurationManager from './languageFeatures/fileConfigurationManager';\nimport LanguageProvider from './languageProvider';\nimport * as Proto from './protocol';\nimport * as PConst from './protocol.const';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { TsServerProcessFactory } from './tsServer/server';\nimport { ITypeScriptVersionProvider } from './tsServer/versionProvider';\nimport VersionStatus from './tsServer/versionStatus';\nimport TypeScriptServiceClient from './typescriptServiceClient';\nimport { coalesce, flatten } from './utils/arrays';\nimport { CommandManager } from './commands/commandManager';\nimport { Disposable } from './utils/dispose';\nimport * as errorCodes from './utils/errorCodes';\nimport { DiagnosticLanguage, LanguageDescription } from './utils/languageDescription';\nimport { PluginManager } from './utils/plugins';\nimport * as typeConverters from './utils/typeConverters';\nimport TypingsStatus, { AtaProgressReporter } from './utils/typingsStatus';\nimport * as ProjectStatus from './utils/largeProjectStatus';\n\n// Style check diagnostics that can be reported as warnings\nconst styleCheckDiagnostics = new Set([\n\t...errorCodes.variableDeclaredButNeverUsed,\n\t...errorCodes.propertyDeclaretedButNeverUsed,\n\t...errorCodes.allImportsAreUnused,\n\t...errorCodes.unreachableCode,\n\t...errorCodes.unusedLabel,\n\t...errorCodes.fallThroughCaseInSwitch,\n\t...errorCodes.notAllCodePathsReturnAValue,\n]);\n\nexport default class TypeScriptServiceClientHost extends Disposable {\n\n\tprivate readonly client: TypeScriptServiceClient;\n\tprivate readonly languages: LanguageProvider[] = [];\n\tprivate readonly languagePerId = new Map<string, LanguageProvider>();\n\n\tprivate readonly typingsStatus: TypingsStatus;\n\n\tprivate readonly fileConfigurationManager: FileConfigurationManager;\n\n\tprivate reportStyleCheckAsWarnings: boolean = true;\n\n\tprivate readonly commandManager: CommandManager;\n\n\tconstructor(\n\t\tdescriptions: LanguageDescription[],\n\t\tcontext: vscode.ExtensionContext,\n\t\tonCaseInsenitiveFileSystem: boolean,\n\t\tservices: {\n\t\t\tpluginManager: PluginManager,\n\t\t\tcommandManager: CommandManager,\n\t\t\tlogDirectoryProvider: ILogDirectoryProvider,\n\t\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\t\tversionProvider: ITypeScriptVersionProvider,\n\t\t\tprocessFactory: TsServerProcessFactory,\n\t\t},\n\t\tonCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t) {\n\t\tsuper();\n\n\t\tthis.commandManager = services.commandManager;\n\n\t\tconst allModeIds = this.getAllModeIds(descriptions, services.pluginManager);\n\t\tthis.client = this._register(new TypeScriptServiceClient(\n\t\t\tcontext,\n\t\t\tonCaseInsenitiveFileSystem,\n\t\t\tservices,\n\t\t\tallModeIds));\n\n\t\tthis.client.onDiagnosticsReceived(({ kind, resource, diagnostics }) => {\n\t\t\tthis.diagnosticsReceived(kind, resource, diagnostics);\n\t\t}, null, this._disposables);\n\n\t\tthis.client.onConfigDiagnosticsReceived(diag => this.configFileDiagnosticsReceived(diag), null, this._disposables);\n\t\tthis.client.onResendModelsRequested(() => this.populateService(), null, this._disposables);\n\n\t\tthis._register(new VersionStatus(this.client, services.commandManager));\n\t\tthis._register(new AtaProgressReporter(this.client));\n\t\tthis.typingsStatus = this._register(new TypingsStatus(this.client));\n\t\tthis._register(ProjectStatus.create(this.client));\n\n\t\tthis.fileConfigurationManager = this._register(new FileConfigurationManager(this.client, onCaseInsenitiveFileSystem));\n\n\t\tfor (const description of descriptions) {\n\t\t\tconst manager = new LanguageProvider(this.client, description, this.commandManager, this.client.telemetryReporter, this.typingsStatus, this.fileConfigurationManager, onCompletionAccepted);\n\t\t\tthis.languages.push(manager);\n\t\t\tthis._register(manager);\n\t\t\tthis.languagePerId.set(description.id, manager);\n\t\t}\n\n\t\timport('./languageFeatures/updatePathsOnRename').then(module =>\n\t\t\tthis._register(module.register(this.client, this.fileConfigurationManager, uri => this.handles(uri))));\n\n\t\timport('./languageFeatures/workspaceSymbols').then(module =>\n\t\t\tthis._register(module.register(this.client, allModeIds)));\n\n\t\tthis.client.ensureServiceStarted();\n\t\tthis.client.onReady(() => {\n\t\t\tconst languages = new Set<string>();\n\t\t\tfor (const plugin of services.pluginManager.plugins) {\n\t\t\t\tif (plugin.configNamespace && plugin.languages.length) {\n\t\t\t\t\tthis.registerExtensionLanguageProvider({\n\t\t\t\t\t\tid: plugin.configNamespace,\n\t\t\t\t\t\tmodeIds: Array.from(plugin.languages),\n\t\t\t\t\t\tdiagnosticSource: 'ts-plugin',\n\t\t\t\t\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\t\t\t\t\tdiagnosticOwner: 'typescript',\n\t\t\t\t\t\tisExternal: true\n\t\t\t\t\t}, onCompletionAccepted);\n\t\t\t\t} else {\n\t\t\t\t\tfor (const language of plugin.languages) {\n\t\t\t\t\t\tlanguages.add(language);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (languages.size) {\n\t\t\t\tthis.registerExtensionLanguageProvider({\n\t\t\t\t\tid: 'typescript-plugins',\n\t\t\t\t\tmodeIds: Array.from(languages.values()),\n\t\t\t\t\tdiagnosticSource: 'ts-plugin',\n\t\t\t\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\t\t\t\tdiagnosticOwner: 'typescript',\n\t\t\t\t\tisExternal: true\n\t\t\t\t}, onCompletionAccepted);\n\t\t\t}\n\t\t});\n\n\t\tthis.client.onTsServerStarted(() => {\n\t\t\tthis.triggerAllDiagnostics();\n\t\t});\n\n\t\tvscode.workspace.onDidChangeConfiguration(this.configurationChanged, this, this._disposables);\n\t\tthis.configurationChanged();\n\t}\n\n\tprivate registerExtensionLanguageProvider(description: LanguageDescription, onCompletionAccepted: (item: vscode.CompletionItem) => void) {\n\t\tconst manager = new LanguageProvider(this.client, description, this.commandManager, this.client.telemetryReporter, this.typingsStatus, this.fileConfigurationManager, onCompletionAccepted);\n\t\tthis.languages.push(manager);\n\t\tthis._register(manager);\n\t\tthis.languagePerId.set(description.id, manager);\n\t}\n\n\tprivate getAllModeIds(descriptions: LanguageDescription[], pluginManager: PluginManager) {\n\t\tconst allModeIds = flatten([\n\t\t\t...descriptions.map(x => x.modeIds),\n\t\t\t...pluginManager.plugins.map(x => x.languages)\n\t\t]);\n\t\treturn allModeIds;\n\t}\n\n\tpublic get serviceClient(): TypeScriptServiceClient {\n\t\treturn this.client;\n\t}\n\n\tpublic reloadProjects(): void {\n\t\tthis.client.executeWithoutWaitingForResponse('reloadProjects', null);\n\t\tthis.triggerAllDiagnostics();\n\t}\n\n\tpublic async handles(resource: vscode.Uri): Promise<boolean> {\n\t\tconst provider = await this.findLanguage(resource);\n\t\tif (provider) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.client.bufferSyncSupport.handles(resource);\n\t}\n\n\tprivate configurationChanged(): void {\n\t\tconst typescriptConfig = vscode.workspace.getConfiguration('typescript');\n\n\t\tthis.reportStyleCheckAsWarnings = typescriptConfig.get('reportStyleChecksAsWarnings', true);\n\t}\n\n\tprivate async findLanguage(resource: vscode.Uri): Promise<LanguageProvider | undefined> {\n\t\ttry {\n\t\t\tconst doc = await vscode.workspace.openTextDocument(resource);\n\t\t\treturn this.languages.find(language => language.handles(resource, doc));\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate triggerAllDiagnostics() {\n\t\tfor (const language of this.languagePerId.values()) {\n\t\t\tlanguage.triggerAllDiagnostics();\n\t\t}\n\t}\n\n\tprivate populateService(): void {\n\t\tthis.fileConfigurationManager.reset();\n\n\t\tfor (const language of this.languagePerId.values()) {\n\t\t\tlanguage.reInitialize();\n\t\t}\n\t}\n\n\tprivate async diagnosticsReceived(\n\t\tkind: DiagnosticKind,\n\t\tresource: vscode.Uri,\n\t\tdiagnostics: Proto.Diagnostic[]\n\t): Promise<void> {\n\t\tconst language = await this.findLanguage(resource);\n\t\tif (language) {\n\t\t\tlanguage.diagnosticsReceived(\n\t\t\t\tkind,\n\t\t\t\tresource,\n\t\t\t\tthis.createMarkerDatas(diagnostics, language.diagnosticSource));\n\t\t}\n\t}\n\n\tprivate configFileDiagnosticsReceived(event: Proto.ConfigFileDiagnosticEvent): void {\n\t\t// See https://github.com/microsoft/TypeScript/issues/10384\n\t\tconst body = event.body;\n\t\tif (!body || !body.diagnostics || !body.configFile) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.findLanguage(this.client.toResource(body.configFile)).then(language => {\n\t\t\tif (!language) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlanguage.configFileDiagnosticsReceived(this.client.toResource(body.configFile), body.diagnostics.map(tsDiag => {\n\t\t\t\tconst range = tsDiag.start && tsDiag.end ? typeConverters.Range.fromTextSpan(tsDiag) : new vscode.Range(0, 0, 0, 1);\n\t\t\t\tconst diagnostic = new vscode.Diagnostic(range, body.diagnostics[0].text, this.getDiagnosticSeverity(tsDiag));\n\t\t\t\tdiagnostic.source = language.diagnosticSource;\n\t\t\t\treturn diagnostic;\n\t\t\t}));\n\t\t});\n\t}\n\n\tprivate createMarkerDatas(\n\t\tdiagnostics: Proto.Diagnostic[],\n\t\tsource: string\n\t): (vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any })[] {\n\t\treturn diagnostics.map(tsDiag => this.tsDiagnosticToVsDiagnostic(tsDiag, source));\n\t}\n\n\tprivate tsDiagnosticToVsDiagnostic(diagnostic: Proto.Diagnostic, source: string): vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any } {\n\t\tconst { start, end, text } = diagnostic;\n\t\tconst range = new vscode.Range(typeConverters.Position.fromLocation(start), typeConverters.Position.fromLocation(end));\n\t\tconst converted = new vscode.Diagnostic(range, text, this.getDiagnosticSeverity(diagnostic));\n\t\tconverted.source = diagnostic.source || source;\n\t\tif (diagnostic.code) {\n\t\t\tconverted.code = diagnostic.code;\n\t\t}\n\t\tconst relatedInformation = diagnostic.relatedInformation;\n\t\tif (relatedInformation) {\n\t\t\tconverted.relatedInformation = coalesce(relatedInformation.map((info: any) => {\n\t\t\t\tconst span = info.span;\n\t\t\t\tif (!span) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn new vscode.DiagnosticRelatedInformation(typeConverters.Location.fromTextSpan(this.client.toResource(span.file), span), info.message);\n\t\t\t}));\n\t\t}\n\t\tconst tags: vscode.DiagnosticTag[] = [];\n\t\tif (diagnostic.reportsUnnecessary) {\n\t\t\ttags.push(vscode.DiagnosticTag.Unnecessary);\n\t\t}\n\t\tif (diagnostic.reportsDeprecated) {\n\t\t\ttags.push(vscode.DiagnosticTag.Deprecated);\n\t\t}\n\t\tconverted.tags = tags.length ? tags : undefined;\n\n\t\tconst resultConverted = converted as vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any };\n\t\tresultConverted.reportUnnecessary = diagnostic.reportsUnnecessary;\n\t\tresultConverted.reportDeprecated = diagnostic.reportsDeprecated;\n\t\treturn resultConverted;\n\t}\n\n\tprivate getDiagnosticSeverity(diagnostic: Proto.Diagnostic): vscode.DiagnosticSeverity {\n\t\tif (this.reportStyleCheckAsWarnings\n\t\t\t&& this.isStyleCheckDiagnostic(diagnostic.code)\n\t\t\t&& diagnostic.category === PConst.DiagnosticCategory.error\n\t\t) {\n\t\t\treturn vscode.DiagnosticSeverity.Warning;\n\t\t}\n\n\t\tswitch (diagnostic.category) {\n\t\t\tcase PConst.DiagnosticCategory.error:\n\t\t\t\treturn vscode.DiagnosticSeverity.Error;\n\n\t\t\tcase PConst.DiagnosticCategory.warning:\n\t\t\t\treturn vscode.DiagnosticSeverity.Warning;\n\n\t\t\tcase PConst.DiagnosticCategory.suggestion:\n\t\t\t\treturn vscode.DiagnosticSeverity.Hint;\n\n\t\t\tdefault:\n\t\t\t\treturn vscode.DiagnosticSeverity.Error;\n\t\t}\n\t}\n\n\tprivate isStyleCheckDiagnostic(code: number | undefined): boolean {\n\t\treturn typeof code === 'number' && styleCheckDiagnostics.has(code);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { Disposable } from '../utils/dispose';\nimport * as fileSchemes from '../utils/fileSchemes';\nimport { isTypeScriptDocument } from '../utils/languageModeIds';\nimport { equals } from '../utils/objects';\nimport { ResourceMap } from '../utils/resourceMap';\n\ninterface FileConfiguration {\n\treadonly formatOptions: Proto.FormatCodeSettings;\n\treadonly preferences: Proto.UserPreferences;\n}\n\nfunction areFileConfigurationsEqual(a: FileConfiguration, b: FileConfiguration): boolean {\n\treturn equals(a, b);\n}\n\nexport default class FileConfigurationManager extends Disposable {\n\tprivate readonly formatOptions: ResourceMap<Promise<FileConfiguration | undefined>>;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis.formatOptions = new ResourceMap(undefined, { onCaseInsenitiveFileSystem });\n\t\tvscode.workspace.onDidCloseTextDocument(textDocument => {\n\t\t\t// When a document gets closed delete the cached formatting options.\n\t\t\t// This is necessary since the tsserver now closed a project when its\n\t\t\t// last file in it closes which drops the stored formatting options\n\t\t\t// as well.\n\t\t\tthis.formatOptions.delete(textDocument.uri);\n\t\t}, undefined, this._disposables);\n\t}\n\n\tpublic async ensureConfigurationForDocument(\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<void> {\n\t\tconst formattingOptions = this.getFormattingOptions(document);\n\t\tif (formattingOptions) {\n\t\t\treturn this.ensureConfigurationOptions(document, formattingOptions, token);\n\t\t}\n\t}\n\n\tprivate getFormattingOptions(\n\t\tdocument: vscode.TextDocument\n\t): vscode.FormattingOptions | undefined {\n\t\tconst editor = vscode.window.visibleTextEditors.find(editor => editor.document.fileName === document.fileName);\n\t\treturn editor\n\t\t\t? {\n\t\t\t\ttabSize: editor.options.tabSize,\n\t\t\t\tinsertSpaces: editor.options.insertSpaces\n\t\t\t} as vscode.FormattingOptions\n\t\t\t: undefined;\n\t}\n\n\tpublic async ensureConfigurationOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<void> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentOptions = this.getFileOptions(document, options);\n\t\tconst cachedOptions = this.formatOptions.get(document.uri);\n\t\tif (cachedOptions) {\n\t\t\tconst cachedOptionsValue = await cachedOptions;\n\t\t\tif (cachedOptionsValue && areFileConfigurationsEqual(cachedOptionsValue, currentOptions)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tlet resolve: (x: FileConfiguration | undefined) => void;\n\t\tthis.formatOptions.set(document.uri, new Promise<FileConfiguration | undefined>(r => resolve = r));\n\n\t\tconst args: Proto.ConfigureRequestArguments = {\n\t\t\tfile,\n\t\t\t...currentOptions,\n\t\t};\n\t\ttry {\n\t\t\tconst response = await this.client.execute('configure', args, token);\n\t\t\tresolve!(response.type === 'response' ? currentOptions : undefined);\n\t\t} finally {\n\t\t\tresolve!(undefined);\n\t\t}\n\t}\n\n\tpublic async setGlobalConfigurationFromDocument(\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<void> {\n\t\tconst formattingOptions = this.getFormattingOptions(document);\n\t\tif (!formattingOptions) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.ConfigureRequestArguments = {\n\t\t\tfile: undefined /*global*/,\n\t\t\t...this.getFileOptions(document, formattingOptions),\n\t\t};\n\t\tawait this.client.execute('configure', args, token);\n\t}\n\n\tpublic reset() {\n\t\tthis.formatOptions.clear();\n\t}\n\n\tprivate getFileOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: vscode.FormattingOptions\n\t): FileConfiguration {\n\t\treturn {\n\t\t\tformatOptions: this.getFormatOptions(document, options),\n\t\t\tpreferences: this.getPreferences(document)\n\t\t};\n\t}\n\n\tprivate getFormatOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: vscode.FormattingOptions\n\t): Proto.FormatCodeSettings {\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript.format' : 'javascript.format',\n\t\t\tdocument.uri);\n\n\t\treturn {\n\t\t\ttabSize: options.tabSize,\n\t\t\tindentSize: options.tabSize,\n\t\t\tconvertTabsToSpaces: options.insertSpaces,\n\t\t\t// We can use \\n here since the editor normalizes later on to its line endings.\n\t\t\tnewLineCharacter: '\\n',\n\t\t\tinsertSpaceAfterCommaDelimiter: config.get<boolean>('insertSpaceAfterCommaDelimiter'),\n\t\t\tinsertSpaceAfterConstructor: config.get<boolean>('insertSpaceAfterConstructor'),\n\t\t\tinsertSpaceAfterSemicolonInForStatements: config.get<boolean>('insertSpaceAfterSemicolonInForStatements'),\n\t\t\tinsertSpaceBeforeAndAfterBinaryOperators: config.get<boolean>('insertSpaceBeforeAndAfterBinaryOperators'),\n\t\t\tinsertSpaceAfterKeywordsInControlFlowStatements: config.get<boolean>('insertSpaceAfterKeywordsInControlFlowStatements'),\n\t\t\tinsertSpaceAfterFunctionKeywordForAnonymousFunctions: config.get<boolean>('insertSpaceAfterFunctionKeywordForAnonymousFunctions'),\n\t\t\tinsertSpaceBeforeFunctionParenthesis: config.get<boolean>('insertSpaceBeforeFunctionParenthesis'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingEmptyBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingEmptyBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces'),\n\t\t\tinsertSpaceAfterTypeAssertion: config.get<boolean>('insertSpaceAfterTypeAssertion'),\n\t\t\tplaceOpenBraceOnNewLineForFunctions: config.get<boolean>('placeOpenBraceOnNewLineForFunctions'),\n\t\t\tplaceOpenBraceOnNewLineForControlBlocks: config.get<boolean>('placeOpenBraceOnNewLineForControlBlocks'),\n\t\t\tsemicolons: config.get<Proto.SemicolonPreference>('semicolons'),\n\t\t};\n\t}\n\n\tprivate getPreferences(document: vscode.TextDocument): Proto.UserPreferences {\n\t\tif (this.client.apiVersion.lt(API.v290)) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript' : 'javascript',\n\t\t\tdocument.uri);\n\n\t\tconst preferencesConfig = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript.preferences' : 'javascript.preferences',\n\t\t\tdocument.uri);\n\n\t\tconst preferences: Proto.UserPreferences = {\n\t\t\tquotePreference: this.getQuoteStylePreference(preferencesConfig),\n\t\t\t// @ts-expect-error until TypeScript 4.2 API\n\t\t\timportModuleSpecifierPreference: getImportModuleSpecifierPreference(preferencesConfig),\n\t\t\timportModuleSpecifierEnding: getImportModuleSpecifierEndingPreference(preferencesConfig),\n\t\t\tallowTextChangesInNewFiles: document.uri.scheme === fileSchemes.file,\n\t\t\tprovidePrefixAndSuffixTextForRename: preferencesConfig.get<boolean>('renameShorthandProperties', true) === false ? false : preferencesConfig.get<boolean>('useAliasesForRenames', true),\n\t\t\tallowRenameOfImportPath: true,\n\t\t\tincludeAutomaticOptionalChainCompletions: config.get<boolean>('suggest.includeAutomaticOptionalChainCompletions', true),\n\t\t\tprovideRefactorNotApplicableReason: true,\n\t\t};\n\n\t\treturn preferences;\n\t}\n\n\tprivate getQuoteStylePreference(config: vscode.WorkspaceConfiguration) {\n\t\tswitch (config.get<string>('quoteStyle')) {\n\t\t\tcase 'single': return 'single';\n\t\t\tcase 'double': return 'double';\n\t\t\tdefault: return this.client.apiVersion.gte(API.v333) ? 'auto' : undefined;\n\t\t}\n\t}\n}\n\nfunction getImportModuleSpecifierPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('importModuleSpecifier')) {\n\t\tcase 'project-relative': return 'project-relative';\n\t\tcase 'relative': return 'relative';\n\t\tcase 'non-relative': return 'non-relative';\n\t\tdefault: return undefined;\n\t}\n}\n\nfunction getImportModuleSpecifierEndingPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('importModuleSpecifierEnding')) {\n\t\tcase 'minimal': return 'minimal';\n\t\tcase 'index': return 'index';\n\t\tcase 'js': return 'js';\n\t\tdefault: return 'auto';\n\t}\n}\n","exports = module.exports = SemVer;\n\n// The debug function is excluded entirely from the minified version.\n/* nomin */ var debug;\n/* nomin */ if (typeof process === 'object' &&\n    /* nomin */ process.env &&\n    /* nomin */ process.env.NODE_DEBUG &&\n    /* nomin */ /\\bsemver\\b/i.test(process.env.NODE_DEBUG))\n  /* nomin */ debug = function() {\n    /* nomin */ var args = Array.prototype.slice.call(arguments, 0);\n    /* nomin */ args.unshift('SEMVER');\n    /* nomin */ console.log.apply(console, args);\n    /* nomin */ };\n/* nomin */ else\n  /* nomin */ debug = function() {};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0';\n\nvar MAX_LENGTH = 256;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// The actual regexps go on exports.re\nvar re = exports.re = [];\nvar src = exports.src = [];\nvar R = 0;\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++;\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*';\nvar NUMERICIDENTIFIERLOOSE = R++;\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+';\n\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++;\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\n\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++;\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')';\n\nvar MAINVERSIONLOOSE = R++;\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')';\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++;\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')';\n\nvar PRERELEASEIDENTIFIERLOOSE = R++;\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')';\n\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++;\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))';\n\nvar PRERELEASELOOSE = R++;\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))';\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++;\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+';\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++;\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))';\n\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++;\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?';\n\nsrc[FULL] = '^' + FULLPLAIN + '$';\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?';\n\nvar LOOSE = R++;\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$';\n\nvar GTLT = R++;\nsrc[GTLT] = '((?:<|>)?=?)';\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++;\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*';\nvar XRANGEIDENTIFIER = R++;\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*';\n\nvar XRANGEPLAIN = R++;\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?';\n\nvar XRANGEPLAINLOOSE = R++;\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?';\n\nvar XRANGE = R++;\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$';\nvar XRANGELOOSE = R++;\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$';\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++;\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])';\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++;\nsrc[LONETILDE] = '(?:~>?)';\n\nvar TILDETRIM = R++;\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+';\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g');\nvar tildeTrimReplace = '$1~';\n\nvar TILDE = R++;\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$';\nvar TILDELOOSE = R++;\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$';\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++;\nsrc[LONECARET] = '(?:\\\\^)';\n\nvar CARETTRIM = R++;\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+';\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g');\nvar caretTrimReplace = '$1^';\n\nvar CARET = R++;\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$';\nvar CARETLOOSE = R++;\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$';\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++;\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$';\nvar COMPARATOR = R++;\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$';\n\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++;\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')';\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g');\nvar comparatorTrimReplace = '$1$2$3';\n\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++;\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$';\n\nvar HYPHENRANGELOOSE = R++;\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$';\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++;\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*';\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i]);\n  if (!re[i])\n    re[i] = new RegExp(src[i]);\n}\n\nexports.parse = parse;\nfunction parse(version, loose) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  if (version.length > MAX_LENGTH)\n    return null;\n\n  var r = loose ? re[LOOSE] : re[FULL];\n  if (!r.test(version))\n    return null;\n\n  try {\n    return new SemVer(version, loose);\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.valid = valid;\nfunction valid(version, loose) {\n  var v = parse(version, loose);\n  return v ? v.version : null;\n}\n\n\nexports.clean = clean;\nfunction clean(version, loose) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), loose);\n  return s ? s.version : null;\n}\n\nexports.SemVer = SemVer;\n\nfunction SemVer(version, loose) {\n  if (version instanceof SemVer) {\n    if (version.loose === loose)\n      return version;\n    else\n      version = version.version;\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version);\n  }\n\n  if (version.length > MAX_LENGTH)\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n\n  if (!(this instanceof SemVer))\n    return new SemVer(version, loose);\n\n  debug('SemVer', version, loose);\n  this.loose = loose;\n  var m = version.trim().match(loose ? re[LOOSE] : re[FULL]);\n\n  if (!m)\n    throw new TypeError('Invalid Version: ' + version);\n\n  this.raw = version;\n\n  // these are actually numbers\n  this.major = +m[1];\n  this.minor = +m[2];\n  this.patch = +m[3];\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0)\n    throw new TypeError('Invalid major version')\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0)\n    throw new TypeError('Invalid minor version')\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0)\n    throw new TypeError('Invalid patch version')\n\n  // numberify any prerelease numeric ids\n  if (!m[4])\n    this.prerelease = [];\n  else\n    this.prerelease = m[4].split('.').map(function(id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id;\n        if (num >= 0 && num < MAX_SAFE_INTEGER)\n          return num;\n      }\n      return id;\n    });\n\n  this.build = m[5] ? m[5].split('.') : [];\n  this.format();\n}\n\nSemVer.prototype.format = function() {\n  this.version = this.major + '.' + this.minor + '.' + this.patch;\n  if (this.prerelease.length)\n    this.version += '-' + this.prerelease.join('.');\n  return this.version;\n};\n\nSemVer.prototype.toString = function() {\n  return this.version;\n};\n\nSemVer.prototype.compare = function(other) {\n  debug('SemVer.compare', this.version, this.loose, other);\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return this.compareMain(other) || this.comparePre(other);\n};\n\nSemVer.prototype.compareMain = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch);\n};\n\nSemVer.prototype.comparePre = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length)\n    return -1;\n  else if (!this.prerelease.length && other.prerelease.length)\n    return 1;\n  else if (!this.prerelease.length && !other.prerelease.length)\n    return 0;\n\n  var i = 0;\n  do {\n    var a = this.prerelease[i];\n    var b = other.prerelease[i];\n    debug('prerelease compare', i, a, b);\n    if (a === undefined && b === undefined)\n      return 0;\n    else if (b === undefined)\n      return 1;\n    else if (a === undefined)\n      return -1;\n    else if (a === b)\n      continue;\n    else\n      return compareIdentifiers(a, b);\n  } while (++i);\n};\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function(release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor = 0;\n      this.major++;\n      this.inc('pre', identifier);\n      break;\n    case 'preminor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor++;\n      this.inc('pre', identifier);\n      break;\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0;\n      this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0)\n        this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0)\n        this.major++;\n      this.minor = 0;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0)\n        this.minor++;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0)\n        this.patch++;\n      this.prerelease = [];\n      break;\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0)\n        this.prerelease = [0];\n      else {\n        var i = this.prerelease.length;\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++;\n            i = -2;\n          }\n        }\n        if (i === -1) // didn't increment anything\n          this.prerelease.push(0);\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1]))\n            this.prerelease = [identifier, 0];\n        } else\n          this.prerelease = [identifier, 0];\n      }\n      break;\n\n    default:\n      throw new Error('invalid increment argument: ' + release);\n  }\n  this.format();\n  this.raw = this.version;\n  return this;\n};\n\nexports.inc = inc;\nfunction inc(version, release, loose, identifier) {\n  if (typeof(loose) === 'string') {\n    identifier = loose;\n    loose = undefined;\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version;\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.diff = diff;\nfunction diff(version1, version2) {\n  if (eq(version1, version2)) {\n    return null;\n  } else {\n    var v1 = parse(version1);\n    var v2 = parse(version2);\n    if (v1.prerelease.length || v2.prerelease.length) {\n      for (var key in v1) {\n        if (key === 'major' || key === 'minor' || key === 'patch') {\n          if (v1[key] !== v2[key]) {\n            return 'pre'+key;\n          }\n        }\n      }\n      return 'prerelease';\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return key;\n        }\n      }\n    }\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers;\n\nvar numeric = /^[0-9]+$/;\nfunction compareIdentifiers(a, b) {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return (anum && !bnum) ? -1 :\n         (bnum && !anum) ? 1 :\n         a < b ? -1 :\n         a > b ? 1 :\n         0;\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers;\nfunction rcompareIdentifiers(a, b) {\n  return compareIdentifiers(b, a);\n}\n\nexports.major = major;\nfunction major(a, loose) {\n  return new SemVer(a, loose).major;\n}\n\nexports.minor = minor;\nfunction minor(a, loose) {\n  return new SemVer(a, loose).minor;\n}\n\nexports.patch = patch;\nfunction patch(a, loose) {\n  return new SemVer(a, loose).patch;\n}\n\nexports.compare = compare;\nfunction compare(a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose));\n}\n\nexports.compareLoose = compareLoose;\nfunction compareLoose(a, b) {\n  return compare(a, b, true);\n}\n\nexports.rcompare = rcompare;\nfunction rcompare(a, b, loose) {\n  return compare(b, a, loose);\n}\n\nexports.sort = sort;\nfunction sort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.compare(a, b, loose);\n  });\n}\n\nexports.rsort = rsort;\nfunction rsort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.rcompare(a, b, loose);\n  });\n}\n\nexports.gt = gt;\nfunction gt(a, b, loose) {\n  return compare(a, b, loose) > 0;\n}\n\nexports.lt = lt;\nfunction lt(a, b, loose) {\n  return compare(a, b, loose) < 0;\n}\n\nexports.eq = eq;\nfunction eq(a, b, loose) {\n  return compare(a, b, loose) === 0;\n}\n\nexports.neq = neq;\nfunction neq(a, b, loose) {\n  return compare(a, b, loose) !== 0;\n}\n\nexports.gte = gte;\nfunction gte(a, b, loose) {\n  return compare(a, b, loose) >= 0;\n}\n\nexports.lte = lte;\nfunction lte(a, b, loose) {\n  return compare(a, b, loose) <= 0;\n}\n\nexports.cmp = cmp;\nfunction cmp(a, op, b, loose) {\n  var ret;\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a === b;\n      break;\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a !== b;\n      break;\n    case '': case '=': case '==': ret = eq(a, b, loose); break;\n    case '!=': ret = neq(a, b, loose); break;\n    case '>': ret = gt(a, b, loose); break;\n    case '>=': ret = gte(a, b, loose); break;\n    case '<': ret = lt(a, b, loose); break;\n    case '<=': ret = lte(a, b, loose); break;\n    default: throw new TypeError('Invalid operator: ' + op);\n  }\n  return ret;\n}\n\nexports.Comparator = Comparator;\nfunction Comparator(comp, loose) {\n  if (comp instanceof Comparator) {\n    if (comp.loose === loose)\n      return comp;\n    else\n      comp = comp.value;\n  }\n\n  if (!(this instanceof Comparator))\n    return new Comparator(comp, loose);\n\n  debug('comparator', comp, loose);\n  this.loose = loose;\n  this.parse(comp);\n\n  if (this.semver === ANY)\n    this.value = '';\n  else\n    this.value = this.operator + this.semver.version;\n\n  debug('comp', this);\n}\n\nvar ANY = {};\nComparator.prototype.parse = function(comp) {\n  var r = this.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var m = comp.match(r);\n\n  if (!m)\n    throw new TypeError('Invalid comparator: ' + comp);\n\n  this.operator = m[1];\n  if (this.operator === '=')\n    this.operator = '';\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2])\n    this.semver = ANY;\n  else\n    this.semver = new SemVer(m[2], this.loose);\n};\n\nComparator.prototype.toString = function() {\n  return this.value;\n};\n\nComparator.prototype.test = function(version) {\n  debug('Comparator.test', version, this.loose);\n\n  if (this.semver === ANY)\n    return true;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  return cmp(version, this.operator, this.semver, this.loose);\n};\n\nComparator.prototype.intersects = function(comp, loose) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required');\n  }\n\n  var rangeTmp;\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, loose);\n    return satisfies(this.value, rangeTmp, loose);\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, loose);\n    return satisfies(comp.semver, rangeTmp, loose);\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>');\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<');\n  var sameSemVer = this.semver.version === comp.semver.version;\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=');\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, loose) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'));\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, loose) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'));\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n};\n\n\nexports.Range = Range;\nfunction Range(range, loose) {\n  if (range instanceof Range) {\n    if (range.loose === loose) {\n      return range;\n    } else {\n      return new Range(range.raw, loose);\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, loose);\n  }\n\n  if (!(this instanceof Range))\n    return new Range(range, loose);\n\n  this.loose = loose;\n\n  // First, split based on boolean or ||\n  this.raw = range;\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function(range) {\n    return this.parseRange(range.trim());\n  }, this).filter(function(c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length;\n  });\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range);\n  }\n\n  this.format();\n}\n\nRange.prototype.format = function() {\n  this.range = this.set.map(function(comps) {\n    return comps.join(' ').trim();\n  }).join('||').trim();\n  return this.range;\n};\n\nRange.prototype.toString = function() {\n  return this.range;\n};\n\nRange.prototype.parseRange = function(range) {\n  var loose = this.loose;\n  range = range.trim();\n  debug('range', range, loose);\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];\n  range = range.replace(hr, hyphenReplace);\n  debug('hyphen replace', range);\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);\n  debug('comparator trim', range, re[COMPARATORTRIM]);\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace);\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace);\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ');\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var set = range.split(' ').map(function(comp) {\n    return parseComparator(comp, loose);\n  }).join(' ').split(/\\s+/);\n  if (this.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function(comp) {\n      return !!comp.match(compRe);\n    });\n  }\n  set = set.map(function(comp) {\n    return new Comparator(comp, loose);\n  });\n\n  return set;\n};\n\nRange.prototype.intersects = function(range, loose) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required');\n  }\n\n  return this.set.some(function(thisComparators) {\n    return thisComparators.every(function(thisComparator) {\n      return range.set.some(function(rangeComparators) {\n        return rangeComparators.every(function(rangeComparator) {\n          return thisComparator.intersects(rangeComparator, loose);\n        });\n      });\n    });\n  });\n};\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators;\nfunction toComparators(range, loose) {\n  return new Range(range, loose).set.map(function(comp) {\n    return comp.map(function(c) {\n      return c.value;\n    }).join(' ').trim().split(' ');\n  });\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator(comp, loose) {\n  debug('comp', comp);\n  comp = replaceCarets(comp, loose);\n  debug('caret', comp);\n  comp = replaceTildes(comp, loose);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, loose);\n  debug('xrange', comp);\n  comp = replaceStars(comp, loose);\n  debug('stars', comp);\n  return comp;\n}\n\nfunction isX(id) {\n  return !id || id.toLowerCase() === 'x' || id === '*';\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceTilde(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceTilde(comp, loose) {\n  var r = loose ? re[TILDELOOSE] : re[TILDE];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p))\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    else if (pr) {\n      debug('replaceTilde pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      ret = '>=' + M + '.' + m + '.' + p + pr +\n            ' <' + M + '.' + (+m + 1) + '.0';\n    } else\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0';\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceCaret(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceCaret(comp, loose) {\n  debug('caret', comp, loose);\n  var r = loose ? re[CARETLOOSE] : re[CARET];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p)) {\n      if (M === '0')\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n      else\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0';\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p + pr +\n              ' <' + (+M + 1) + '.0.0';\n    } else {\n      debug('no pr');\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0';\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n}\n\nfunction replaceXRanges(comp, loose) {\n  debug('replaceXRanges', comp, loose);\n  return comp.split(/\\s+/).map(function(comp) {\n    return replaceXRange(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceXRange(comp, loose) {\n  comp = comp.trim();\n  var r = loose ? re[XRANGELOOSE] : re[XRANGE];\n  return comp.replace(r, function(ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX)\n      gtlt = '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // replace X with 0\n      if (xm)\n        m = 0;\n      if (xp)\n        p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>=';\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else if (xp) {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n        if (xm)\n          M = +M + 1;\n        else\n          m = +m + 1;\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p;\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    }\n\n    debug('xRange return', ret);\n\n    return ret;\n  });\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars(comp, loose) {\n  debug('replaceStars', comp, loose);\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '');\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace($0,\n                       from, fM, fm, fp, fpr, fb,\n                       to, tM, tm, tp, tpr, tb) {\n\n  if (isX(fM))\n    from = '';\n  else if (isX(fm))\n    from = '>=' + fM + '.0.0';\n  else if (isX(fp))\n    from = '>=' + fM + '.' + fm + '.0';\n  else\n    from = '>=' + from;\n\n  if (isX(tM))\n    to = '';\n  else if (isX(tm))\n    to = '<' + (+tM + 1) + '.0.0';\n  else if (isX(tp))\n    to = '<' + tM + '.' + (+tm + 1) + '.0';\n  else if (tpr)\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr;\n  else\n    to = '<=' + to;\n\n  return (from + ' ' + to).trim();\n}\n\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function(version) {\n  if (!version)\n    return false;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version))\n      return true;\n  }\n  return false;\n};\n\nfunction testSet(set, version) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version))\n      return false;\n  }\n\n  if (version.prerelease.length) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var i = 0; i < set.length; i++) {\n      debug(set[i].semver);\n      if (set[i].semver === ANY)\n        continue;\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver;\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch)\n          return true;\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false;\n  }\n\n  return true;\n}\n\nexports.satisfies = satisfies;\nfunction satisfies(version, range, loose) {\n  try {\n    range = new Range(range, loose);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n}\n\nexports.maxSatisfying = maxSatisfying;\nfunction maxSatisfying(versions, range, loose) {\n  var max = null;\n  var maxSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!max || maxSV.compare(v) === -1) { // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer(max, loose);\n      }\n    }\n  })\n  return max;\n}\n\nexports.minSatisfying = minSatisfying;\nfunction minSatisfying(versions, range, loose) {\n  var min = null;\n  var minSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!min || minSV.compare(v) === 1) { // compare(min, v, true)\n        min = v;\n        minSV = new SemVer(min, loose);\n      }\n    }\n  })\n  return min;\n}\n\nexports.validRange = validRange;\nfunction validRange(range, loose) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, loose).range || '*';\n  } catch (er) {\n    return null;\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr;\nfunction ltr(version, range, loose) {\n  return outside(version, range, '<', loose);\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr;\nfunction gtr(version, range, loose) {\n  return outside(version, range, '>', loose);\n}\n\nexports.outside = outside;\nfunction outside(version, range, hilo, loose) {\n  version = new SemVer(version, loose);\n  range = new Range(range, loose);\n\n  var gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt;\n      ltefn = lte;\n      ltfn = lt;\n      comp = '>';\n      ecomp = '>=';\n      break;\n    case '<':\n      gtfn = lt;\n      ltefn = gte;\n      ltfn = gt;\n      comp = '<';\n      ecomp = '<=';\n      break;\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"');\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, loose)) {\n    return false;\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i];\n\n    var high = null;\n    var low = null;\n\n    comparators.forEach(function(comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, loose)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, loose)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false;\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false;\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexports.prerelease = prerelease;\nfunction prerelease(version, loose) {\n  var parsed = parse(version, loose);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null;\n}\n\nexports.intersects = intersects;\nfunction intersects(r1, r2, loose) {\n  r1 = new Range(r1, loose)\n  r2 = new Range(r2, loose)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce;\nfunction coerce(version) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  var match = version.match(re[COERCE]);\n\n  if (match == null)\n    return null;\n\n  return parse((match[1] || '0') + '.' + (match[2] || '0') + '.' + (match[3] || '0')); \n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from 'path';\nimport * as vscode from 'vscode';\nimport { DiagnosticKind } from './languageFeatures/diagnostics';\nimport FileConfigurationManager from './languageFeatures/fileConfigurationManager';\nimport { CachedResponse } from './tsServer/cachedResponse';\nimport TypeScriptServiceClient from './typescriptServiceClient';\nimport { CommandManager } from './commands/commandManager';\nimport { Disposable } from './utils/dispose';\nimport { DocumentSelector } from './utils/documentSelector';\nimport * as fileSchemes from './utils/fileSchemes';\nimport { LanguageDescription } from './utils/languageDescription';\nimport { TelemetryReporter } from './utils/telemetry';\nimport TypingsStatus from './utils/typingsStatus';\n\n\nconst validateSetting = 'validate.enable';\nconst suggestionSetting = 'suggestionActions.enabled';\n\nexport default class LanguageProvider extends Disposable {\n\n\tconstructor(\n\t\tprivate readonly client: TypeScriptServiceClient,\n\t\tprivate readonly description: LanguageDescription,\n\t\tprivate readonly commandManager: CommandManager,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t\tprivate readonly typingsStatus: TypingsStatus,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tprivate readonly onCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t) {\n\t\tsuper();\n\t\tvscode.workspace.onDidChangeConfiguration(this.configurationChanged, this, this._disposables);\n\t\tthis.configurationChanged();\n\n\t\tclient.onReady(() => this.registerProviders());\n\t}\n\n\tprivate get documentSelector(): DocumentSelector {\n\t\tconst semantic: vscode.DocumentFilter[] = [];\n\t\tconst syntax: vscode.DocumentFilter[] = [];\n\t\tfor (const language of this.description.modeIds) {\n\t\t\tsyntax.push({ language });\n\t\t\tfor (const scheme of fileSchemes.semanticSupportedSchemes) {\n\t\t\t\tsemantic.push({ language, scheme });\n\t\t\t}\n\t\t}\n\n\t\treturn { semantic, syntax };\n\t}\n\n\tprivate async registerProviders(): Promise<void> {\n\t\tconst selector = this.documentSelector;\n\n\t\tconst cachedResponse = new CachedResponse();\n\n\t\tawait Promise.all([\n\t\t\timport('./languageFeatures/callHierarchy').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/codeLens/implementationsCodeLens').then(provider => this._register(provider.register(selector, this.description.id, this.client, cachedResponse))),\n\t\t\timport('./languageFeatures/codeLens/referencesCodeLens').then(provider => this._register(provider.register(selector, this.description.id, this.client, cachedResponse))),\n\t\t\timport('./languageFeatures/completions').then(provider => this._register(provider.register(selector, this.description.id, this.client, this.typingsStatus, this.fileConfigurationManager, this.commandManager, this.telemetryReporter, this.onCompletionAccepted))),\n\t\t\timport('./languageFeatures/definitions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/directiveCommentCompletions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/documentHighlight').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/documentSymbol').then(provider => this._register(provider.register(selector, this.client, cachedResponse))),\n\t\t\timport('./languageFeatures/fileReferences').then(provider => this._register(provider.register(this.client, this.commandManager))),\n\t\t\timport('./languageFeatures/fixAll').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.client.diagnosticsManager))),\n\t\t\timport('./languageFeatures/folding').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/formatting').then(provider => this._register(provider.register(selector, this.description.id, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/hover').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/implementations').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/jsDocCompletions').then(provider => this._register(provider.register(selector, this.description.id, this.client))),\n\t\t\timport('./languageFeatures/organizeImports').then(provider => this._register(provider.register(selector, this.client, this.commandManager, this.fileConfigurationManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/quickFix').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.commandManager, this.client.diagnosticsManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/refactor').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.commandManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/references').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/rename').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/semanticTokens').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/signatureHelp').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/smartSelect').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/tagClosing').then(provider => this._register(provider.register(selector, this.description.id, this.client))),\n\t\t\timport('./languageFeatures/typeDefinitions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t]);\n\t}\n\n\tprivate configurationChanged(): void {\n\t\tconst config = vscode.workspace.getConfiguration(this.id, null);\n\t\tthis.updateValidate(config.get(validateSetting, true));\n\t\tthis.updateSuggestionDiagnostics(config.get(suggestionSetting, true));\n\t}\n\n\tpublic handles(resource: vscode.Uri, doc: vscode.TextDocument): boolean {\n\t\tif (doc && this.description.modeIds.indexOf(doc.languageId) >= 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst base = basename(resource.fsPath);\n\t\treturn !!base && (!!this.description.configFilePattern && this.description.configFilePattern.test(base));\n\t}\n\n\tprivate get id(): string {\n\t\treturn this.description.id;\n\t}\n\n\tpublic get diagnosticSource(): string {\n\t\treturn this.description.diagnosticSource;\n\t}\n\n\tprivate updateValidate(value: boolean) {\n\t\tthis.client.diagnosticsManager.setValidate(this._diagnosticLanguage, value);\n\t}\n\n\tprivate updateSuggestionDiagnostics(value: boolean) {\n\t\tthis.client.diagnosticsManager.setEnableSuggestions(this._diagnosticLanguage, value);\n\t}\n\n\tpublic reInitialize(): void {\n\t\tthis.client.diagnosticsManager.reInitialize();\n\t}\n\n\tpublic triggerAllDiagnostics(): void {\n\t\tthis.client.bufferSyncSupport.requestAllDiagnostics();\n\t}\n\n\tpublic diagnosticsReceived(diagnosticsKind: DiagnosticKind, file: vscode.Uri, diagnostics: (vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any })[]): void {\n\t\tconst config = vscode.workspace.getConfiguration(this.id, file);\n\t\tconst reportUnnecessary = config.get<boolean>('showUnused', true);\n\t\tconst reportDeprecated = config.get<boolean>('showDeprecated', true);\n\t\tthis.client.diagnosticsManager.updateDiagnostics(file, this._diagnosticLanguage, diagnosticsKind, diagnostics.filter(diag => {\n\t\t\t// Don't both reporting diagnostics we know will not be rendered\n\t\t\tif (!reportUnnecessary) {\n\t\t\t\tif (diag.reportUnnecessary && diag.severity === vscode.DiagnosticSeverity.Hint) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!reportDeprecated) {\n\t\t\t\tif (diag.reportDeprecated && diag.severity === vscode.DiagnosticSeverity.Hint) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}));\n\t}\n\n\tpublic configFileDiagnosticsReceived(file: vscode.Uri, diagnostics: vscode.Diagnostic[]): void {\n\t\tthis.client.diagnosticsManager.configFileDiagnosticsReceived(file, diagnostics);\n\t}\n\n\tprivate get _diagnosticLanguage() {\n\t\treturn this.description.diagnosticLanguage;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ServerResponse } from '../typescriptService';\n\ntype Resolve<T extends Proto.Response> = () => Promise<ServerResponse.Response<T>>;\n\n/**\n * Caches a class of TS Server request based on document.\n */\nexport class CachedResponse<T extends Proto.Response> {\n\tprivate response?: Promise<ServerResponse.Response<T>>;\n\tprivate version: number = -1;\n\tprivate document: string = '';\n\n\t/**\n\t * Execute a request. May return cached value or resolve the new value\n\t *\n\t * Caller must ensure that all input `resolve` functions return equivilent results (keyed only off of document).\n\t */\n\tpublic execute(\n\t\tdocument: vscode.TextDocument,\n\t\tresolve: Resolve<T>\n\t): Promise<ServerResponse.Response<T>> {\n\t\tif (this.response && this.matches(document)) {\n\t\t\t// Chain so that on cancellation we fall back to the next resolve\n\t\t\treturn this.response = this.response.then(result => result.type === 'cancelled' ? resolve() : result);\n\t\t}\n\t\treturn this.reset(document, resolve);\n\t}\n\n\tprivate matches(document: vscode.TextDocument): boolean {\n\t\treturn this.version === document.version && this.document === document.uri.toString();\n\t}\n\n\tprivate async reset(\n\t\tdocument: vscode.TextDocument,\n\t\tresolve: Resolve<T>\n\t): Promise<ServerResponse.Response<T>> {\n\t\tthis.version = document.version;\n\t\tthis.document = document.uri.toString();\n\t\treturn this.response = resolve();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireSomeCapability, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport { parseKindModifier } from '../utils/modifiers';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptCallHierarchySupport implements vscode.CallHierarchyProvider {\n\tpublic static readonly minVersion = API.v380;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async prepareCallHierarchy(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.CallHierarchyItem | vscode.CallHierarchyItem[] | undefined> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('prepareCallHierarchy', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn Array.isArray(response.body)\n\t\t\t? response.body.map(fromProtocolCallHierarchyItem)\n\t\t\t: fromProtocolCallHierarchyItem(response.body);\n\t}\n\n\tpublic async provideCallHierarchyIncomingCalls(item: vscode.CallHierarchyItem, token: vscode.CancellationToken): Promise<vscode.CallHierarchyIncomingCall[] | undefined> {\n\t\tconst filepath = this.client.toPath(item.uri);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, item.selectionRange.start);\n\t\tconst response = await this.client.execute('provideCallHierarchyIncomingCalls', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(fromProtocolCallHierchyIncomingCall);\n\t}\n\n\tpublic async provideCallHierarchyOutgoingCalls(item: vscode.CallHierarchyItem, token: vscode.CancellationToken): Promise<vscode.CallHierarchyOutgoingCall[] | undefined> {\n\t\tconst filepath = this.client.toPath(item.uri);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, item.selectionRange.start);\n\t\tconst response = await this.client.execute('provideCallHierarchyOutgoingCalls', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(fromProtocolCallHierchyOutgoingCall);\n\t}\n}\n\nfunction isSourceFileItem(item: Proto.CallHierarchyItem) {\n\treturn item.kind === PConst.Kind.script || item.kind === PConst.Kind.module && item.selectionSpan.start.line === 1 && item.selectionSpan.start.offset === 1;\n}\n\nfunction fromProtocolCallHierarchyItem(item: Proto.CallHierarchyItem): vscode.CallHierarchyItem {\n\tconst useFileName = isSourceFileItem(item);\n\tconst name = useFileName ? path.basename(item.file) : item.name;\n\tconst detail = useFileName ? vscode.workspace.asRelativePath(path.dirname(item.file)) : item.containerName ?? '';\n\tconst result = new vscode.CallHierarchyItem(\n\t\ttypeConverters.SymbolKind.fromProtocolScriptElementKind(item.kind),\n\t\tname,\n\t\tdetail,\n\t\tvscode.Uri.file(item.file),\n\t\ttypeConverters.Range.fromTextSpan(item.span),\n\t\ttypeConverters.Range.fromTextSpan(item.selectionSpan)\n\t);\n\n\tconst kindModifiers = item.kindModifiers ? parseKindModifier(item.kindModifiers) : undefined;\n\tif (kindModifiers?.has(PConst.KindModifiers.depreacted)) {\n\t\tresult.tags = [vscode.SymbolTag.Deprecated];\n\t}\n\treturn result;\n}\n\nfunction fromProtocolCallHierchyIncomingCall(item: Proto.CallHierarchyIncomingCall): vscode.CallHierarchyIncomingCall {\n\treturn new vscode.CallHierarchyIncomingCall(\n\t\tfromProtocolCallHierarchyItem(item.from),\n\t\titem.fromSpans.map(typeConverters.Range.fromTextSpan)\n\t);\n}\n\nfunction fromProtocolCallHierchyOutgoingCall(item: Proto.CallHierarchyOutgoingCall): vscode.CallHierarchyOutgoingCall {\n\treturn new vscode.CallHierarchyOutgoingCall(\n\t\tfromProtocolCallHierarchyItem(item.to),\n\t\titem.fromSpans.map(typeConverters.Range.fromTextSpan)\n\t);\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TypeScriptCallHierarchySupport.minVersion),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCallHierarchyProvider(selector.semantic,\n\t\t\tnew TypeScriptCallHierarchySupport(client));\n\t});\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function escapeRegExp(text: string) {\n\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from '../protocol';\nimport { ServerResponse } from '../typescriptService';\n\nexport interface CallbackItem<R> {\n\treadonly onSuccess: (value: R) => void;\n\treadonly onError: (err: Error) => void;\n\treadonly queuingStartTime: number;\n\treadonly isAsync: boolean;\n}\n\nexport class CallbackMap<R extends Proto.Response> {\n\tprivate readonly _callbacks = new Map<number, CallbackItem<ServerResponse.Response<R> | undefined>>();\n\tprivate readonly _asyncCallbacks = new Map<number, CallbackItem<ServerResponse.Response<R> | undefined>>();\n\n\tpublic destroy(cause: string): void {\n\t\tconst cancellation = new ServerResponse.Cancelled(cause);\n\t\tfor (const callback of this._callbacks.values()) {\n\t\t\tcallback.onSuccess(cancellation);\n\t\t}\n\t\tthis._callbacks.clear();\n\t\tfor (const callback of this._asyncCallbacks.values()) {\n\t\t\tcallback.onSuccess(cancellation);\n\t\t}\n\t\tthis._asyncCallbacks.clear();\n\t}\n\n\tpublic add(seq: number, callback: CallbackItem<ServerResponse.Response<R> | undefined>, isAsync: boolean) {\n\t\tif (isAsync) {\n\t\t\tthis._asyncCallbacks.set(seq, callback);\n\t\t} else {\n\t\t\tthis._callbacks.set(seq, callback);\n\t\t}\n\t}\n\n\tpublic fetch(seq: number): CallbackItem<ServerResponse.Response<R> | undefined> | undefined {\n\t\tconst callback = this._callbacks.get(seq) || this._asyncCallbacks.get(seq);\n\t\tthis.delete(seq);\n\t\treturn callback;\n\t}\n\n\tprivate delete(seq: number) {\n\t\tif (!this._callbacks.delete(seq)) {\n\t\t\tthis._asyncCallbacks.delete(seq);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from '../protocol';\n\nexport enum RequestQueueingType {\n\t/**\n\t * Normal request that is executed in order.\n\t */\n\tNormal = 1,\n\n\t/**\n\t * Request that normal requests jump in front of in the queue.\n\t */\n\tLowPriority = 2,\n\n\t/**\n\t * A fence that blocks request reordering.\n\t *\n\t * Fences are not reordered. Unlike a normal request, a fence will never jump in front of a low priority request\n\t * in the request queue.\n\t */\n\tFence = 3,\n}\n\nexport interface RequestItem {\n\treadonly request: Proto.Request;\n\treadonly expectsResponse: boolean;\n\treadonly isAsync: boolean;\n\treadonly queueingType: RequestQueueingType;\n}\n\nexport class RequestQueue {\n\tprivate readonly queue: RequestItem[] = [];\n\tprivate sequenceNumber: number = 0;\n\n\tpublic get length(): number {\n\t\treturn this.queue.length;\n\t}\n\n\tpublic enqueue(item: RequestItem): void {\n\t\tif (item.queueingType === RequestQueueingType.Normal) {\n\t\t\tlet index = this.queue.length - 1;\n\t\t\twhile (index >= 0) {\n\t\t\t\tif (this.queue[index].queueingType !== RequestQueueingType.LowPriority) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t--index;\n\t\t\t}\n\t\t\tthis.queue.splice(index + 1, 0, item);\n\t\t} else {\n\t\t\t// Only normal priority requests can be reordered. All other requests just go to the end.\n\t\t\tthis.queue.push(item);\n\t\t}\n\t}\n\n\tpublic dequeue(): RequestItem | undefined {\n\t\treturn this.queue.shift();\n\t}\n\n\tpublic tryDeletePendingRequest(seq: number): boolean {\n\t\tfor (let i = 0; i < this.queue.length; i++) {\n\t\t\tif (this.queue[i].request.seq === seq) {\n\t\t\t\tthis.queue.splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic createRequest(command: string, args: any): Proto.Request {\n\t\treturn {\n\t\t\tseq: this.sequenceNumber++,\n\t\t\ttype: 'request',\n\t\t\tcommand: command,\n\t\t\targuments: args\n\t\t};\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\n\nexport function snippetForFunctionCall(\n\titem: { insertText?: string | vscode.SnippetString; label: string; },\n\tdisplayParts: ReadonlyArray<Proto.SymbolDisplayPart>\n): { snippet: vscode.SnippetString, parameterCount: number } {\n\tif (item.insertText && typeof item.insertText !== 'string') {\n\t\treturn { snippet: item.insertText, parameterCount: 0 };\n\t}\n\n\tconst parameterListParts = getParameterListParts(displayParts);\n\tconst snippet = new vscode.SnippetString();\n\tsnippet.appendText(`${item.insertText || item.label}(`);\n\tappendJoinedPlaceholders(snippet, parameterListParts.parts, ', ');\n\tif (parameterListParts.hasOptionalParameters) {\n\t\tsnippet.appendTabstop();\n\t}\n\tsnippet.appendText(')');\n\tsnippet.appendTabstop(0);\n\treturn { snippet, parameterCount: parameterListParts.parts.length + (parameterListParts.hasOptionalParameters ? 1 : 0) };\n}\n\nfunction appendJoinedPlaceholders(\n\tsnippet: vscode.SnippetString,\n\tparts: ReadonlyArray<Proto.SymbolDisplayPart>,\n\tjoiner: string\n) {\n\tfor (let i = 0; i < parts.length; ++i) {\n\t\tconst paramterPart = parts[i];\n\t\tsnippet.appendPlaceholder(paramterPart.text);\n\t\tif (i !== parts.length - 1) {\n\t\t\tsnippet.appendText(joiner);\n\t\t}\n\t}\n}\n\ninterface ParamterListParts {\n\treadonly parts: ReadonlyArray<Proto.SymbolDisplayPart>;\n\treadonly hasOptionalParameters: boolean;\n}\n\nfunction getParameterListParts(\n\tdisplayParts: ReadonlyArray<Proto.SymbolDisplayPart>\n): ParamterListParts {\n\tconst parts: Proto.SymbolDisplayPart[] = [];\n\tlet isInMethod = false;\n\tlet hasOptionalParameters = false;\n\tlet parenCount = 0;\n\tlet braceCount = 0;\n\n\touter: for (let i = 0; i < displayParts.length; ++i) {\n\t\tconst part = displayParts[i];\n\t\tswitch (part.kind) {\n\t\t\tcase PConst.DisplayPartKind.methodName:\n\t\t\tcase PConst.DisplayPartKind.functionName:\n\t\t\tcase PConst.DisplayPartKind.text:\n\t\t\tcase PConst.DisplayPartKind.propertyName:\n\t\t\t\tif (parenCount === 0 && braceCount === 0) {\n\t\t\t\t\tisInMethod = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.DisplayPartKind.parameterName:\n\t\t\t\tif (parenCount === 1 && braceCount === 0 && isInMethod) {\n\t\t\t\t\t// Only take top level paren names\n\t\t\t\t\tconst next = displayParts[i + 1];\n\t\t\t\t\t// Skip optional parameters\n\t\t\t\t\tconst nameIsFollowedByOptionalIndicator = next && next.text === '?';\n\t\t\t\t\t// Skip this parameter\n\t\t\t\t\tconst nameIsThis = part.text === 'this';\n\t\t\t\t\tif (!nameIsFollowedByOptionalIndicator && !nameIsThis) {\n\t\t\t\t\t\tparts.push(part);\n\t\t\t\t\t}\n\t\t\t\t\thasOptionalParameters = hasOptionalParameters || nameIsFollowedByOptionalIndicator;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.DisplayPartKind.punctuation:\n\t\t\t\tif (part.text === '(') {\n\t\t\t\t\t++parenCount;\n\t\t\t\t} else if (part.text === ')') {\n\t\t\t\t\t--parenCount;\n\t\t\t\t\tif (parenCount <= 0 && isInMethod) {\n\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t}\n\t\t\t\t} else if (part.text === '...' && parenCount === 1) {\n\t\t\t\t\t// Found rest parmeter. Do not fill in any further arguments\n\t\t\t\t\thasOptionalParameters = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t} else if (part.text === '{') {\n\t\t\t\t\t++braceCount;\n\t\t\t\t} else if (part.text === '}') {\n\t\t\t\t\t--braceCount;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn { hasOptionalParameters, parts };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\nimport DefinitionProviderBase from './definitionProviderBase';\n\nexport default class TypeScriptDefinitionProvider extends DefinitionProviderBase implements vscode.DefinitionProvider {\n\tconstructor(\n\t\tclient: ITypeScriptServiceClient\n\t) {\n\t\tsuper(client);\n\t}\n\n\tpublic async provideDefinition(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.DefinitionLink[] | vscode.Definition | undefined> {\n\t\tif (this.client.apiVersion.gte(API.v270)) {\n\t\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\t\tif (!filepath) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\tconst response = await this.client.execute('definitionAndBoundSpan', args, token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst span = response.body.textSpan ? typeConverters.Range.fromTextSpan(response.body.textSpan) : undefined;\n\t\t\treturn response.body.definitions\n\t\t\t\t.map((location): vscode.DefinitionLink => {\n\t\t\t\t\tconst target = typeConverters.Location.fromTextSpan(this.client.toResource(location.file), location);\n\t\t\t\t\tif (location.contextStart && location.contextEnd) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\toriginSelectionRange: span,\n\t\t\t\t\t\t\ttargetRange: typeConverters.Range.fromLocations(location.contextStart, location.contextEnd),\n\t\t\t\t\t\t\ttargetUri: target.uri,\n\t\t\t\t\t\t\ttargetSelectionRange: target.range,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\toriginSelectionRange: span,\n\t\t\t\t\t\ttargetRange: target.range,\n\t\t\t\t\t\ttargetUri: target.uri\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.getSymbolLocations('definition', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerDefinitionProvider(selector.syntax,\n\t\t\tnew TypeScriptDefinitionProvider(client));\n\t});\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { flatten } from '../utils/arrays';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptDocumentHighlightProvider implements vscode.DocumentHighlightProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideDocumentHighlights(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.DocumentHighlight[]> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tfilesToSearch: [file]\n\t\t};\n\t\tconst response = await this.client.execute('documentHighlights', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn flatten(\n\t\t\tresponse.body\n\t\t\t\t.filter(highlight => highlight.file === file)\n\t\t\t\t.map(convertDocumentHighlight));\n\t}\n}\n\nfunction convertDocumentHighlight(highlight: Proto.DocumentHighlightsItem): ReadonlyArray<vscode.DocumentHighlight> {\n\treturn highlight.highlightSpans.map(span =>\n\t\tnew vscode.DocumentHighlight(\n\t\t\ttypeConverters.Range.fromTextSpan(span),\n\t\t\tspan.kind === 'writtenReference' ? vscode.DocumentHighlightKind.Write : vscode.DocumentHighlightKind.Read));\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn vscode.languages.registerDocumentHighlightProvider(selector.syntax,\n\t\tnew TypeScriptDocumentHighlightProvider(client));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { CachedResponse } from '../tsServer/cachedResponse';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport { parseKindModifier } from '../utils/modifiers';\nimport * as typeConverters from '../utils/typeConverters';\n\nconst getSymbolKind = (kind: string): vscode.SymbolKind => {\n\tswitch (kind) {\n\t\tcase PConst.Kind.module: return vscode.SymbolKind.Module;\n\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.const: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.localVariable: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.localFunction: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.constructSignature: return vscode.SymbolKind.Constructor;\n\t\tcase PConst.Kind.constructorImplementation: return vscode.SymbolKind.Constructor;\n\t}\n\treturn vscode.SymbolKind.Variable;\n};\n\nclass TypeScriptDocumentSymbolProvider implements vscode.DocumentSymbolProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate cachedResponse: CachedResponse<Proto.NavTreeResponse>,\n\t) { }\n\n\tpublic async provideDocumentSymbols(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.DocumentSymbol[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.FileRequestArgs = { file };\n\t\tconst response = await this.cachedResponse.execute(document, () => this.client.execute('navtree', args, token));\n\t\tif (response.type !== 'response' || !response.body?.childItems) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// The root represents the file. Ignore this when showing in the UI\n\t\tconst result: vscode.DocumentSymbol[] = [];\n\t\tfor (const item of response.body.childItems) {\n\t\t\tTypeScriptDocumentSymbolProvider.convertNavTree(document.uri, result, item);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate static convertNavTree(\n\t\tresource: vscode.Uri,\n\t\toutput: vscode.DocumentSymbol[],\n\t\titem: Proto.NavigationTree,\n\t): boolean {\n\t\tlet shouldInclude = TypeScriptDocumentSymbolProvider.shouldInclueEntry(item);\n\t\tif (!shouldInclude && !item.childItems?.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst children = new Set(item.childItems || []);\n\t\tfor (const span of item.spans) {\n\t\t\tconst range = typeConverters.Range.fromTextSpan(span);\n\t\t\tconst symbolInfo = TypeScriptDocumentSymbolProvider.convertSymbol(item, range);\n\n\t\t\tfor (const child of children) {\n\t\t\t\tif (child.spans.some(span => !!range.intersection(typeConverters.Range.fromTextSpan(span)))) {\n\t\t\t\t\tconst includedChild = TypeScriptDocumentSymbolProvider.convertNavTree(resource, symbolInfo.children, child);\n\t\t\t\t\tshouldInclude = shouldInclude || includedChild;\n\t\t\t\t\tchildren.delete(child);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (shouldInclude) {\n\t\t\t\toutput.push(symbolInfo);\n\t\t\t}\n\t\t}\n\n\t\treturn shouldInclude;\n\t}\n\n\tprivate static convertSymbol(item: Proto.NavigationTree, range: vscode.Range): vscode.DocumentSymbol {\n\t\tconst selectionRange = item.nameSpan ? typeConverters.Range.fromTextSpan(item.nameSpan) : range;\n\t\tlet label = item.text;\n\n\t\tswitch (item.kind) {\n\t\t\tcase PConst.Kind.memberGetAccessor: label = `(get) ${label}`; break;\n\t\t\tcase PConst.Kind.memberSetAccessor: label = `(set) ${label}`; break;\n\t\t}\n\n\t\tconst symbolInfo = new vscode.DocumentSymbol(\n\t\t\tlabel,\n\t\t\t'',\n\t\t\tgetSymbolKind(item.kind),\n\t\t\trange,\n\t\t\trange.contains(selectionRange) ? selectionRange : range);\n\n\n\t\tconst kindModifiers = parseKindModifier(item.kindModifiers);\n\t\tif (kindModifiers.has(PConst.KindModifiers.depreacted)) {\n\t\t\tsymbolInfo.tags = [vscode.SymbolTag.Deprecated];\n\t\t}\n\n\t\treturn symbolInfo;\n\t}\n\n\tprivate static shouldInclueEntry(item: Proto.NavigationTree | Proto.NavigationBarItem): boolean {\n\t\tif (item.kind === PConst.Kind.alias) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!(item.text && item.text !== '<function>' && item.text !== '<class>');\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tcachedResponse: CachedResponse<Proto.NavTreeResponse>,\n) {\n\treturn vscode.languages.registerDocumentSymbolProvider(selector.syntax,\n\t\tnew TypeScriptDocumentSymbolProvider(client, cachedResponse), { label: 'TypeScript' });\n}\n",null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { coalesce } from '../utils/arrays';\nimport { conditionalRegistration, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptFoldingProvider implements vscode.FoldingRangeProvider {\n\tpublic static readonly minVersion = API.v280;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tasync provideFoldingRanges(\n\t\tdocument: vscode.TextDocument,\n\t\t_context: vscode.FoldingContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.FoldingRange[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.FileRequestArgs = { file };\n\t\tconst response = await this.client.execute('getOutliningSpans', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn coalesce(response.body.map(span => this.convertOutliningSpan(span, document)));\n\t}\n\n\tprivate convertOutliningSpan(\n\t\tspan: Proto.OutliningSpan,\n\t\tdocument: vscode.TextDocument\n\t): vscode.FoldingRange | undefined {\n\t\tconst range = typeConverters.Range.fromTextSpan(span.textSpan);\n\t\tconst kind = TypeScriptFoldingProvider.getFoldingRangeKind(span);\n\n\t\t// Workaround for #49904\n\t\tif (span.kind === 'comment') {\n\t\t\tconst line = document.lineAt(range.start.line).text;\n\t\t\tif (line.match(/\\/\\/\\s*#endregion/gi)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst start = range.start.line;\n\t\tconst end = this.adjustFoldingEnd(range, document);\n\t\treturn new vscode.FoldingRange(start, end, kind);\n\t}\n\n\tprivate static readonly foldEndPairCharacters = ['}', ']', ')', '`'];\n\n\tprivate adjustFoldingEnd(range: vscode.Range, document: vscode.TextDocument) {\n\t\t// workaround for #47240\n\t\tif (range.end.character > 0) {\n\t\t\tconst foldEndCharacter = document.getText(new vscode.Range(range.end.translate(0, -1), range.end));\n\t\t\tif (TypeScriptFoldingProvider.foldEndPairCharacters.includes(foldEndCharacter)) {\n\t\t\t\treturn Math.max(range.end.line - 1, range.start.line);\n\t\t\t}\n\t\t}\n\n\t\treturn range.end.line;\n\t}\n\n\tprivate static getFoldingRangeKind(span: Proto.OutliningSpan): vscode.FoldingRangeKind | undefined {\n\t\tswitch (span.kind) {\n\t\t\tcase 'comment': return vscode.FoldingRangeKind.Comment;\n\t\t\tcase 'region': return vscode.FoldingRangeKind.Region;\n\t\t\tcase 'imports': return vscode.FoldingRangeKind.Imports;\n\t\t\tcase 'code':\n\t\t\tdefault: return undefined;\n\t\t}\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n): vscode.Disposable {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TypeScriptFoldingProvider.minVersion),\n\t], () => {\n\t\treturn vscode.languages.registerFoldingRangeProvider(selector.syntax,\n\t\t\tnew TypeScriptFoldingProvider(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireConfiguration } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\nimport FileConfigurationManager from './fileConfigurationManager';\n\nclass TypeScriptFormattingProvider implements vscode.DocumentRangeFormattingEditProvider, vscode.OnTypeFormattingEditProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly formattingOptionsManager: FileConfigurationManager\n\t) { }\n\n\tpublic async provideDocumentRangeFormattingEdits(\n\t\tdocument: vscode.TextDocument,\n\t\trange: vscode.Range,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.TextEdit[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tawait this.formattingOptionsManager.ensureConfigurationOptions(document, options, token);\n\n\t\tconst args = typeConverters.Range.toFormattingRequestArgs(file, range);\n\t\tconst response = await this.client.execute('format', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(typeConverters.TextEdit.fromCodeEdit);\n\t}\n\n\tpublic async provideOnTypeFormattingEdits(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\tch: string,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.TextEdit[]> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tawait this.formattingOptionsManager.ensureConfigurationOptions(document, options, token);\n\n\t\tconst args: Proto.FormatOnKeyRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tkey: ch\n\t\t};\n\t\tconst response = await this.client.execute('formatonkey', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result: vscode.TextEdit[] = [];\n\t\tfor (const edit of response.body) {\n\t\t\tconst textEdit = typeConverters.TextEdit.fromCodeEdit(edit);\n\t\t\tconst range = textEdit.range;\n\t\t\t// Work around for https://github.com/microsoft/TypeScript/issues/6700.\n\t\t\t// Check if we have an edit at the beginning of the line which only removes white spaces and leaves\n\t\t\t// an empty line. Drop those edits\n\t\t\tif (range.start.character === 0 && range.start.line === range.end.line && textEdit.newText === '') {\n\t\t\t\tconst lText = document.lineAt(range.start.line).text;\n\t\t\t\t// If the edit leaves something on the line keep the edit (note that the end character is exclusive).\n\t\t\t\t// Keep it also if it removes something else than whitespace\n\t\t\t\tif (lText.trim().length > 0 || lText.length > range.end.character) {\n\t\t\t\t\tresult.push(textEdit);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.push(textEdit);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tmodeId: string,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager\n) {\n\treturn conditionalRegistration([\n\t\trequireConfiguration(modeId, 'format.enable'),\n\t], () => {\n\t\tconst formattingProvider = new TypeScriptFormattingProvider(client, fileConfigurationManager);\n\t\treturn vscode.Disposable.from(\n\t\t\tvscode.languages.registerOnTypeFormattingEditProvider(selector.syntax, formattingProvider, ';', '}', '\\n'),\n\t\t\tvscode.languages.registerDocumentRangeFormattingEditProvider(selector.syntax, formattingProvider),\n\t\t);\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { localize } from '../tsServer/versionProvider';\nimport { ClientCapability, ITypeScriptServiceClient, ServerType } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport { markdownDocumentation } from '../utils/previewer';\nimport * as typeConverters from '../utils/typeConverters';\n\n\nclass TypeScriptHoverProvider implements vscode.HoverProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideHover(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Hover | undefined> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.interruptGetErr(() => this.client.execute('quickinfo', args, token));\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn new vscode.Hover(\n\t\t\tthis.getContents(document.uri, response.body, response._serverType),\n\t\t\ttypeConverters.Range.fromTextSpan(response.body));\n\t}\n\n\tprivate getContents(\n\t\tresource: vscode.Uri,\n\t\tdata: Proto.QuickInfoResponseBody,\n\t\tsource: ServerType | undefined,\n\t) {\n\t\tconst parts: vscode.MarkedString[] = [];\n\n\t\tif (data.displayString) {\n\t\t\tconst displayParts: string[] = [];\n\n\t\t\tif (source === ServerType.Syntax && this.client.hasCapabilityForResource(resource, ClientCapability.Semantic)) {\n\t\t\t\tdisplayParts.push(\n\t\t\t\t\tlocalize({\n\t\t\t\t\t\tkey: 'loadingPrefix',\n\t\t\t\t\t\tcomment: ['Prefix displayed for hover entries while the server is still loading']\n\t\t\t\t\t}, \"(loading...)\"));\n\t\t\t}\n\n\t\t\tdisplayParts.push(data.displayString);\n\n\t\t\tparts.push({ language: 'typescript', value: displayParts.join(' ') });\n\t\t}\n\t\tparts.push(markdownDocumentation(data.documentation, data.tags));\n\t\treturn parts;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n): vscode.Disposable {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerHoverProvider(selector.syntax,\n\t\t\tnew TypeScriptHoverProvider(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport DefinitionProviderBase from './definitionProviderBase';\n\nclass TypeScriptImplementationProvider extends DefinitionProviderBase implements vscode.ImplementationProvider {\n\tpublic provideImplementation(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.Definition | undefined> {\n\t\treturn this.getSymbolLocations('implementation', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerImplementationProvider(selector.semantic,\n\t\t\tnew TypeScriptImplementationProvider(client));\n\t});\n}\n",null,null,null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptReferenceSupport implements vscode.ReferenceProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient) { }\n\n\tpublic async provideReferences(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\toptions: vscode.ReferenceContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Location[]> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('references', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result: vscode.Location[] = [];\n\t\tfor (const ref of response.body.refs) {\n\t\t\tif (!options.includeDeclaration && ref.isDefinition) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst url = this.client.toResource(ref.file);\n\t\t\tconst location = typeConverters.Location.fromTextSpan(url, ref);\n\t\t\tresult.push(location);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerReferenceProvider(selector.syntax,\n\t\t\tnew TypeScriptReferenceSupport(client));\n\t});\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// all constants are const\nimport { TokenEncodingConsts, TokenModifier, TokenType, VersionRequirement } from 'typescript-vscode-sh-plugin/lib/constants';\nimport * as vscode from 'vscode';\nimport * as Proto from '../protocol';\nimport { ClientCapability, ExecConfig, ITypeScriptServiceClient, ServerResponse } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireSomeCapability, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\n\n\nconst minTypeScriptVersion = API.fromVersionString(`${VersionRequirement.major}.${VersionRequirement.minor}`);\n\n// as we don't do deltas, for performance reasons, don't compute semantic tokens for documents above that limit\nconst CONTENT_LENGTH_LIMIT = 100000;\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, minTypeScriptVersion),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\tconst provider = new DocumentSemanticTokensProvider(client);\n\t\treturn vscode.Disposable.from(\n\t\t\t// register only as a range provider\n\t\t\tvscode.languages.registerDocumentRangeSemanticTokensProvider(selector.semantic, provider, provider.getLegend()),\n\t\t);\n\t});\n}\n\n/**\n * Prototype of a DocumentSemanticTokensProvider, relying on the experimental `encodedSemanticClassifications-full` request from the TypeScript server.\n * As the results retured by the TypeScript server are limited, we also add a Typescript plugin (typescript-vscode-sh-plugin) to enrich the returned token.\n * See https://github.com/aeschli/typescript-vscode-sh-plugin.\n */\nclass DocumentSemanticTokensProvider implements vscode.DocumentSemanticTokensProvider, vscode.DocumentRangeSemanticTokensProvider {\n\n\tconstructor(private readonly client: ITypeScriptServiceClient) {\n\t}\n\n\tgetLegend(): vscode.SemanticTokensLegend {\n\t\treturn new vscode.SemanticTokensLegend(tokenTypes, tokenModifiers);\n\t}\n\n\tasync provideDocumentSemanticTokens(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file || document.getText().length > CONTENT_LENGTH_LIMIT) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._provideSemanticTokens(document, { file, start: 0, length: document.getText().length }, token);\n\t}\n\n\tasync provideDocumentRangeSemanticTokens(document: vscode.TextDocument, range: vscode.Range, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file || (document.offsetAt(range.end) - document.offsetAt(range.start) > CONTENT_LENGTH_LIMIT)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst start = document.offsetAt(range.start);\n\t\tconst length = document.offsetAt(range.end) - start;\n\t\treturn this._provideSemanticTokens(document, { file, start, length }, token);\n\t}\n\n\tasync _provideSemanticTokens(document: vscode.TextDocument, requestArg: ExperimentalProtocol.EncodedSemanticClassificationsRequestArgs, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst versionBeforeRequest = document.version;\n\n\t\tconst response = await (this.client as ExperimentalProtocol.IExtendedTypeScriptServiceClient).execute('encodedSemanticClassifications-full', requestArg, token, {\n\t\t\tcancelOnResourceChange: document.uri\n\t\t});\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst versionAfterRequest = document.version;\n\n\t\tif (versionBeforeRequest !== versionAfterRequest) {\n\t\t\t// cannot convert result's offsets to (line;col) values correctly\n\t\t\t// a new request will come in soon...\n\t\t\t//\n\t\t\t// here we cannot return null, because returning null would remove all semantic tokens.\n\t\t\t// we must throw to indicate that the semantic tokens should not be removed.\n\t\t\t// using the string busy here because it is not logged to error telemetry if the error text contains busy.\n\n\t\t\t// as the new request will come in right after our response, we first wait for the document activity to stop\n\t\t\tawait waitForDocumentChangesToEnd(document);\n\n\t\t\tthrow new vscode.CancellationError();\n\t\t}\n\n\t\tconst tokenSpan = response.body.spans;\n\n\t\tconst builder = new vscode.SemanticTokensBuilder();\n\t\tlet i = 0;\n\t\twhile (i < tokenSpan.length) {\n\t\t\tconst offset = tokenSpan[i++];\n\t\t\tconst length = tokenSpan[i++];\n\t\t\tconst tsClassification = tokenSpan[i++];\n\n\t\t\tlet tokenModifiers = 0;\n\t\t\tlet tokenType = getTokenTypeFromClassification(tsClassification);\n\t\t\tif (tokenType !== undefined) {\n\t\t\t\t// it's a classification as returned by the typescript-vscode-sh-plugin\n\t\t\t\ttokenModifiers = getTokenModifierFromClassification(tsClassification);\n\t\t\t} else {\n\t\t\t\t// typescript-vscode-sh-plugin is not present\n\t\t\t\ttokenType = tokenTypeMap[tsClassification];\n\t\t\t\tif (tokenType === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// we can use the document's range conversion methods because the result is at the same version as the document\n\t\t\tconst startPos = document.positionAt(offset);\n\t\t\tconst endPos = document.positionAt(offset + length);\n\n\t\t\tfor (let line = startPos.line; line <= endPos.line; line++) {\n\t\t\t\tconst startCharacter = (line === startPos.line ? startPos.character : 0);\n\t\t\t\tconst endCharacter = (line === endPos.line ? endPos.character : document.lineAt(line).text.length);\n\t\t\t\tbuilder.push(line, startCharacter, endCharacter - startCharacter, tokenType, tokenModifiers);\n\t\t\t}\n\t\t}\n\t\treturn builder.build();\n\t}\n}\n\nfunction waitForDocumentChangesToEnd(document: vscode.TextDocument) {\n\tlet version = document.version;\n\treturn new Promise<void>((s) => {\n\t\tconst iv = setInterval(_ => {\n\t\t\tif (document.version === version) {\n\t\t\t\tclearInterval(iv);\n\t\t\t\ts();\n\t\t\t}\n\t\t\tversion = document.version;\n\t\t}, 400);\n\t});\n}\n\n\n// typescript-vscode-sh-plugin encodes type and modifiers in the classification:\n// TSClassification = (TokenType + 1) << 8 + TokenModifier\n\nfunction getTokenTypeFromClassification(tsClassification: number): number | undefined {\n\tif (tsClassification > TokenEncodingConsts.modifierMask) {\n\t\treturn (tsClassification >> TokenEncodingConsts.typeOffset) - 1;\n\t}\n\treturn undefined;\n}\n\nfunction getTokenModifierFromClassification(tsClassification: number) {\n\treturn tsClassification & TokenEncodingConsts.modifierMask;\n}\n\nconst tokenTypes: string[] = [];\ntokenTypes[TokenType.class] = 'class';\ntokenTypes[TokenType.enum] = 'enum';\ntokenTypes[TokenType.interface] = 'interface';\ntokenTypes[TokenType.namespace] = 'namespace';\ntokenTypes[TokenType.typeParameter] = 'typeParameter';\ntokenTypes[TokenType.type] = 'type';\ntokenTypes[TokenType.parameter] = 'parameter';\ntokenTypes[TokenType.variable] = 'variable';\ntokenTypes[TokenType.enumMember] = 'enumMember';\ntokenTypes[TokenType.property] = 'property';\ntokenTypes[TokenType.function] = 'function';\ntokenTypes[TokenType.member] = 'method';\n\nconst tokenModifiers: string[] = [];\ntokenModifiers[TokenModifier.async] = 'async';\ntokenModifiers[TokenModifier.declaration] = 'declaration';\ntokenModifiers[TokenModifier.readonly] = 'readonly';\ntokenModifiers[TokenModifier.static] = 'static';\ntokenModifiers[TokenModifier.local] = 'local';\ntokenModifiers[TokenModifier.defaultLibrary] = 'defaultLibrary';\n\n// make sure token types and modifiers are complete\nif (tokenTypes.filter(t => !!t).length !== TokenType._) {\n\tconsole.warn('typescript-vscode-sh-plugin has added new tokens types.');\n}\nif (tokenModifiers.filter(t => !!t).length !== TokenModifier._) {\n\tconsole.warn('typescript-vscode-sh-plugin has added new tokens modifiers.');\n}\n\n// mapping for the original ExperimentalProtocol.ClassificationType from TypeScript (only used when plugin is not available)\nconst tokenTypeMap: number[] = [];\ntokenTypeMap[ExperimentalProtocol.ClassificationType.className] = TokenType.class;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.enumName] = TokenType.enum;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.interfaceName] = TokenType.interface;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.moduleName] = TokenType.namespace;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.typeParameterName] = TokenType.typeParameter;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.typeAliasName] = TokenType.type;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.parameterName] = TokenType.parameter;\n\nnamespace ExperimentalProtocol {\n\n\texport interface IExtendedTypeScriptServiceClient {\n\t\texecute<K extends keyof ExperimentalProtocol.ExtendedTsServerRequests>(\n\t\t\tcommand: K,\n\t\t\targs: ExperimentalProtocol.ExtendedTsServerRequests[K][0],\n\t\t\ttoken: vscode.CancellationToken,\n\t\t\tconfig?: ExecConfig\n\t\t): Promise<ServerResponse.Response<ExperimentalProtocol.ExtendedTsServerRequests[K][1]>>;\n\t}\n\n\t/**\n\t * A request to get encoded semantic classifications for a span in the file\n\t */\n\texport interface EncodedSemanticClassificationsRequest extends Proto.FileRequest {\n\t\targuments: EncodedSemanticClassificationsRequestArgs;\n\t}\n\n\t/**\n\t * Arguments for EncodedSemanticClassificationsRequest request.\n\t */\n\texport interface EncodedSemanticClassificationsRequestArgs extends Proto.FileRequestArgs {\n\t\t/**\n\t\t * Start position of the span.\n\t\t */\n\t\tstart: number;\n\t\t/**\n\t\t * Length of the span.\n\t\t */\n\t\tlength: number;\n\t}\n\n\texport const enum EndOfLineState {\n\t\tNone,\n\t\tInMultiLineCommentTrivia,\n\t\tInSingleQuoteStringLiteral,\n\t\tInDoubleQuoteStringLiteral,\n\t\tInTemplateHeadOrNoSubstitutionTemplate,\n\t\tInTemplateMiddleOrTail,\n\t\tInTemplateSubstitutionPosition,\n\t}\n\n\texport const enum ClassificationType {\n\t\tcomment = 1,\n\t\tidentifier = 2,\n\t\tkeyword = 3,\n\t\tnumericLiteral = 4,\n\t\toperator = 5,\n\t\tstringLiteral = 6,\n\t\tregularExpressionLiteral = 7,\n\t\twhiteSpace = 8,\n\t\ttext = 9,\n\t\tpunctuation = 10,\n\t\tclassName = 11,\n\t\tenumName = 12,\n\t\tinterfaceName = 13,\n\t\tmoduleName = 14,\n\t\ttypeParameterName = 15,\n\t\ttypeAliasName = 16,\n\t\tparameterName = 17,\n\t\tdocCommentTagName = 18,\n\t\tjsxOpenTagName = 19,\n\t\tjsxCloseTagName = 20,\n\t\tjsxSelfClosingTagName = 21,\n\t\tjsxAttribute = 22,\n\t\tjsxText = 23,\n\t\tjsxAttributeStringLiteralValue = 24,\n\t\tbigintLiteral = 25,\n\t}\n\n\texport interface EncodedSemanticClassificationsResponse extends Proto.Response {\n\t\tbody?: {\n\t\t\tendOfLineState: EndOfLineState;\n\t\t\tspans: number[];\n\t\t};\n\t}\n\n\texport interface ExtendedTsServerRequests {\n\t\t'encodedSemanticClassifications-full': [ExperimentalProtocol.EncodedSemanticClassificationsRequestArgs, ExperimentalProtocol.EncodedSemanticClassificationsResponse];\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as Previewer from '../utils/previewer';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptSignatureHelpProvider implements vscode.SignatureHelpProvider {\n\n\tpublic static readonly triggerCharacters = ['(', ',', '<'];\n\tpublic static readonly retriggerCharacters = [')'];\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideSignatureHelp(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken,\n\t\tcontext: vscode.SignatureHelpContext,\n\t): Promise<vscode.SignatureHelp | undefined> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.SignatureHelpRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(filepath, position),\n\t\t\ttriggerReason: toTsTriggerReason(context)\n\t\t};\n\t\tconst response = await this.client.interruptGetErr(() => this.client.execute('signatureHelp', args, token));\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst info = response.body;\n\t\tconst result = new vscode.SignatureHelp();\n\t\tresult.signatures = info.items.map(signature => this.convertSignature(signature));\n\t\tresult.activeSignature = this.getActiveSignature(context, info, result.signatures);\n\t\tresult.activeParameter = this.getActiveParameter(info);\n\n\t\treturn result;\n\t}\n\n\tprivate getActiveSignature(context: vscode.SignatureHelpContext, info: Proto.SignatureHelpItems, signatures: readonly vscode.SignatureInformation[]): number {\n\t\t// Try matching the previous active signature's label to keep it selected\n\t\tconst previouslyActiveSignature = context.activeSignatureHelp?.signatures[context.activeSignatureHelp.activeSignature];\n\t\tif (previouslyActiveSignature && context.isRetrigger) {\n\t\t\tconst existingIndex = signatures.findIndex(other => other.label === previouslyActiveSignature?.label);\n\t\t\tif (existingIndex >= 0) {\n\t\t\t\treturn existingIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn info.selectedItemIndex;\n\t}\n\n\tprivate getActiveParameter(info: Proto.SignatureHelpItems): number {\n\t\tconst activeSignature = info.items[info.selectedItemIndex];\n\t\tif (activeSignature && activeSignature.isVariadic) {\n\t\t\treturn Math.min(info.argumentIndex, activeSignature.parameters.length - 1);\n\t\t}\n\t\treturn info.argumentIndex;\n\t}\n\n\tprivate convertSignature(item: Proto.SignatureHelpItem) {\n\t\tconst signature = new vscode.SignatureInformation(\n\t\t\tPreviewer.plain(item.prefixDisplayParts),\n\t\t\tPreviewer.markdownDocumentation(item.documentation, item.tags.filter(x => x.name !== 'param')));\n\n\t\tlet textIndex = signature.label.length;\n\t\tconst separatorLabel = Previewer.plain(item.separatorDisplayParts);\n\t\tfor (let i = 0; i < item.parameters.length; ++i) {\n\t\t\tconst parameter = item.parameters[i];\n\t\t\tconst label = Previewer.plain(parameter.displayParts);\n\n\t\t\tsignature.parameters.push(\n\t\t\t\tnew vscode.ParameterInformation(\n\t\t\t\t\t[textIndex, textIndex + label.length],\n\t\t\t\t\tPreviewer.markdownDocumentation(parameter.documentation, [])));\n\n\t\t\ttextIndex += label.length;\n\t\t\tsignature.label += label;\n\n\t\t\tif (i !== item.parameters.length - 1) {\n\t\t\t\tsignature.label += separatorLabel;\n\t\t\t\ttextIndex += separatorLabel.length;\n\t\t\t}\n\t\t}\n\n\t\tsignature.label += Previewer.plain(item.suffixDisplayParts);\n\t\treturn signature;\n\t}\n}\n\nfunction toTsTriggerReason(context: vscode.SignatureHelpContext): Proto.SignatureHelpTriggerReason {\n\tswitch (context.triggerKind) {\n\t\tcase vscode.SignatureHelpTriggerKind.TriggerCharacter:\n\t\t\tif (context.triggerCharacter) {\n\t\t\t\tif (context.isRetrigger) {\n\t\t\t\t\treturn { kind: 'retrigger', triggerCharacter: context.triggerCharacter as any };\n\t\t\t\t} else {\n\t\t\t\t\treturn { kind: 'characterTyped', triggerCharacter: context.triggerCharacter as any };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn { kind: 'invoked' };\n\t\t\t}\n\n\t\tcase vscode.SignatureHelpTriggerKind.ContentChange:\n\t\t\treturn context.isRetrigger ? { kind: 'retrigger' } : { kind: 'invoked' };\n\n\t\tcase vscode.SignatureHelpTriggerKind.Invoke:\n\t\tdefault:\n\t\t\treturn { kind: 'invoked' };\n\t}\n}\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerSignatureHelpProvider(selector.syntax,\n\t\t\tnew TypeScriptSignatureHelpProvider(client), {\n\t\t\ttriggerCharacters: TypeScriptSignatureHelpProvider.triggerCharacters,\n\t\t\tretriggerCharacters: TypeScriptSignatureHelpProvider.retriggerCharacters\n\t\t});\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass SmartSelection implements vscode.SelectionRangeProvider {\n\tpublic static readonly minVersion = API.v350;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideSelectionRanges(\n\t\tdocument: vscode.TextDocument,\n\t\tpositions: vscode.Position[],\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<vscode.SelectionRange[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.SelectionRangeRequestArgs = {\n\t\t\tfile,\n\t\t\tlocations: positions.map(typeConverters.Position.toLocation)\n\t\t};\n\t\tconst response = await this.client.execute('selectionRange', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn response.body.map(SmartSelection.convertSelectionRange);\n\t}\n\n\tprivate static convertSelectionRange(\n\t\tselectionRange: Proto.SelectionRange\n\t): vscode.SelectionRange {\n\t\treturn new vscode.SelectionRange(\n\t\t\ttypeConverters.Range.fromTextSpan(selectionRange.textSpan),\n\t\t\tselectionRange.parent ? SmartSelection.convertSelectionRange(selectionRange.parent) : undefined,\n\t\t);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, SmartSelection.minVersion),\n\t], () => {\n\t\treturn vscode.languages.registerSelectionRangeProvider(selector.syntax, new SmartSelection(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireMinVersion, requireConfiguration, Condition } from '../utils/dependentRegistration';\nimport { Disposable } from '../utils/dispose';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TagClosing extends Disposable {\n\tpublic static readonly minVersion = API.v300;\n\n\tprivate _disposed = false;\n\tprivate _timeout: NodeJS.Timer | undefined = undefined;\n\tprivate _cancel: vscode.CancellationTokenSource | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) {\n\t\tsuper();\n\t\tvscode.workspace.onDidChangeTextDocument(\n\t\t\tevent => this.onDidChangeTextDocument(event.document, event.contentChanges),\n\t\t\tnull,\n\t\t\tthis._disposables);\n\t}\n\n\tpublic dispose() {\n\t\tsuper.dispose();\n\t\tthis._disposed = true;\n\n\t\tif (this._timeout) {\n\t\t\tclearTimeout(this._timeout);\n\t\t\tthis._timeout = undefined;\n\t\t}\n\n\t\tif (this._cancel) {\n\t\t\tthis._cancel.cancel();\n\t\t\tthis._cancel.dispose();\n\t\t\tthis._cancel = undefined;\n\t\t}\n\t}\n\n\tprivate onDidChangeTextDocument(\n\t\tdocument: vscode.TextDocument,\n\t\tchanges: readonly vscode.TextDocumentContentChangeEvent[]\n\t) {\n\t\tconst activeDocument = vscode.window.activeTextEditor && vscode.window.activeTextEditor.document;\n\t\tif (document !== activeDocument || changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._timeout !== 'undefined') {\n\t\t\tclearTimeout(this._timeout);\n\t\t}\n\n\t\tif (this._cancel) {\n\t\t\tthis._cancel.cancel();\n\t\t\tthis._cancel.dispose();\n\t\t\tthis._cancel = undefined;\n\t\t}\n\n\t\tconst lastChange = changes[changes.length - 1];\n\t\tconst lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\tif (lastChange.rangeLength > 0 || lastCharacter !== '>' && lastCharacter !== '/') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst priorCharacter = lastChange.range.start.character > 0\n\t\t\t? document.getText(new vscode.Range(lastChange.range.start.translate({ characterDelta: -1 }), lastChange.range.start))\n\t\t\t: '';\n\t\tif (priorCharacter === '>') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst version = document.version;\n\t\tthis._timeout = setTimeout(async () => {\n\t\t\tthis._timeout = undefined;\n\n\t\t\tif (this._disposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst addedLines = lastChange.text.split(/\\r\\n|\\n/g);\n\t\t\tconst position = addedLines.length <= 1\n\t\t\t\t? lastChange.range.start.translate({ characterDelta: lastChange.text.length })\n\t\t\t\t: new vscode.Position(lastChange.range.start.line + addedLines.length - 1, addedLines[addedLines.length - 1].length);\n\n\t\t\tconst args: Proto.JsxClosingTagRequestArgs = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\tthis._cancel = new vscode.CancellationTokenSource();\n\t\t\tconst response = await this.client.execute('jsxClosingTag', args, this._cancel.token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._disposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst activeEditor = vscode.window.activeTextEditor;\n\t\t\tif (!activeEditor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst insertion = response.body;\n\t\t\tconst activeDocument = activeEditor.document;\n\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\tactiveEditor.insertSnippet(\n\t\t\t\t\tthis.getTagSnippet(insertion),\n\t\t\t\t\tthis.getInsertionPositions(activeEditor, position));\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tprivate getTagSnippet(closingTag: Proto.TextInsertion): vscode.SnippetString {\n\t\tconst snippet = new vscode.SnippetString();\n\t\tsnippet.appendPlaceholder('', 0);\n\t\tsnippet.appendText(closingTag.newText);\n\t\treturn snippet;\n\t}\n\n\tprivate getInsertionPositions(editor: vscode.TextEditor, position: vscode.Position) {\n\t\tconst activeSelectionPositions = editor.selections.map(s => s.active);\n\t\treturn activeSelectionPositions.some(p => p.isEqual(position))\n\t\t\t? activeSelectionPositions\n\t\t\t: position;\n\t}\n}\n\nfunction requireActiveDocument(\n\tselector: vscode.DocumentSelector\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\tconst editor = vscode.window.activeTextEditor;\n\t\t\treturn !!(editor && vscode.languages.match(selector, editor.document));\n\t\t},\n\t\thandler => {\n\t\t\treturn vscode.Disposable.from(\n\t\t\t\tvscode.window.onDidChangeActiveTextEditor(handler),\n\t\t\t\tvscode.workspace.onDidOpenTextDocument(handler));\n\t\t});\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tmodeId: string,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TagClosing.minVersion),\n\t\trequireConfiguration(modeId, 'autoClosingTags'),\n\t\trequireActiveDocument(selector.syntax)\n\t], () => new TagClosing(client));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport DefinitionProviderBase from './definitionProviderBase';\n\nexport default class TypeScriptTypeDefinitionProvider extends DefinitionProviderBase implements vscode.TypeDefinitionProvider {\n\tpublic provideTypeDefinition(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.Definition | undefined> {\n\t\treturn this.getSymbolLocations('typeDefinition', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerTypeDefinitionProvider(selector.syntax,\n\t\t\tnew TypeScriptTypeDefinitionProvider(client));\n\t});\n}\n",null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ResourceMap } from '../utils/resourceMap';\nimport { DiagnosticLanguage } from '../utils/languageDescription';\nimport * as arrays from '../utils/arrays';\nimport { Disposable } from '../utils/dispose';\n\nfunction diagnosticsEquals(a: vscode.Diagnostic, b: vscode.Diagnostic): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\treturn a.code === b.code\n\t\t&& a.message === b.message\n\t\t&& a.severity === b.severity\n\t\t&& a.source === b.source\n\t\t&& a.range.isEqual(b.range)\n\t\t&& arrays.equals(a.relatedInformation || arrays.empty, b.relatedInformation || arrays.empty, (a, b) => {\n\t\t\treturn a.message === b.message\n\t\t\t\t&& a.location.range.isEqual(b.location.range)\n\t\t\t\t&& a.location.uri.fsPath === b.location.uri.fsPath;\n\t\t})\n\t\t&& arrays.equals(a.tags || arrays.empty, b.tags || arrays.empty);\n}\n\nexport const enum DiagnosticKind {\n\tSyntax,\n\tSemantic,\n\tSuggestion,\n}\n\nclass FileDiagnostics {\n\tprivate readonly _diagnostics = new Map<DiagnosticKind, ReadonlyArray<vscode.Diagnostic>>();\n\n\tconstructor(\n\t\tpublic readonly file: vscode.Uri,\n\t\tpublic language: DiagnosticLanguage\n\t) { }\n\n\tpublic updateDiagnostics(\n\t\tlanguage: DiagnosticLanguage,\n\t\tkind: DiagnosticKind,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): boolean {\n\t\tif (language !== this.language) {\n\t\t\tthis._diagnostics.clear();\n\t\t\tthis.language = language;\n\t\t}\n\n\t\tconst existing = this._diagnostics.get(kind);\n\t\tif (arrays.equals(existing || arrays.empty, diagnostics, diagnosticsEquals)) {\n\t\t\t// No need to update\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._diagnostics.set(kind, diagnostics);\n\t\treturn true;\n\t}\n\n\tpublic getDiagnostics(settings: DiagnosticSettings): vscode.Diagnostic[] {\n\t\tif (!settings.getValidate(this.language)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [\n\t\t\t...this.get(DiagnosticKind.Syntax),\n\t\t\t...this.get(DiagnosticKind.Semantic),\n\t\t\t...this.getSuggestionDiagnostics(settings),\n\t\t];\n\t}\n\n\tprivate getSuggestionDiagnostics(settings: DiagnosticSettings) {\n\t\tconst enableSuggestions = settings.getEnableSuggestions(this.language);\n\t\treturn this.get(DiagnosticKind.Suggestion).filter(x => {\n\t\t\tif (!enableSuggestions) {\n\t\t\t\t// Still show unused\n\t\t\t\treturn x.tags && (x.tags.includes(vscode.DiagnosticTag.Unnecessary) || x.tags.includes(vscode.DiagnosticTag.Deprecated));\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tprivate get(kind: DiagnosticKind): ReadonlyArray<vscode.Diagnostic> {\n\t\treturn this._diagnostics.get(kind) || [];\n\t}\n}\n\ninterface LanguageDiagnosticSettings {\n\treadonly validate: boolean;\n\treadonly enableSuggestions: boolean;\n}\n\nfunction areLanguageDiagnosticSettingsEqual(currentSettings: LanguageDiagnosticSettings, newSettings: LanguageDiagnosticSettings): boolean {\n\treturn currentSettings.validate === newSettings.validate\n\t\t&& currentSettings.enableSuggestions && currentSettings.enableSuggestions;\n}\n\nclass DiagnosticSettings {\n\tprivate static readonly defaultSettings: LanguageDiagnosticSettings = {\n\t\tvalidate: true,\n\t\tenableSuggestions: true\n\t};\n\n\tprivate readonly _languageSettings = new Map<DiagnosticLanguage, LanguageDiagnosticSettings>();\n\n\tpublic getValidate(language: DiagnosticLanguage): boolean {\n\t\treturn this.get(language).validate;\n\t}\n\n\tpublic setValidate(language: DiagnosticLanguage, value: boolean): boolean {\n\t\treturn this.update(language, settings => ({\n\t\t\tvalidate: value,\n\t\t\tenableSuggestions: settings.enableSuggestions,\n\t\t}));\n\t}\n\n\tpublic getEnableSuggestions(language: DiagnosticLanguage): boolean {\n\t\treturn this.get(language).enableSuggestions;\n\t}\n\n\tpublic setEnableSuggestions(language: DiagnosticLanguage, value: boolean): boolean {\n\t\treturn this.update(language, settings => ({\n\t\t\tvalidate: settings.validate,\n\t\t\tenableSuggestions: value\n\t\t}));\n\t}\n\n\tprivate get(language: DiagnosticLanguage): LanguageDiagnosticSettings {\n\t\treturn this._languageSettings.get(language) || DiagnosticSettings.defaultSettings;\n\t}\n\n\tprivate update(language: DiagnosticLanguage, f: (x: LanguageDiagnosticSettings) => LanguageDiagnosticSettings): boolean {\n\t\tconst currentSettings = this.get(language);\n\t\tconst newSettings = f(currentSettings);\n\t\tthis._languageSettings.set(language, newSettings);\n\t\treturn areLanguageDiagnosticSettingsEqual(currentSettings, newSettings);\n\t}\n}\n\nexport class DiagnosticsManager extends Disposable {\n\tprivate readonly _diagnostics: ResourceMap<FileDiagnostics>;\n\tprivate readonly _settings = new DiagnosticSettings();\n\tprivate readonly _currentDiagnostics: vscode.DiagnosticCollection;\n\tprivate readonly _pendingUpdates: ResourceMap<any>;\n\n\tprivate readonly _updateDelay = 50;\n\n\tconstructor(\n\t\towner: string,\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis._diagnostics = new ResourceMap<FileDiagnostics>(undefined, { onCaseInsenitiveFileSystem });\n\t\tthis._pendingUpdates = new ResourceMap<any>(undefined, { onCaseInsenitiveFileSystem });\n\n\t\tthis._currentDiagnostics = this._register(vscode.languages.createDiagnosticCollection(owner));\n\t}\n\n\tpublic dispose() {\n\t\tsuper.dispose();\n\n\t\tfor (const value of this._pendingUpdates.values) {\n\t\t\tclearTimeout(value);\n\t\t}\n\t\tthis._pendingUpdates.clear();\n\t}\n\n\tpublic reInitialize(): void {\n\t\tthis._currentDiagnostics.clear();\n\t\tthis._diagnostics.clear();\n\t}\n\n\tpublic setValidate(language: DiagnosticLanguage, value: boolean) {\n\t\tconst didUpdate = this._settings.setValidate(language, value);\n\t\tif (didUpdate) {\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\tpublic setEnableSuggestions(language: DiagnosticLanguage, value: boolean) {\n\t\tconst didUpdate = this._settings.setEnableSuggestions(language, value);\n\t\tif (didUpdate) {\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\tpublic updateDiagnostics(\n\t\tfile: vscode.Uri,\n\t\tlanguage: DiagnosticLanguage,\n\t\tkind: DiagnosticKind,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): void {\n\t\tlet didUpdate = false;\n\t\tconst entry = this._diagnostics.get(file);\n\t\tif (entry) {\n\t\t\tdidUpdate = entry.updateDiagnostics(language, kind, diagnostics);\n\t\t} else if (diagnostics.length) {\n\t\t\tconst fileDiagnostics = new FileDiagnostics(file, language);\n\t\t\tfileDiagnostics.updateDiagnostics(language, kind, diagnostics);\n\t\t\tthis._diagnostics.set(file, fileDiagnostics);\n\t\t\tdidUpdate = true;\n\t\t}\n\n\t\tif (didUpdate) {\n\t\t\tthis.scheduleDiagnosticsUpdate(file);\n\t\t}\n\t}\n\n\tpublic configFileDiagnosticsReceived(\n\t\tfile: vscode.Uri,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): void {\n\t\tthis._currentDiagnostics.set(file, diagnostics);\n\t}\n\n\tpublic delete(resource: vscode.Uri): void {\n\t\tthis._currentDiagnostics.delete(resource);\n\t\tthis._diagnostics.delete(resource);\n\t}\n\n\tpublic getDiagnostics(file: vscode.Uri): ReadonlyArray<vscode.Diagnostic> {\n\t\treturn this._currentDiagnostics.get(file) || [];\n\t}\n\n\tprivate scheduleDiagnosticsUpdate(file: vscode.Uri) {\n\t\tif (!this._pendingUpdates.has(file)) {\n\t\t\tthis._pendingUpdates.set(file, setTimeout(() => this.updateCurrentDiagnostics(file), this._updateDelay));\n\t\t}\n\t}\n\n\tprivate updateCurrentDiagnostics(file: vscode.Uri): void {\n\t\tif (this._pendingUpdates.has(file)) {\n\t\t\tclearTimeout(this._pendingUpdates.get(file));\n\t\t\tthis._pendingUpdates.delete(file);\n\t\t}\n\n\t\tconst fileDiagnostics = this._diagnostics.get(file);\n\t\tthis._currentDiagnostics.set(file, fileDiagnostics ? fileDiagnostics.getDiagnostics(this._settings) : []);\n\t}\n\n\tprivate rebuild(): void {\n\t\tthis._currentDiagnostics.clear();\n\t\tfor (const fileDiagnostic of this._diagnostics.values) {\n\t\t\tthis._currentDiagnostics.set(fileDiagnostic.file, fileDiagnostic.getDiagnostics(this._settings));\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient, ClientCapability } from '../typescriptService';\nimport API from '../utils/api';\nimport { coalesce } from '../utils/arrays';\nimport { Delayer } from '../utils/async';\nimport { nulToken } from '../utils/cancellation';\nimport { Disposable } from '../utils/dispose';\nimport * as languageModeIds from '../utils/languageModeIds';\nimport { ResourceMap } from '../utils/resourceMap';\nimport * as typeConverters from '../utils/typeConverters';\n\nconst enum BufferKind {\n\tTypeScript = 1,\n\tJavaScript = 2,\n}\n\nconst enum BufferState {\n\tInitial = 1,\n\tOpen = 2,\n\tClosed = 2,\n}\n\nfunction mode2ScriptKind(mode: string): 'TS' | 'TSX' | 'JS' | 'JSX' | undefined {\n\tswitch (mode) {\n\t\tcase languageModeIds.typescript: return 'TS';\n\t\tcase languageModeIds.typescriptreact: return 'TSX';\n\t\tcase languageModeIds.javascript: return 'JS';\n\t\tcase languageModeIds.javascriptreact: return 'JSX';\n\t}\n\treturn undefined;\n}\n\nconst enum BufferOperationType { Close, Open, Change }\n\nclass CloseOperation {\n\treadonly type = BufferOperationType.Close;\n\tconstructor(\n\t\tpublic readonly args: string\n\t) { }\n}\n\nclass OpenOperation {\n\treadonly type = BufferOperationType.Open;\n\tconstructor(\n\t\tpublic readonly args: Proto.OpenRequestArgs\n\t) { }\n}\n\nclass ChangeOperation {\n\treadonly type = BufferOperationType.Change;\n\tconstructor(\n\t\tpublic readonly args: Proto.FileCodeEdits\n\t) { }\n}\n\ntype BufferOperation = CloseOperation | OpenOperation | ChangeOperation;\n\n/**\n * Manages synchronization of buffers with the TS server.\n *\n * If supported, batches together file changes. This allows the TS server to more efficiently process changes.\n */\nclass BufferSynchronizer {\n\n\tprivate readonly _pending: ResourceMap<BufferOperation>;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tpathNormalizer: (path: vscode.Uri) => string | undefined,\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tthis._pending = new ResourceMap<BufferOperation>(pathNormalizer, {\n\t\t\tonCaseInsenitiveFileSystem\n\t\t});\n\t}\n\n\tpublic open(resource: vscode.Uri, args: Proto.OpenRequestArgs) {\n\t\tif (this.supportsBatching) {\n\t\t\tthis.updatePending(resource, new OpenOperation(args));\n\t\t} else {\n\t\t\tthis.client.executeWithoutWaitingForResponse('open', args);\n\t\t}\n\t}\n\n\t/**\n\t * @return Was the buffer open?\n\t */\n\tpublic close(resource: vscode.Uri, filepath: string): boolean {\n\t\tif (this.supportsBatching) {\n\t\t\treturn this.updatePending(resource, new CloseOperation(filepath));\n\t\t} else {\n\t\t\tconst args: Proto.FileRequestArgs = { file: filepath };\n\t\t\tthis.client.executeWithoutWaitingForResponse('close', args);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic change(resource: vscode.Uri, filepath: string, events: readonly vscode.TextDocumentContentChangeEvent[]) {\n\t\tif (!events.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.supportsBatching) {\n\t\t\tthis.updatePending(resource, new ChangeOperation({\n\t\t\t\tfileName: filepath,\n\t\t\t\ttextChanges: events.map((change): Proto.CodeEdit => ({\n\t\t\t\t\tnewText: change.text,\n\t\t\t\t\tstart: typeConverters.Position.toLocation(change.range.start),\n\t\t\t\t\tend: typeConverters.Position.toLocation(change.range.end),\n\t\t\t\t})).reverse(), // Send the edits end-of-document to start-of-document order\n\t\t\t}));\n\t\t} else {\n\t\t\tfor (const { range, text } of events) {\n\t\t\t\tconst args: Proto.ChangeRequestArgs = {\n\t\t\t\t\tinsertString: text,\n\t\t\t\t\t...typeConverters.Range.toFormattingRequestArgs(filepath, range)\n\t\t\t\t};\n\t\t\t\tthis.client.executeWithoutWaitingForResponse('change', args);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic reset(): void {\n\t\tthis._pending.clear();\n\t}\n\n\tpublic beforeCommand(command: string): void {\n\t\tif (command === 'updateOpen') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.flush();\n\t}\n\n\tprivate flush() {\n\t\tif (!this.supportsBatching) {\n\t\t\t// We've already eagerly synchronized\n\t\t\tthis._pending.clear();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._pending.size > 0) {\n\t\t\tconst closedFiles: string[] = [];\n\t\t\tconst openFiles: Proto.OpenRequestArgs[] = [];\n\t\t\tconst changedFiles: Proto.FileCodeEdits[] = [];\n\t\t\tfor (const change of this._pending.values) {\n\t\t\t\tswitch (change.type) {\n\t\t\t\t\tcase BufferOperationType.Change: changedFiles.push(change.args); break;\n\t\t\t\t\tcase BufferOperationType.Open: openFiles.push(change.args); break;\n\t\t\t\t\tcase BufferOperationType.Close: closedFiles.push(change.args); break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.client.execute('updateOpen', { changedFiles, closedFiles, openFiles }, nulToken, { nonRecoverable: true });\n\t\t\tthis._pending.clear();\n\t\t}\n\t}\n\n\tprivate get supportsBatching(): boolean {\n\t\treturn this.client.apiVersion.gte(API.v340);\n\t}\n\n\tprivate updatePending(resource: vscode.Uri, op: BufferOperation): boolean {\n\t\tswitch (op.type) {\n\t\t\tcase BufferOperationType.Close:\n\t\t\t\tconst existing = this._pending.get(resource);\n\t\t\t\tswitch (existing?.type) {\n\t\t\t\t\tcase BufferOperationType.Open:\n\t\t\t\t\t\tthis._pending.delete(resource);\n\t\t\t\t\t\treturn false; // Open then close. No need to do anything\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this._pending.has(resource)) {\n\t\t\t// we saw this file before, make sure we flush before working with it again\n\t\t\tthis.flush();\n\t\t}\n\t\tthis._pending.set(resource, op);\n\t\treturn true;\n\t}\n}\n\nclass SyncedBuffer {\n\n\tprivate state = BufferState.Initial;\n\n\tconstructor(\n\t\tprivate readonly document: vscode.TextDocument,\n\t\tpublic readonly filepath: string,\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly synchronizer: BufferSynchronizer,\n\t) { }\n\n\tpublic open(): void {\n\t\tconst args: Proto.OpenRequestArgs = {\n\t\t\tfile: this.filepath,\n\t\t\tfileContent: this.document.getText(),\n\t\t\tprojectRootPath: this.client.getWorkspaceRootForResource(this.document.uri),\n\t\t};\n\n\t\tconst scriptKind = mode2ScriptKind(this.document.languageId);\n\t\tif (scriptKind) {\n\t\t\targs.scriptKindName = scriptKind;\n\t\t}\n\n\t\tif (this.client.apiVersion.gte(API.v240)) {\n\t\t\tconst tsPluginsForDocument = this.client.pluginManager.plugins\n\t\t\t\t.filter(x => x.languages.indexOf(this.document.languageId) >= 0);\n\n\t\t\tif (tsPluginsForDocument.length) {\n\t\t\t\t(args as any).plugins = tsPluginsForDocument.map(plugin => plugin.name);\n\t\t\t}\n\t\t}\n\n\t\tthis.synchronizer.open(this.resource, args);\n\t\tthis.state = BufferState.Open;\n\t}\n\n\tpublic get resource(): vscode.Uri {\n\t\treturn this.document.uri;\n\t}\n\n\tpublic get lineCount(): number {\n\t\treturn this.document.lineCount;\n\t}\n\n\tpublic get kind(): BufferKind {\n\t\tswitch (this.document.languageId) {\n\t\t\tcase languageModeIds.javascript:\n\t\t\tcase languageModeIds.javascriptreact:\n\t\t\t\treturn BufferKind.JavaScript;\n\n\t\t\tcase languageModeIds.typescript:\n\t\t\tcase languageModeIds.typescriptreact:\n\t\t\tdefault:\n\t\t\t\treturn BufferKind.TypeScript;\n\t\t}\n\t}\n\n\t/**\n\t * @return Was the buffer open?\n\t */\n\tpublic close(): boolean {\n\t\tif (this.state !== BufferState.Open) {\n\t\t\tthis.state = BufferState.Closed;\n\t\t\treturn false;\n\t\t}\n\t\tthis.state = BufferState.Closed;\n\t\treturn this.synchronizer.close(this.resource, this.filepath);\n\t}\n\n\tpublic onContentChanged(events: readonly vscode.TextDocumentContentChangeEvent[]): void {\n\t\tif (this.state !== BufferState.Open) {\n\t\t\tconsole.error(`Unexpected buffer state: ${this.state}`);\n\t\t}\n\n\t\tthis.synchronizer.change(this.resource, this.filepath, events);\n\t}\n}\n\nclass SyncedBufferMap extends ResourceMap<SyncedBuffer> {\n\n\tpublic getForPath(filePath: string): SyncedBuffer | undefined {\n\t\treturn this.get(vscode.Uri.file(filePath));\n\t}\n\n\tpublic get allBuffers(): Iterable<SyncedBuffer> {\n\t\treturn this.values;\n\t}\n}\n\nclass PendingDiagnostics extends ResourceMap<number> {\n\tpublic getOrderedFileSet(): ResourceMap<void> {\n\t\tconst orderedResources = Array.from(this.entries)\n\t\t\t.sort((a, b) => a.value - b.value)\n\t\t\t.map(entry => entry.resource);\n\n\t\tconst map = new ResourceMap<void>(this._normalizePath, this.config);\n\t\tfor (const resource of orderedResources) {\n\t\t\tmap.set(resource, undefined);\n\t\t}\n\t\treturn map;\n\t}\n}\n\nclass GetErrRequest {\n\n\tpublic static executeGetErrRequest(\n\t\tclient: ITypeScriptServiceClient,\n\t\tfiles: ResourceMap<void>,\n\t\tonDone: () => void\n\t) {\n\t\treturn new GetErrRequest(client, files, onDone);\n\t}\n\n\tprivate _done: boolean = false;\n\tprivate readonly _token: vscode.CancellationTokenSource = new vscode.CancellationTokenSource();\n\n\tprivate constructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tpublic readonly files: ResourceMap<void>,\n\t\tonDone: () => void\n\t) {\n\t\tconst allFiles = coalesce(Array.from(files.entries)\n\t\t\t.filter(entry => client.hasCapabilityForResource(entry.resource, ClientCapability.Semantic))\n\t\t\t.map(entry => client.normalizedPath(entry.resource)));\n\n\t\tif (!allFiles.length || !client.capabilities.has(ClientCapability.Semantic)) {\n\t\t\tthis._done = true;\n\t\t\tsetImmediate(onDone);\n\t\t} else {\n\t\t\tconst request = client.configuration.enableProjectDiagnostics\n\t\t\t\t// Note that geterrForProject is almost certainly not the api we want here as it ends up computing far\n\t\t\t\t// too many diagnostics\n\t\t\t\t? client.executeAsync('geterrForProject', { delay: 0, file: allFiles[0] }, this._token.token)\n\t\t\t\t: client.executeAsync('geterr', { delay: 0, files: allFiles }, this._token.token);\n\n\t\t\trequest.finally(() => {\n\t\t\t\tif (this._done) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._done = true;\n\t\t\t\tonDone();\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic cancel(): any {\n\t\tif (!this._done) {\n\t\t\tthis._token.cancel();\n\t\t}\n\n\t\tthis._token.dispose();\n\t}\n}\n\nexport default class BufferSyncSupport extends Disposable {\n\n\tprivate readonly client: ITypeScriptServiceClient;\n\n\tprivate _validateJavaScript: boolean = true;\n\tprivate _validateTypeScript: boolean = true;\n\tprivate readonly modeIds: Set<string>;\n\tprivate readonly syncedBuffers: SyncedBufferMap;\n\tprivate readonly pendingDiagnostics: PendingDiagnostics;\n\tprivate readonly diagnosticDelayer: Delayer<any>;\n\tprivate pendingGetErr: GetErrRequest | undefined;\n\tprivate listening: boolean = false;\n\tprivate readonly synchronizer: BufferSynchronizer;\n\n\tconstructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tmodeIds: readonly string[],\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis.client = client;\n\t\tthis.modeIds = new Set<string>(modeIds);\n\n\t\tthis.diagnosticDelayer = new Delayer<any>(300);\n\n\t\tconst pathNormalizer = (path: vscode.Uri) => this.client.normalizedPath(path);\n\t\tthis.syncedBuffers = new SyncedBufferMap(pathNormalizer, { onCaseInsenitiveFileSystem });\n\t\tthis.pendingDiagnostics = new PendingDiagnostics(pathNormalizer, { onCaseInsenitiveFileSystem });\n\t\tthis.synchronizer = new BufferSynchronizer(client, pathNormalizer, onCaseInsenitiveFileSystem);\n\n\t\tthis.updateConfiguration();\n\t\tvscode.workspace.onDidChangeConfiguration(this.updateConfiguration, this, this._disposables);\n\t}\n\n\tprivate readonly _onDelete = this._register(new vscode.EventEmitter<vscode.Uri>());\n\tpublic readonly onDelete = this._onDelete.event;\n\n\tprivate readonly _onWillChange = this._register(new vscode.EventEmitter<vscode.Uri>());\n\tpublic readonly onWillChange = this._onWillChange.event;\n\n\tpublic listen(): void {\n\t\tif (this.listening) {\n\t\t\treturn;\n\t\t}\n\t\tthis.listening = true;\n\t\tvscode.workspace.onDidOpenTextDocument(this.openTextDocument, this, this._disposables);\n\t\tvscode.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument, this, this._disposables);\n\t\tvscode.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument, this, this._disposables);\n\t\tvscode.window.onDidChangeVisibleTextEditors(e => {\n\t\t\tfor (const { document } of e) {\n\t\t\t\tconst syncedBuffer = this.syncedBuffers.get(document.uri);\n\t\t\t\tif (syncedBuffer) {\n\t\t\t\t\tthis.requestDiagnostic(syncedBuffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this, this._disposables);\n\t\tvscode.workspace.textDocuments.forEach(this.openTextDocument, this);\n\t}\n\n\tpublic handles(resource: vscode.Uri): boolean {\n\t\treturn this.syncedBuffers.has(resource);\n\t}\n\n\tpublic ensureHasBuffer(resource: vscode.Uri): boolean {\n\t\tif (this.syncedBuffers.has(resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst existingDocument = vscode.workspace.textDocuments.find(doc => doc.uri.toString() === resource.toString());\n\t\tif (existingDocument) {\n\t\t\treturn this.openTextDocument(existingDocument);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic toVsCodeResource(resource: vscode.Uri): vscode.Uri {\n\t\tconst filepath = this.client.normalizedPath(resource);\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tif (buffer.filepath === filepath) {\n\t\t\t\treturn buffer.resource;\n\t\t\t}\n\t\t}\n\t\treturn resource;\n\t}\n\n\tpublic toResource(filePath: string): vscode.Uri {\n\t\tconst buffer = this.syncedBuffers.getForPath(filePath);\n\t\tif (buffer) {\n\t\t\treturn buffer.resource;\n\t\t}\n\t\treturn vscode.Uri.file(filePath);\n\t}\n\n\tpublic reset(): void {\n\t\tthis.pendingGetErr?.cancel();\n\t\tthis.pendingDiagnostics.clear();\n\t\tthis.synchronizer.reset();\n\t}\n\n\tpublic reinitialize(): void {\n\t\tthis.reset();\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tbuffer.open();\n\t\t}\n\t}\n\n\tpublic openTextDocument(document: vscode.TextDocument): boolean {\n\t\tif (!this.modeIds.has(document.languageId)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resource = document.uri;\n\t\tconst filepath = this.client.normalizedPath(resource);\n\t\tif (!filepath) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.syncedBuffers.has(resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst syncedBuffer = new SyncedBuffer(document, filepath, this.client, this.synchronizer);\n\t\tthis.syncedBuffers.set(resource, syncedBuffer);\n\t\tsyncedBuffer.open();\n\t\tthis.requestDiagnostic(syncedBuffer);\n\t\treturn true;\n\t}\n\n\tpublic closeResource(resource: vscode.Uri): void {\n\t\tconst syncedBuffer = this.syncedBuffers.get(resource);\n\t\tif (!syncedBuffer) {\n\t\t\treturn;\n\t\t}\n\t\tthis.pendingDiagnostics.delete(resource);\n\t\tthis.pendingGetErr?.files.delete(resource);\n\t\tthis.syncedBuffers.delete(resource);\n\t\tconst wasBufferOpen = syncedBuffer.close();\n\t\tthis._onDelete.fire(resource);\n\t\tif (wasBufferOpen) {\n\t\t\tthis.requestAllDiagnostics();\n\t\t}\n\t}\n\n\tpublic interruptGetErr<R>(f: () => R): R {\n\t\tif (!this.pendingGetErr\n\t\t\t|| this.client.configuration.enableProjectDiagnostics // `geterr` happens on seperate server so no need to cancel it.\n\t\t) {\n\t\t\treturn f();\n\t\t}\n\n\t\tthis.pendingGetErr.cancel();\n\t\tthis.pendingGetErr = undefined;\n\t\tconst result = f();\n\t\tthis.triggerDiagnostics();\n\t\treturn result;\n\t}\n\n\tpublic beforeCommand(command: string): void {\n\t\tthis.synchronizer.beforeCommand(command);\n\t}\n\n\tprivate onDidCloseTextDocument(document: vscode.TextDocument): void {\n\t\tthis.closeResource(document.uri);\n\t}\n\n\tprivate onDidChangeTextDocument(e: vscode.TextDocumentChangeEvent): void {\n\t\tconst syncedBuffer = this.syncedBuffers.get(e.document.uri);\n\t\tif (!syncedBuffer) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onWillChange.fire(syncedBuffer.resource);\n\n\t\tsyncedBuffer.onContentChanged(e.contentChanges);\n\t\tconst didTrigger = this.requestDiagnostic(syncedBuffer);\n\n\t\tif (!didTrigger && this.pendingGetErr) {\n\t\t\t// In this case we always want to re-trigger all diagnostics\n\t\t\tthis.pendingGetErr.cancel();\n\t\t\tthis.pendingGetErr = undefined;\n\t\t\tthis.triggerDiagnostics();\n\t\t}\n\t}\n\n\tpublic requestAllDiagnostics() {\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tif (this.shouldValidate(buffer)) {\n\t\t\t\tthis.pendingDiagnostics.set(buffer.resource, Date.now());\n\t\t\t}\n\t\t}\n\t\tthis.triggerDiagnostics();\n\t}\n\n\tpublic getErr(resources: readonly vscode.Uri[]): any {\n\t\tconst handledResources = resources.filter(resource => this.handles(resource));\n\t\tif (!handledResources.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const resource of handledResources) {\n\t\t\tthis.pendingDiagnostics.set(resource, Date.now());\n\t\t}\n\n\t\tthis.triggerDiagnostics();\n\t}\n\n\tprivate triggerDiagnostics(delay: number = 200) {\n\t\tthis.diagnosticDelayer.trigger(() => {\n\t\t\tthis.sendPendingDiagnostics();\n\t\t}, delay);\n\t}\n\n\tprivate requestDiagnostic(buffer: SyncedBuffer): boolean {\n\t\tif (!this.shouldValidate(buffer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.pendingDiagnostics.set(buffer.resource, Date.now());\n\n\t\tconst delay = Math.min(Math.max(Math.ceil(buffer.lineCount / 20), 300), 800);\n\t\tthis.triggerDiagnostics(delay);\n\t\treturn true;\n\t}\n\n\tpublic hasPendingDiagnostics(resource: vscode.Uri): boolean {\n\t\treturn this.pendingDiagnostics.has(resource);\n\t}\n\n\tprivate sendPendingDiagnostics(): void {\n\t\tconst orderedFileSet = this.pendingDiagnostics.getOrderedFileSet();\n\n\t\tif (this.pendingGetErr) {\n\t\t\tthis.pendingGetErr.cancel();\n\n\t\t\tfor (const { resource } of this.pendingGetErr.files.entries) {\n\t\t\t\tif (this.syncedBuffers.get(resource)) {\n\t\t\t\t\torderedFileSet.set(resource, undefined);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.pendingGetErr = undefined;\n\t\t}\n\n\t\t// Add all open TS buffers to the geterr request. They might be visible\n\t\tfor (const buffer of this.syncedBuffers.values) {\n\t\t\torderedFileSet.set(buffer.resource, undefined);\n\t\t}\n\n\t\tif (orderedFileSet.size) {\n\t\t\tconst getErr = this.pendingGetErr = GetErrRequest.executeGetErrRequest(this.client, orderedFileSet, () => {\n\t\t\t\tif (this.pendingGetErr === getErr) {\n\t\t\t\t\tthis.pendingGetErr = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.pendingDiagnostics.clear();\n\t}\n\n\tprivate updateConfiguration() {\n\t\tconst jsConfig = vscode.workspace.getConfiguration('javascript', null);\n\t\tconst tsConfig = vscode.workspace.getConfiguration('typescript', null);\n\n\t\tthis._validateJavaScript = jsConfig.get<boolean>('validate.enable', true);\n\t\tthis._validateTypeScript = tsConfig.get<boolean>('validate.enable', true);\n\t}\n\n\tprivate shouldValidate(buffer: SyncedBuffer) {\n\t\tswitch (buffer.kind) {\n\t\t\tcase BufferKind.JavaScript:\n\t\t\t\treturn this._validateJavaScript;\n\n\t\t\tcase BufferKind.TypeScript:\n\t\t\tdefault:\n\t\t\t\treturn this._validateTypeScript;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { OngoingRequestCancellerFactory } from '../tsServer/cancellation';\nimport { ClientCapabilities, ClientCapability, ServerType } from '../typescriptService';\nimport API from '../utils/api';\nimport { SeparateSyntaxServerConfiguration, TsServerLogLevel, TypeScriptServiceConfiguration } from '../utils/configuration';\nimport { Logger } from '../utils/logger';\nimport { isWeb } from '../utils/platform';\nimport { TypeScriptPluginPathsProvider } from '../utils/pluginPathsProvider';\nimport { PluginManager } from '../utils/plugins';\nimport { TelemetryReporter } from '../utils/telemetry';\nimport Tracer from '../utils/tracer';\nimport { ILogDirectoryProvider } from './logDirectoryProvider';\nimport { GetErrRoutingTsServer, ITypeScriptServer, ProcessBasedTsServer, SyntaxRoutingTsServer, TsServerDelegate, TsServerProcessFactory, TsServerProcessKind } from './server';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { ITypeScriptVersionProvider, TypeScriptVersion } from './versionProvider';\n\nconst enum CompositeServerType {\n\t/** Run a single server that handles all commands  */\n\tSingle,\n\n\t/** Run a separate server for syntax commands */\n\tSeparateSyntax,\n\n\t/** Use a separate syntax server while the project is loading */\n\tDynamicSeparateSyntax,\n\n\t/** Only enable the syntax server */\n\tSyntaxOnly\n}\n\nexport class TypeScriptServerSpawner {\n\tpublic constructor(\n\t\tprivate readonly _versionProvider: ITypeScriptVersionProvider,\n\t\tprivate readonly _versionManager: TypeScriptVersionManager,\n\t\tprivate readonly _logDirectoryProvider: ILogDirectoryProvider,\n\t\tprivate readonly _pluginPathsProvider: TypeScriptPluginPathsProvider,\n\t\tprivate readonly _logger: Logger,\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _tracer: Tracer,\n\t\tprivate readonly _factory: TsServerProcessFactory,\n\t) { }\n\n\tpublic spawn(\n\t\tversion: TypeScriptVersion,\n\t\tcapabilities: ClientCapabilities,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tpluginManager: PluginManager,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\tdelegate: TsServerDelegate,\n\t): ITypeScriptServer {\n\t\tlet primaryServer: ITypeScriptServer;\n\t\tconst serverType = this.getCompositeServerType(version, capabilities, configuration);\n\t\tswitch (serverType) {\n\t\t\tcase CompositeServerType.SeparateSyntax:\n\t\t\tcase CompositeServerType.DynamicSeparateSyntax:\n\t\t\t\t{\n\t\t\t\t\tconst enableDynamicRouting = serverType === CompositeServerType.DynamicSeparateSyntax;\n\t\t\t\t\tprimaryServer = new SyntaxRoutingTsServer({\n\t\t\t\t\t\tsyntax: this.spawnTsServer(TsServerProcessKind.Syntax, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\t\t\tsemantic: this.spawnTsServer(TsServerProcessKind.Semantic, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\t\t}, delegate, enableDynamicRouting);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase CompositeServerType.Single:\n\t\t\t\t{\n\t\t\t\t\tprimaryServer = this.spawnTsServer(TsServerProcessKind.Main, version, configuration, pluginManager, cancellerFactory);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase CompositeServerType.SyntaxOnly:\n\t\t\t\t{\n\t\t\t\t\tprimaryServer = this.spawnTsServer(TsServerProcessKind.Syntax, version, configuration, pluginManager, cancellerFactory);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\n\t\tif (this.shouldUseSeparateDiagnosticsServer(configuration)) {\n\t\t\treturn new GetErrRoutingTsServer({\n\t\t\t\tgetErr: this.spawnTsServer(TsServerProcessKind.Diagnostics, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\tprimary: primaryServer,\n\t\t\t}, delegate);\n\t\t}\n\n\t\treturn primaryServer;\n\t}\n\n\tprivate getCompositeServerType(\n\t\tversion: TypeScriptVersion,\n\t\tcapabilities: ClientCapabilities,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t): CompositeServerType {\n\t\tif (!capabilities.has(ClientCapability.Semantic)) {\n\t\t\treturn CompositeServerType.SyntaxOnly;\n\t\t}\n\n\t\tswitch (configuration.separateSyntaxServer) {\n\t\t\tcase SeparateSyntaxServerConfiguration.Disabled:\n\t\t\t\treturn CompositeServerType.Single;\n\n\t\t\tcase SeparateSyntaxServerConfiguration.Enabled:\n\t\t\t\tif (version.apiVersion?.gte(API.v340)) {\n\t\t\t\t\treturn version.apiVersion?.gte(API.v400)\n\t\t\t\t\t\t? CompositeServerType.DynamicSeparateSyntax\n\t\t\t\t\t\t: CompositeServerType.SeparateSyntax;\n\t\t\t\t}\n\t\t\t\treturn CompositeServerType.Single;\n\t\t}\n\t}\n\n\tprivate shouldUseSeparateDiagnosticsServer(\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t): boolean {\n\t\treturn configuration.enableProjectDiagnostics;\n\t}\n\n\tprivate spawnTsServer(\n\t\tkind: TsServerProcessKind,\n\t\tversion: TypeScriptVersion,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tpluginManager: PluginManager,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t): ITypeScriptServer {\n\t\tconst apiVersion = version.apiVersion || API.defaultVersion;\n\n\t\tconst canceller = cancellerFactory.create(kind, this._tracer);\n\t\tconst { args, tsServerLogFile, tsServerTraceDirectory } = this.getTsServerArgs(kind, configuration, version, apiVersion, pluginManager, canceller.cancellationPipeName);\n\n\t\tif (TypeScriptServerSpawner.isLoggingEnabled(configuration)) {\n\t\t\tif (tsServerLogFile) {\n\t\t\t\tthis._logger.info(`<${kind}> Log file: ${tsServerLogFile}`);\n\t\t\t} else {\n\t\t\t\tthis._logger.error(`<${kind}> Could not create log directory`);\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.enableTsServerTracing) {\n\t\t\tif (tsServerTraceDirectory) {\n\t\t\t\tthis._logger.info(`<${kind}> Trace directory: ${tsServerTraceDirectory}`);\n\t\t\t} else {\n\t\t\t\tthis._logger.error(`<${kind}> Could not create trace directory`);\n\t\t\t}\n\t\t}\n\n\t\tthis._logger.info(`<${kind}> Forking...`);\n\t\tconst process = this._factory.fork(version.tsServerPath, args, kind, configuration, this._versionManager);\n\t\tthis._logger.info(`<${kind}> Starting...`);\n\n\t\treturn new ProcessBasedTsServer(\n\t\t\tkind,\n\t\t\tthis.kindToServerType(kind),\n\t\t\tprocess!,\n\t\t\ttsServerLogFile,\n\t\t\tcanceller,\n\t\t\tversion,\n\t\t\tthis._telemetryReporter,\n\t\t\tthis._tracer);\n\t}\n\n\tprivate kindToServerType(kind: TsServerProcessKind): ServerType {\n\t\tswitch (kind) {\n\t\t\tcase TsServerProcessKind.Syntax:\n\t\t\t\treturn ServerType.Syntax;\n\n\t\t\tcase TsServerProcessKind.Main:\n\t\t\tcase TsServerProcessKind.Semantic:\n\t\t\tcase TsServerProcessKind.Diagnostics:\n\t\t\tdefault:\n\t\t\t\treturn ServerType.Semantic;\n\t\t}\n\t}\n\n\tprivate getTsServerArgs(\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tcurrentVersion: TypeScriptVersion,\n\t\tapiVersion: API,\n\t\tpluginManager: PluginManager,\n\t\tcancellationPipeName: string | undefined,\n\t): { args: string[], tsServerLogFile: string | undefined, tsServerTraceDirectory: string | undefined } {\n\t\tconst args: string[] = [];\n\t\tlet tsServerLogFile: string | undefined;\n\t\tlet tsServerTraceDirectory: string | undefined;\n\n\t\tif (kind === TsServerProcessKind.Syntax) {\n\t\t\tif (apiVersion.gte(API.v401)) {\n\t\t\t\targs.push('--serverMode', 'partialSemantic');\n\t\t\t} else {\n\t\t\t\targs.push('--syntaxOnly');\n\t\t\t}\n\t\t}\n\n\t\tif (apiVersion.gte(API.v250)) {\n\t\t\targs.push('--useInferredProjectPerProjectRoot');\n\t\t} else {\n\t\t\targs.push('--useSingleInferredProject');\n\t\t}\n\n\t\tif (configuration.disableAutomaticTypeAcquisition || kind === TsServerProcessKind.Syntax || kind === TsServerProcessKind.Diagnostics) {\n\t\t\targs.push('--disableAutomaticTypingAcquisition');\n\t\t}\n\n\t\tif (kind === TsServerProcessKind.Semantic || kind === TsServerProcessKind.Main) {\n\t\t\targs.push('--enableTelemetry');\n\t\t}\n\n\t\tif (cancellationPipeName) {\n\t\t\targs.push('--cancellationPipeName', cancellationPipeName + '*');\n\t\t}\n\n\t\tif (TypeScriptServerSpawner.isLoggingEnabled(configuration)) {\n\t\t\tif (isWeb()) {\n\t\t\t\targs.push('--logVerbosity', TsServerLogLevel.toString(configuration.tsServerLogLevel));\n\t\t\t} else {\n\t\t\t\tconst logDir = this._logDirectoryProvider.getNewLogDirectory();\n\t\t\t\tif (logDir) {\n\t\t\t\t\ttsServerLogFile = path.join(logDir, `tsserver.log`);\n\t\t\t\t\targs.push('--logVerbosity', TsServerLogLevel.toString(configuration.tsServerLogLevel));\n\t\t\t\t\targs.push('--logFile', tsServerLogFile);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.enableTsServerTracing && !isWeb()) {\n\t\t\ttsServerTraceDirectory = this._logDirectoryProvider.getNewLogDirectory();\n\t\t\tif (tsServerTraceDirectory) {\n\t\t\t\targs.push('--traceDirectory', tsServerTraceDirectory);\n\t\t\t}\n\t\t}\n\n\t\tif (!isWeb()) {\n\t\t\tconst pluginPaths = this._pluginPathsProvider.getPluginPaths();\n\n\t\t\tif (pluginManager.plugins.length) {\n\t\t\t\targs.push('--globalPlugins', pluginManager.plugins.map(x => x.name).join(','));\n\n\t\t\t\tconst isUsingBundledTypeScriptVersion = currentVersion.path === this._versionProvider.defaultVersion.path;\n\t\t\t\tfor (const plugin of pluginManager.plugins) {\n\t\t\t\t\tif (isUsingBundledTypeScriptVersion || plugin.enableForWorkspaceTypeScriptVersions) {\n\t\t\t\t\t\tpluginPaths.push(plugin.path);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (pluginPaths.length !== 0) {\n\t\t\t\targs.push('--pluginProbeLocations', pluginPaths.join(','));\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.npmLocation) {\n\t\t\targs.push('--npmLocation', `\"${configuration.npmLocation}\"`);\n\t\t}\n\n\t\tif (apiVersion.gte(API.v260)) {\n\t\t\targs.push('--locale', TypeScriptServerSpawner.getTsLocale(configuration));\n\t\t}\n\n\t\tif (apiVersion.gte(API.v291)) {\n\t\t\targs.push('--noGetErrOnBackgroundUpdate');\n\t\t}\n\n\t\tif (apiVersion.gte(API.v345)) {\n\t\t\targs.push('--validateDefaultNpmLocation');\n\t\t}\n\n\t\treturn { args, tsServerLogFile, tsServerTraceDirectory };\n\t}\n\n\tprivate static isLoggingEnabled(configuration: TypeScriptServiceConfiguration) {\n\t\treturn configuration.tsServerLogLevel !== TsServerLogLevel.Off;\n\t}\n\n\tprivate static getTsLocale(configuration: TypeScriptServiceConfiguration): string {\n\t\treturn configuration.locale\n\t\t\t? configuration.locale\n\t\t\t: vscode.env.language;\n\t}\n}\n\n",null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from './configuration';\nimport { RelativeWorkspacePathResolver } from './relativePathResolver';\n\n\nexport class TypeScriptPluginPathsProvider {\n\n\tpublic constructor(\n\t\tprivate configuration: TypeScriptServiceConfiguration\n\t) { }\n\n\tpublic updateConfiguration(configuration: TypeScriptServiceConfiguration): void {\n\t\tthis.configuration = configuration;\n\t}\n\n\tpublic getPluginPaths(): string[] {\n\t\tconst pluginPaths = [];\n\t\tfor (const pluginPath of this.configuration.tsServerPluginPaths) {\n\t\t\tpluginPaths.push(...this.resolvePluginPath(pluginPath));\n\t\t}\n\t\treturn pluginPaths;\n\t}\n\n\tprivate resolvePluginPath(pluginPath: string): string[] {\n\t\tif (path.isAbsolute(pluginPath)) {\n\t\t\treturn [pluginPath];\n\t\t}\n\n\t\tconst workspacePath = RelativeWorkspacePathResolver.asAbsoluteWorkspacePath(pluginPath);\n\t\tif (workspacePath !== undefined) {\n\t\t\treturn [workspacePath];\n\t\t}\n\n\t\treturn (vscode.workspace.workspaceFolders || [])\n\t\t\t.map(workspaceFolder => path.join(workspaceFolder.uri.fsPath, pluginPath));\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport VsCodeTelemetryReporter from 'vscode-extension-telemetry';\nimport { memoize } from './memoize';\n\ninterface PackageInfo {\n\treadonly name: string;\n\treadonly version: string;\n\treadonly aiKey: string;\n}\n\nexport interface TelemetryProperties {\n\treadonly [prop: string]: string | number | undefined;\n}\n\nexport interface TelemetryReporter {\n\tlogTelemetry(eventName: string, properties?: TelemetryProperties): void;\n\n\tdispose(): void;\n}\n\nexport class VSCodeTelemetryReporter implements TelemetryReporter {\n\tprivate _reporter: VsCodeTelemetryReporter | null = null;\n\n\tconstructor(\n\t\tprivate readonly clientVersionDelegate: () => string\n\t) { }\n\n\tpublic logTelemetry(eventName: string, properties: { [prop: string]: string } = {}) {\n\t\tconst reporter = this.reporter;\n\t\tif (!reporter) {\n\t\t\treturn;\n\t\t}\n\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptCommonProperties\" : {\n\t\t\t\t\"version\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tproperties['version'] = this.clientVersionDelegate();\n\n\t\treporter.sendTelemetryEvent(eventName, properties);\n\t}\n\n\tpublic dispose() {\n\t\tif (this._reporter) {\n\t\t\tthis._reporter.dispose();\n\t\t\tthis._reporter = null;\n\t\t}\n\t}\n\n\t@memoize\n\tprivate get reporter(): VsCodeTelemetryReporter | null {\n\t\tif (this.packageInfo && this.packageInfo.aiKey) {\n\t\t\tthis._reporter = new VsCodeTelemetryReporter(\n\t\t\t\tthis.packageInfo.name,\n\t\t\t\tthis.packageInfo.version,\n\t\t\t\tthis.packageInfo.aiKey);\n\t\t\treturn this._reporter;\n\t\t}\n\t\treturn null;\n\t}\n\n\t@memoize\n\tprivate get packageInfo(): PackageInfo | null {\n\t\tconst { packageJSON } = vscode.extensions.getExtension('vscode.typescript-language-features')!;\n\t\tif (packageJSON) {\n\t\t\treturn {\n\t\t\t\tname: packageJSON.name,\n\t\t\t\tversion: packageJSON.version,\n\t\t\t\taiKey: packageJSON.aiKey\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*---------------------------------------------------------\n * Copyright (C) Microsoft Corporation. All rights reserved.\n *--------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar vscode = require(\"vscode\");\nvar appInsights = require(\"applicationinsights\");\nvar TelemetryReporter = /** @class */ (function () {\n    // tslint:disable-next-line\n    function TelemetryReporter(extensionId, extensionVersion, key) {\n        var _this = this;\n        this.extensionId = extensionId;\n        this.extensionVersion = extensionVersion;\n        this.userOptIn = false;\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\n        }\n        this.updateUserOptIn(key);\n        this.configListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\n    }\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\n        if (this.userOptIn !== config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true)) {\n            this.userOptIn = config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true);\n            if (this.userOptIn) {\n                this.createAppInsightsClient(key);\n            }\n            else {\n                this.dispose();\n            }\n        }\n    };\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\n        //check if another instance is already initialized\n        if (appInsights.defaultClient) {\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\n            // no other way to enable offline mode\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\n        }\n        else {\n            appInsights.setup(key)\n                .setAutoCollectRequests(false)\n                .setAutoCollectPerformance(false)\n                .setAutoCollectExceptions(false)\n                .setAutoCollectDependencies(false)\n                .setAutoDependencyCorrelation(false)\n                .setAutoCollectConsole(false)\n                .setUseDiskRetryCaching(true)\n                .start();\n            this.appInsightsClient = appInsights.defaultClient;\n        }\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\n        if (vscode && vscode.env) {\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\n        }\n        //check if it's an Asimov key to change the endpoint\n        if (key && key.indexOf('AIF-') === 0) {\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\n        }\n    };\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n    TelemetryReporter.prototype.getCommonProperties = function () {\n        var commonProperties = Object.create(null);\n        commonProperties['common.os'] = os.platform();\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\n        commonProperties['common.extname'] = this.extensionId;\n        commonProperties['common.extversion'] = this.extensionVersion;\n        if (vscode && vscode.env) {\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\n            commonProperties['common.vscodeversion'] = vscode.version;\n        }\n        return commonProperties;\n    };\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\n        if (this.userOptIn && eventName && this.appInsightsClient) {\n            this.appInsightsClient.trackEvent({\n                name: this.extensionId + \"/\" + eventName,\n                properties: properties,\n                measurements: measurements\n            });\n            if (this.logStream) {\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\n            }\n        }\n    };\n    TelemetryReporter.prototype.dispose = function () {\n        var _this = this;\n        this.configListener.dispose();\n        var flushEventsToLogger = new Promise(function (resolve) {\n            if (!_this.logStream) {\n                return resolve(void 0);\n            }\n            _this.logStream.on('finish', resolve);\n            _this.logStream.end();\n        });\n        var flushEventsToAI = new Promise(function (resolve) {\n            if (_this.appInsightsClient) {\n                _this.appInsightsClient.flush({\n                    callback: function () {\n                        // all data flushed\n                        _this.appInsightsClient = undefined;\n                        resolve(void 0);\n                    }\n                });\n            }\n            else {\n                resolve(void 0);\n            }\n        });\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\n    };\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\n    return TelemetryReporter;\n}());\nexports.default = TelemetryReporter;\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\r\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\r\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\r\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\r\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\r\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\r\nvar Logging = require(\"./Library/Logging\");\r\n// We export these imports so that SDK users may use these classes directly.\r\n// They're exposed using \"export import\" so that types are passed along as expected\r\nexports.TelemetryClient = require(\"./Library/NodeClient\");\r\nexports.Contracts = require(\"./Declarations/Contracts\");\r\n// Default autocollection configuration\r\nvar _isConsole = true;\r\nvar _isConsoleLog = false;\r\nvar _isExceptions = true;\r\nvar _isPerformance = true;\r\nvar _isRequests = true;\r\nvar _isDependencies = true;\r\nvar _isDiskRetry = true;\r\nvar _isCorrelating = true;\r\nvar _diskRetryInterval = undefined;\r\nvar _diskRetryMaxBytes = undefined;\r\nvar _console;\r\nvar _exceptions;\r\nvar _performance;\r\nvar _serverRequests;\r\nvar _clientRequests;\r\nvar _isStarted = false;\r\n/**\r\n * Initializes the default client. Should be called after setting\r\n * configuration options.\r\n *\r\n * @param instrumentationKey the instrumentation key to use. Optional, if\r\n * this is not specified, the value will be read from the environment\r\n * variable APPINSIGHTS_INSTRUMENTATIONKEY.\r\n * @returns {Configuration} the configuration class to initialize\r\n * and start the SDK.\r\n */\r\nfunction setup(instrumentationKey) {\r\n    if (!exports.defaultClient) {\r\n        exports.defaultClient = new exports.TelemetryClient(instrumentationKey);\r\n        _console = new AutoCollectConsole(exports.defaultClient);\r\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\r\n        _performance = new AutoCollectPerformance(exports.defaultClient);\r\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\r\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\r\n    }\r\n    else {\r\n        Logging.info(\"The default client is already setup\");\r\n    }\r\n    if (exports.defaultClient && exports.defaultClient.channel) {\r\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\r\n    }\r\n    return Configuration;\r\n}\r\nexports.setup = setup;\r\n/**\r\n * Starts automatic collection of telemetry. Prior to calling start no\r\n * telemetry will be *automatically* collected, though manual collection\r\n * is enabled.\r\n * @returns {ApplicationInsights} this class\r\n */\r\nfunction start() {\r\n    if (!!exports.defaultClient) {\r\n        _isStarted = true;\r\n        _console.enable(_isConsole, _isConsoleLog);\r\n        _exceptions.enable(_isExceptions);\r\n        _performance.enable(_isPerformance);\r\n        _serverRequests.useAutoCorrelation(_isCorrelating);\r\n        _serverRequests.enable(_isRequests);\r\n        _clientRequests.enable(_isDependencies);\r\n    }\r\n    else {\r\n        Logging.warn(\"Start cannot be called before setup\");\r\n    }\r\n    return Configuration;\r\n}\r\nexports.start = start;\r\n/**\r\n * Returns an object that is shared across all code handling a given request.\r\n * This can be used similarly to thread-local storage in other languages.\r\n * Properties set on this object will be available to telemetry processors.\r\n *\r\n * Do not store sensitive information here.\r\n * Custom properties set on this object can be exposed in a future SDK\r\n * release via outgoing HTTP headers.\r\n * This is to allow for correlating data cross-component.\r\n *\r\n * This method will return null if automatic dependency correlation is disabled.\r\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\r\n */\r\nfunction getCorrelationContext() {\r\n    if (_isCorrelating) {\r\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\r\n    }\r\n    return null;\r\n}\r\nexports.getCorrelationContext = getCorrelationContext;\r\n/**\r\n * Returns a function that will get the same correlation context within its\r\n * function body as the code executing this function.\r\n * Use this method if automatic dependency correlation is not propagating\r\n * correctly to an asynchronous callback.\r\n */\r\nfunction wrapWithCorrelationContext(fn) {\r\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\r\n}\r\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\r\n/**\r\n * The active configuration for global SDK behaviors, such as autocollection.\r\n */\r\nvar Configuration = (function () {\r\n    function Configuration() {\r\n    }\r\n    /**\r\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\r\n     * @param value if true logger activity will be sent to Application Insights\r\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\r\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\r\n        _isConsole = value;\r\n        _isConsoleLog = collectConsoleLog;\r\n        if (_isStarted) {\r\n            _console.enable(value, collectConsoleLog);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of exception tracking (enabled by default)\r\n     * @param value if true uncaught exceptions will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectExceptions = function (value) {\r\n        _isExceptions = value;\r\n        if (_isStarted) {\r\n            _exceptions.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of performance tracking (enabled by default)\r\n     * @param value if true performance counters will be collected every second and sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectPerformance = function (value) {\r\n        _isPerformance = value;\r\n        if (_isStarted) {\r\n            _performance.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of request tracking (enabled by default)\r\n     * @param value if true requests will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectRequests = function (value) {\r\n        _isRequests = value;\r\n        if (_isStarted) {\r\n            _serverRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of dependency tracking (enabled by default)\r\n     * @param value if true dependencies will be sent to Application Insights\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoCollectDependencies = function (value) {\r\n        _isDependencies = value;\r\n        if (_isStarted) {\r\n            _clientRequests.enable(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Sets the state of automatic dependency correlation (enabled by default)\r\n     * @param value if true dependencies will be correlated with requests\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setAutoDependencyCorrelation = function (value) {\r\n        _isCorrelating = value;\r\n        if (_isStarted) {\r\n            _serverRequests.useAutoCorrelation(value);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\r\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        _isDiskRetry = value;\r\n        _diskRetryInterval = resendInterval;\r\n        _diskRetryMaxBytes = maxBytesOnDisk;\r\n        if (exports.defaultClient && exports.defaultClient.channel) {\r\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\r\n        }\r\n        return Configuration;\r\n    };\r\n    /**\r\n     * Enables debug and warning logging for AppInsights itself.\r\n     * @param enableDebugLogging if true, enables debug logging\r\n     * @param enableWarningLogging if true, enables warning logging\r\n     * @returns {Configuration} this class\r\n     */\r\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\r\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\r\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\r\n        Logging.enableDebug = enableDebugLogging;\r\n        Logging.disableWarnings = !enableWarningLogging;\r\n        return Configuration;\r\n    };\r\n    // Convenience shortcut to ApplicationInsights.start\r\n    Configuration.start = start;\r\n    return Configuration;\r\n}());\r\nexports.Configuration = Configuration;\r\n/**\r\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\r\n*/\r\nfunction dispose() {\r\n    exports.defaultClient = null;\r\n    _isStarted = false;\r\n    if (_console) {\r\n        _console.dispose();\r\n    }\r\n    if (_exceptions) {\r\n        _exceptions.dispose();\r\n    }\r\n    if (_performance) {\r\n        _performance.dispose();\r\n    }\r\n    if (_serverRequests) {\r\n        _serverRequests.dispose();\r\n    }\r\n    if (_clientRequests) {\r\n        _clientRequests.dispose();\r\n    }\r\n}\r\nexports.dispose = dispose;\r\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar bunyan = require(\"./bunyan.pub\");\r\nexports.bunyan = bunyan;\r\nvar consolePub = require(\"./console.pub\");\r\nexports.console = consolePub;\r\nvar mongodbCore = require(\"./mongodb-core.pub\");\r\nexports.mongodbCore = mongodbCore;\r\nvar mongodb = require(\"./mongodb.pub\");\r\nexports.mongodb = mongodb;\r\nvar mysql = require(\"./mysql.pub\");\r\nexports.mysql = mysql;\r\nvar pgPool = require(\"./pg-pool.pub\");\r\nexports.pgPool = pgPool;\r\nvar pg = require(\"./pg.pub\");\r\nexports.pg = pg;\r\nvar redis = require(\"./redis.pub\");\r\nexports.redis = redis;\r\nvar winston = require(\"./winston.pub\");\r\nexports.winston = winston;\r\nfunction enable() {\r\n    bunyan.enable();\r\n    consolePub.enable();\r\n    mongodbCore.enable();\r\n    mongodb.enable();\r\n    mysql.enable();\r\n    pg.enable();\r\n    pgPool.enable();\r\n    redis.enable();\r\n    winston.enable();\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar bunyanPatchFunction = function (originalBunyan) {\r\n    var originalEmit = originalBunyan.prototype._emit;\r\n    originalBunyan.prototype._emit = function (rec, noemit) {\r\n        var ret = originalEmit.apply(this, arguments);\r\n        if (!noemit) {\r\n            var str = ret;\r\n            if (!str) {\r\n                str = originalEmit.call(this, rec, true);\r\n            }\r\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\r\n        }\r\n        return ret;\r\n    };\r\n    return originalBunyan;\r\n};\r\nexports.bunyan = {\r\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\r\n    patch: bunyanPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.pub.js.map","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar stream_1 = require(\"stream\");\r\nvar consolePatchFunction = function (originalConsole) {\r\n    var aiLoggingOutStream = new stream_1.Writable();\r\n    var aiLoggingErrStream = new stream_1.Writable();\r\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\r\n    // We create a version which publishes to the channel and also to stdout/stderr\r\n    aiLoggingOutStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\r\n        return true;\r\n    };\r\n    aiLoggingErrStream.write = function (chunk) {\r\n        if (!chunk) {\r\n            return true;\r\n        }\r\n        var message = chunk.toString();\r\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\r\n        return true;\r\n    };\r\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\r\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\r\n    var _loop_1 = function (method) {\r\n        var originalMethod = originalConsole[method];\r\n        if (originalMethod) {\r\n            originalConsole[method] = function () {\r\n                if (aiLoggingConsole[method]) {\r\n                    try {\r\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore errors; allow the original method to throw if necessary\r\n                    }\r\n                }\r\n                return originalMethod.apply(originalConsole, arguments);\r\n            };\r\n        }\r\n    };\r\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\r\n        var method = consoleMethods_1[_i];\r\n        _loop_1(method);\r\n    }\r\n    return originalConsole;\r\n};\r\nexports.console = {\r\n    versionSpecifier: \">= 4.0.0\",\r\n    patch: consolePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\r\n    // Force patching of console\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    require(\"console\");\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.pub.js.map","module.exports = require(\"stream\");","module.exports = require(\"console\");","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbcorePatchFunction = function (originalMongoCore) {\r\n    var originalConnect = originalMongoCore.Server.prototype.connect;\r\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\r\n        var ret = originalConnect.apply(this, arguments);\r\n        // Messages sent to mongo progress through a pool\r\n        // This can result in context getting mixed between different responses\r\n        // so we wrap the callbacks to restore appropriate state\r\n        var originalWrite = this.s.pool.write;\r\n        this.s.pool.write = function contextPreservingWrite() {\r\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\r\n            if (typeof arguments[cbidx] === \"function\") {\r\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\r\n            }\r\n            return originalWrite.apply(this, arguments);\r\n        };\r\n        // Logout is a special case, it doesn't call the write function but instead\r\n        // directly calls into connection.write\r\n        var originalLogout = this.s.pool.logout;\r\n        this.s.pool.logout = function contextPreservingLogout() {\r\n            if (typeof arguments[1] === \"function\") {\r\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\r\n            }\r\n            return originalLogout.apply(this, arguments);\r\n        };\r\n        return ret;\r\n    };\r\n    return originalMongoCore;\r\n};\r\nexports.mongoCore2 = {\r\n    versionSpecifier: \">= 2.0.0 < 2.2.0\",\r\n    patch: mongodbcorePatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar mongodbPatchFunction = function (originalMongo) {\r\n    var listener = originalMongo.instrument({\r\n        operationIdGenerator: {\r\n            next: function () {\r\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\r\n            },\r\n        },\r\n    });\r\n    var eventMap = {};\r\n    listener.on(\"started\", function (event) {\r\n        if (eventMap[event.requestId]) {\r\n            // Note: Mongo can generate 2 completely separate requests\r\n            // which share the same requestId, if a certain race condition is triggered.\r\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\r\n            return;\r\n        }\r\n        eventMap[event.requestId] = event;\r\n    });\r\n    listener.on(\"succeeded\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\r\n    });\r\n    listener.on(\"failed\", function (event) {\r\n        var startedData = eventMap[event.requestId];\r\n        if (startedData) {\r\n            delete eventMap[event.requestId];\r\n        }\r\n        event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\r\n    });\r\n    return originalMongo;\r\n};\r\nexports.mongo2 = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.2.x\",\r\n    patch: mongodbPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar path = require(\"path\");\r\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\r\n    // The `name` passed in here is for debugging purposes,\r\n    // to help distinguish which object is being patched.\r\n    var patchObjectFunction = function (obj, name) {\r\n        return function (func, cbWrapper) {\r\n            var originalFunc = obj[func];\r\n            if (originalFunc) {\r\n                obj[func] = function mysqlContextPreserver() {\r\n                    // Find the callback, if there is one\r\n                    var cbidx = arguments.length - 1;\r\n                    for (var i = arguments.length - 1; i >= 0; --i) {\r\n                        if (typeof arguments[i] === \"function\") {\r\n                            cbidx = i;\r\n                            break;\r\n                        }\r\n                        else if (typeof arguments[i] !== \"undefined\") {\r\n                            break;\r\n                        }\r\n                    }\r\n                    var cb = arguments[cbidx];\r\n                    var resultContainer = { result: null, startTime: null };\r\n                    if (typeof cb === \"function\") {\r\n                        // Preserve context on the callback.\r\n                        // If this is one of the functions that we want to track,\r\n                        // then wrap the callback with the tracking wrapper\r\n                        if (cbWrapper) {\r\n                            resultContainer.startTime = process.hrtime();\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\r\n                        }\r\n                        else {\r\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\r\n                        }\r\n                    }\r\n                    var result = originalFunc.apply(this, arguments);\r\n                    resultContainer.result = result;\r\n                    return result;\r\n                };\r\n            }\r\n        };\r\n    };\r\n    var patchClassMemberFunction = function (classObject, name) {\r\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\r\n    };\r\n    var connectionCallbackFunctions = [\r\n        \"connect\", \"changeUser\",\r\n        \"ping\", \"statistics\", \"end\",\r\n    ];\r\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\r\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\r\n    // Connection.createQuery is a static method\r\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\r\n        return function (err) {\r\n            var hrDuration = process.hrtime(resultContainer.startTime);\r\n            /* tslint:disable-next-line:no-bitwise */\r\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration });\r\n            cb.apply(this, arguments);\r\n        };\r\n    });\r\n    var poolCallbackFunctions = [\r\n        \"_enqueueCallback\",\r\n    ];\r\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\r\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\r\n    return originalMysql;\r\n};\r\nexports.mysql = {\r\n    versionSpecifier: \">= 2.0.0 <= 2.14.x\",\r\n    patch: mysqlPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 145;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 146;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nfunction postgresPool1PatchFunction(originalPgPool) {\r\n    var originalConnect = originalPgPool.prototype.connect;\r\n    originalPgPool.prototype.connect = function connect(callback) {\r\n        if (callback) {\r\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\r\n        }\r\n        originalConnect.apply(this, arguments);\r\n    };\r\n    return originalPgPool;\r\n}\r\nexports.postgresPool1 = {\r\n    versionSpecifier: \"1.x\",\r\n    patch: postgresPool1PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar events_1 = require(\"events\");\r\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\r\n    var originalClientQuery = originalPg.Client.prototype.query;\r\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\r\n    // wherever the callback is passed, find it, save it, and remove it from the call\r\n    // to the the original .query() function\r\n    originalPg.Client.prototype.query = function query(config, values, callback) {\r\n        var data = {\r\n            query: {},\r\n            database: {\r\n                host: this.connectionParameters.host,\r\n                port: this.connectionParameters.port,\r\n            },\r\n            result: null,\r\n            error: null,\r\n            duration: 0,\r\n        };\r\n        var start = process.hrtime();\r\n        var queryResult;\r\n        function patchCallback(cb) {\r\n            if (cb && cb[diagnosticOriginalFunc]) {\r\n                cb = cb[diagnosticOriginalFunc];\r\n            }\r\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\r\n                var end = process.hrtime(start);\r\n                data.result = res && { rowCount: res.rowCount, command: res.command };\r\n                data.error = err;\r\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\r\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\r\n                // emulate weird internal behavior in pg@6\r\n                // on success, the callback is called *before* query events are emitted\r\n                // on failure, the callback is called *instead of* the query emitting events\r\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\r\n                // since we are always inserting ourselves as a callback, we have to restore the original\r\n                // behavior if the user didn't provide one themselves\r\n                if (err) {\r\n                    if (cb) {\r\n                        return cb.apply(this, arguments);\r\n                    }\r\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\r\n                        queryResult.emit(\"error\", err);\r\n                    }\r\n                }\r\n                else if (cb) {\r\n                    cb.apply(this, arguments);\r\n                }\r\n            });\r\n            try {\r\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\r\n                return trackingCallback;\r\n            }\r\n            catch (e) {\r\n                // this should never happen, but bailout in case it does\r\n                return cb;\r\n            }\r\n        }\r\n        // this function takes too many variations of arguments.\r\n        // this patches any provided callback or creates a new callback if one wasn't provided.\r\n        // since the callback is always called (if provided) in addition to always having a Promisified\r\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\r\n        try {\r\n            if (typeof config === \"string\") {\r\n                if (values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config,\r\n                        args: values,\r\n                    };\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else {\r\n                    data.query.text = config;\r\n                    // pg v6 will, for some reason, accept both\r\n                    // client.query(\"...\", undefined, () => {...})\r\n                    // **and**\r\n                    // client.query(\"...\", () => {...});\r\n                    // Internally, precedence is given to the callback argument\r\n                    if (callback) {\r\n                        callback = patchCallback(callback);\r\n                    }\r\n                    else {\r\n                        values = patchCallback(values);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (typeof config.name === \"string\") {\r\n                    data.query.plan = config.name;\r\n                }\r\n                else if (config.values instanceof Array) {\r\n                    data.query.preparable = {\r\n                        text: config.text,\r\n                        args: config.values,\r\n                    };\r\n                }\r\n                else {\r\n                    data.query.text = config.text;\r\n                }\r\n                if (callback) {\r\n                    callback = patchCallback(callback);\r\n                }\r\n                else if (values) {\r\n                    values = patchCallback(values);\r\n                }\r\n                else {\r\n                    config.callback = patchCallback(config.callback);\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            // if our logic here throws, bail out and just let pg do its thing\r\n            return originalClientQuery.apply(this, arguments);\r\n        }\r\n        arguments[0] = config;\r\n        arguments[1] = values;\r\n        arguments[2] = callback;\r\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\r\n        queryResult = originalClientQuery.apply(this, arguments);\r\n        return queryResult;\r\n    };\r\n    return originalPg;\r\n}\r\nexports.postgres6 = {\r\n    versionSpecifier: \"6.x\",\r\n    patch: postgres6PatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=pg.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar redisPatchFunction = function (originalRedis) {\r\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\r\n    // Note: This is mixing together both context tracking and dependency tracking\r\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\r\n        if (commandObj) {\r\n            var cb_1 = commandObj.callback;\r\n            if (!cb_1 || !cb_1.pubsubBound) {\r\n                var address_1 = this.address;\r\n                var startTime_1 = process.hrtime();\r\n                // Note: augmenting the callback on internal_send_command is correct for context\r\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\r\n                // which higher levels expect in some cases\r\n                // However, the only other option is to intercept every individual command.\r\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\r\n                    var hrDuration = process.hrtime(startTime_1);\r\n                    /* tslint:disable-next-line:no-bitwise */\r\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\r\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result });\r\n                    if (typeof cb_1 === \"function\") {\r\n                        cb_1.apply(this, arguments);\r\n                    }\r\n                });\r\n                commandObj.callback.pubsubBound = true;\r\n            }\r\n        }\r\n        return originalSend.call(this, commandObj);\r\n    };\r\n    return originalRedis;\r\n};\r\nexports.redis = {\r\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\r\n    patch: redisPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\n// register a \"filter\" with each logger that publishes the data about to be logged\r\nvar winstonPatchFunction = function (originalWinston) {\r\n    var originalLog = originalWinston.Logger.prototype.log;\r\n    var curLevels;\r\n    var loggingFilter = function (level, message, meta) {\r\n        var levelKind;\r\n        if (curLevels === originalWinston.config.npm.levels) {\r\n            levelKind = \"npm\";\r\n        }\r\n        else if (curLevels === originalWinston.config.syslog.levels) {\r\n            levelKind = \"syslog\";\r\n        }\r\n        else {\r\n            levelKind = \"unknown\";\r\n        }\r\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\r\n        return message;\r\n    };\r\n    // whenever someone logs, ensure our filter comes last\r\n    originalWinston.Logger.prototype.log = function log() {\r\n        curLevels = this.levels;\r\n        if (!this.filters || this.filters.length === 0) {\r\n            this.filters = [loggingFilter];\r\n        }\r\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\r\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\r\n            this.filters.push(loggingFilter);\r\n        }\r\n        return originalLog.apply(this, arguments);\r\n    };\r\n    return originalWinston;\r\n};\r\nexports.winston = {\r\n    versionSpecifier: \"2.x\",\r\n    patch: winstonPatchFunction,\r\n};\r\nfunction enable() {\r\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston);\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.pub.js.map","/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nvar Zone$1 = (function (global) {\n    if (global['Zone']) {\n        throw new Error('Zone already loaded.');\n    }\n    var Zone = (function () {\n        function Zone(parent, zoneSpec) {\n            this._properties = null;\n            this._parent = parent;\n            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';\n            this._properties = zoneSpec && zoneSpec.properties || {};\n            this._zoneDelegate =\n                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);\n        }\n        Zone.assertZonePatched = function () {\n            if (global.Promise !== ZoneAwarePromise) {\n                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +\n                    'has been overwritten.\\n' +\n                    'Most likely cause is that a Promise polyfill has been loaded ' +\n                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +\n                    'If you must load one, do so before loading zone.js.)');\n            }\n        };\n        Object.defineProperty(Zone, \"current\", {\n            get: function () {\n                return _currentZoneFrame.zone;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone, \"currentTask\", {\n            get: function () {\n                return _currentTask;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"parent\", {\n            get: function () {\n                return this._parent;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Object.defineProperty(Zone.prototype, \"name\", {\n            get: function () {\n                return this._name;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        \n        Zone.prototype.get = function (key) {\n            var zone = this.getZoneWith(key);\n            if (zone)\n                return zone._properties[key];\n        };\n        Zone.prototype.getZoneWith = function (key) {\n            var current = this;\n            while (current) {\n                if (current._properties.hasOwnProperty(key)) {\n                    return current;\n                }\n                current = current._parent;\n            }\n            return null;\n        };\n        Zone.prototype.fork = function (zoneSpec) {\n            if (!zoneSpec)\n                throw new Error('ZoneSpec required!');\n            return this._zoneDelegate.fork(this, zoneSpec);\n        };\n        Zone.prototype.wrap = function (callback, source) {\n            if (typeof callback !== 'function') {\n                throw new Error('Expecting function got: ' + callback);\n            }\n            var _callback = this._zoneDelegate.intercept(this, callback, source);\n            var zone = this;\n            return function () {\n                return zone.runGuarded(_callback, this, arguments, source);\n            };\n        };\n        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {\n            if (applyThis === void 0) { applyThis = null; }\n            if (applyArgs === void 0) { applyArgs = null; }\n            if (source === void 0) { source = null; }\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                try {\n                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n            }\n        };\n        Zone.prototype.runTask = function (task, applyThis, applyArgs) {\n            task.runCount++;\n            if (task.zone != this)\n                throw new Error('A task can only be run in the zone which created it! (Creation: ' + task.zone.name +\n                    '; Execution: ' + this.name + ')');\n            var previousTask = _currentTask;\n            _currentTask = task;\n            _currentZoneFrame = new ZoneFrame(_currentZoneFrame, this);\n            try {\n                if (task.type == 'macroTask' && task.data && !task.data.isPeriodic) {\n                    task.cancelFn = null;\n                }\n                try {\n                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);\n                }\n                catch (error) {\n                    if (this._zoneDelegate.handleError(this, error)) {\n                        throw error;\n                    }\n                }\n            }\n            finally {\n                _currentZoneFrame = _currentZoneFrame.parent;\n                _currentTask = previousTask;\n            }\n        };\n        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('microTask', this, source, callback, data, customSchedule, null));\n        };\n        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('macroTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {\n            return this._zoneDelegate.scheduleTask(this, new ZoneTask('eventTask', this, source, callback, data, customSchedule, customCancel));\n        };\n        Zone.prototype.cancelTask = function (task) {\n            var value = this._zoneDelegate.cancelTask(this, task);\n            task.runCount = -1;\n            task.cancelFn = null;\n            return value;\n        };\n        return Zone;\n    }());\n    Zone.__symbol__ = __symbol__;\n    \n    var ZoneDelegate = (function () {\n        function ZoneDelegate(zone, parentDelegate, zoneSpec) {\n            this._taskCounts = { microTask: 0, macroTask: 0, eventTask: 0 };\n            this.zone = zone;\n            this._parentDelegate = parentDelegate;\n            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);\n            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);\n            this._forkCurrZone = zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate.zone);\n            this._interceptZS =\n                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);\n            this._interceptDlgt =\n                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);\n            this._interceptCurrZone =\n                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate.zone);\n            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);\n            this._invokeDlgt =\n                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);\n            this._invokeCurrZone = zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate.zone);\n            this._handleErrorZS =\n                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);\n            this._handleErrorDlgt =\n                zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);\n            this._handleErrorCurrZone =\n                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate.zone);\n            this._scheduleTaskZS =\n                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);\n            this._scheduleTaskDlgt =\n                zoneSpec && (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);\n            this._scheduleTaskCurrZone =\n                zoneSpec && (zoneSpec.onScheduleTask ? this.zone : parentDelegate.zone);\n            this._invokeTaskZS =\n                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);\n            this._invokeTaskDlgt =\n                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);\n            this._invokeTaskCurrZone =\n                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate.zone);\n            this._cancelTaskZS =\n                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);\n            this._cancelTaskDlgt =\n                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);\n            this._cancelTaskCurrZone =\n                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate.zone);\n            this._hasTaskZS = zoneSpec && (zoneSpec.onHasTask ? zoneSpec : parentDelegate._hasTaskZS);\n            this._hasTaskDlgt =\n                zoneSpec && (zoneSpec.onHasTask ? parentDelegate : parentDelegate._hasTaskDlgt);\n            this._hasTaskCurrZone = zoneSpec && (zoneSpec.onHasTask ? this.zone : parentDelegate.zone);\n        }\n        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {\n            return this._forkZS ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :\n                new Zone(targetZone, zoneSpec);\n        };\n        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {\n            return this._interceptZS ?\n                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :\n                callback;\n        };\n        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {\n            return this._invokeZS ?\n                this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :\n                callback.apply(applyThis, applyArgs);\n        };\n        ZoneDelegate.prototype.handleError = function (targetZone, error) {\n            return this._handleErrorZS ?\n                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :\n                true;\n        };\n        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {\n            try {\n                if (this._scheduleTaskZS) {\n                    return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);\n                }\n                else if (task.scheduleFn) {\n                    task.scheduleFn(task);\n                }\n                else if (task.type == 'microTask') {\n                    scheduleMicroTask(task);\n                }\n                else {\n                    throw new Error('Task is missing scheduleFn.');\n                }\n                return task;\n            }\n            finally {\n                if (targetZone == this.zone) {\n                    this._updateTaskCount(task.type, 1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {\n            try {\n                return this._invokeTaskZS ?\n                    this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :\n                    task.callback.apply(applyThis, applyArgs);\n            }\n            finally {\n                if (targetZone == this.zone && (task.type != 'eventTask') &&\n                    !(task.data && task.data.isPeriodic)) {\n                    this._updateTaskCount(task.type, -1);\n                }\n            }\n        };\n        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {\n            var value;\n            if (this._cancelTaskZS) {\n                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);\n            }\n            else if (!task.cancelFn) {\n                throw new Error('Task does not support cancellation, or is already canceled.');\n            }\n            else {\n                value = task.cancelFn(task);\n            }\n            if (targetZone == this.zone) {\n                // this should not be in the finally block, because exceptions assume not canceled.\n                this._updateTaskCount(task.type, -1);\n            }\n            return value;\n        };\n        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {\n            return this._hasTaskZS &&\n                this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);\n        };\n        ZoneDelegate.prototype._updateTaskCount = function (type, count) {\n            var counts = this._taskCounts;\n            var prev = counts[type];\n            var next = counts[type] = prev + count;\n            if (next < 0) {\n                throw new Error('More tasks executed then were scheduled.');\n            }\n            if (prev == 0 || next == 0) {\n                var isEmpty = {\n                    microTask: counts.microTask > 0,\n                    macroTask: counts.macroTask > 0,\n                    eventTask: counts.eventTask > 0,\n                    change: type\n                };\n                try {\n                    this.hasTask(this.zone, isEmpty);\n                }\n                finally {\n                    if (this._parentDelegate) {\n                        this._parentDelegate._updateTaskCount(type, count);\n                    }\n                }\n            }\n        };\n        return ZoneDelegate;\n    }());\n    var ZoneTask = (function () {\n        function ZoneTask(type, zone, source, callback, options, scheduleFn, cancelFn) {\n            this.runCount = 0;\n            this.type = type;\n            this.zone = zone;\n            this.source = source;\n            this.data = options;\n            this.scheduleFn = scheduleFn;\n            this.cancelFn = cancelFn;\n            this.callback = callback;\n            var self = this;\n            this.invoke = function () {\n                _numberOfNestedTaskFrames++;\n                try {\n                    return zone.runTask(self, this, arguments);\n                }\n                finally {\n                    if (_numberOfNestedTaskFrames == 1) {\n                        drainMicroTaskQueue();\n                    }\n                    _numberOfNestedTaskFrames--;\n                }\n            };\n        }\n        ZoneTask.prototype.toString = function () {\n            if (this.data && typeof this.data.handleId !== 'undefined') {\n                return this.data.handleId;\n            }\n            else {\n                return Object.prototype.toString.call(this);\n            }\n        };\n        // add toJSON method to prevent cyclic error when\n        // call JSON.stringify(zoneTask)\n        ZoneTask.prototype.toJSON = function () {\n            return {\n                type: this.type,\n                source: this.source,\n                data: this.data,\n                zone: this.zone.name,\n                invoke: this.invoke,\n                scheduleFn: this.scheduleFn,\n                cancelFn: this.cancelFn,\n                runCount: this.runCount,\n                callback: this.callback\n            };\n        };\n        return ZoneTask;\n    }());\n    var ZoneFrame = (function () {\n        function ZoneFrame(parent, zone) {\n            this.parent = parent;\n            this.zone = zone;\n        }\n        return ZoneFrame;\n    }());\n    function __symbol__(name) {\n        return '__zone_symbol__' + name;\n    }\n    \n    var symbolSetTimeout = __symbol__('setTimeout');\n    var symbolPromise = __symbol__('Promise');\n    var symbolThen = __symbol__('then');\n    var _currentZoneFrame = new ZoneFrame(null, new Zone(null, null));\n    var _currentTask = null;\n    var _microTaskQueue = [];\n    var _isDrainingMicrotaskQueue = false;\n    var _uncaughtPromiseErrors = [];\n    var _numberOfNestedTaskFrames = 0;\n    function scheduleQueueDrain() {\n        // if we are not running in any task, and there has not been anything scheduled\n        // we must bootstrap the initial task creation by manually scheduling the drain\n        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {\n            // We are not running in Task, so we need to kickstart the microtask queue.\n            if (global[symbolPromise]) {\n                global[symbolPromise].resolve(0)[symbolThen](drainMicroTaskQueue);\n            }\n            else {\n                global[symbolSetTimeout](drainMicroTaskQueue, 0);\n            }\n        }\n    }\n    function scheduleMicroTask(task) {\n        scheduleQueueDrain();\n        _microTaskQueue.push(task);\n    }\n    function consoleError(e) {\n        var rejection = e && e.rejection;\n        if (rejection) {\n            console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection, rejection instanceof Error ? rejection.stack : undefined);\n        }\n        console.error(e);\n    }\n    function drainMicroTaskQueue() {\n        if (!_isDrainingMicrotaskQueue) {\n            _isDrainingMicrotaskQueue = true;\n            while (_microTaskQueue.length) {\n                var queue = _microTaskQueue;\n                _microTaskQueue = [];\n                for (var i = 0; i < queue.length; i++) {\n                    var task = queue[i];\n                    try {\n                        task.zone.runTask(task, null, null);\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                }\n            }\n            while (_uncaughtPromiseErrors.length) {\n                var _loop_1 = function () {\n                    var uncaughtPromiseError = _uncaughtPromiseErrors.shift();\n                    try {\n                        uncaughtPromiseError.zone.runGuarded(function () {\n                            throw uncaughtPromiseError;\n                        });\n                    }\n                    catch (e) {\n                        consoleError(e);\n                    }\n                };\n                while (_uncaughtPromiseErrors.length) {\n                    _loop_1();\n                }\n            }\n            _isDrainingMicrotaskQueue = false;\n        }\n    }\n    function isThenable(value) {\n        return value && value.then;\n    }\n    function forwardResolution(value) {\n        return value;\n    }\n    function forwardRejection(rejection) {\n        return ZoneAwarePromise.reject(rejection);\n    }\n    var symbolState = __symbol__('state');\n    var symbolValue = __symbol__('value');\n    var source = 'Promise.then';\n    var UNRESOLVED = null;\n    var RESOLVED = true;\n    var REJECTED = false;\n    var REJECTED_NO_CATCH = 0;\n    function makeResolver(promise, state) {\n        return function (v) {\n            resolvePromise(promise, state, v);\n            // Do not return value or you will break the Promise spec.\n        };\n    }\n    function resolvePromise(promise, state, value) {\n        if (promise[symbolState] === UNRESOLVED) {\n            if (value instanceof ZoneAwarePromise && value.hasOwnProperty(symbolState) &&\n                value.hasOwnProperty(symbolValue) && value[symbolState] !== UNRESOLVED) {\n                clearRejectedNoCatch(value);\n                resolvePromise(promise, value[symbolState], value[symbolValue]);\n            }\n            else if (isThenable(value)) {\n                value.then(makeResolver(promise, state), makeResolver(promise, false));\n            }\n            else {\n                promise[symbolState] = state;\n                var queue = promise[symbolValue];\n                promise[symbolValue] = value;\n                for (var i = 0; i < queue.length;) {\n                    scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);\n                }\n                if (queue.length == 0 && state == REJECTED) {\n                    promise[symbolState] = REJECTED_NO_CATCH;\n                    try {\n                        throw new Error('Uncaught (in promise): ' + value +\n                            (value && value.stack ? '\\n' + value.stack : ''));\n                    }\n                    catch (e) {\n                        var error_1 = e;\n                        error_1.rejection = value;\n                        error_1.promise = promise;\n                        error_1.zone = Zone.current;\n                        error_1.task = Zone.currentTask;\n                        _uncaughtPromiseErrors.push(error_1);\n                        scheduleQueueDrain();\n                    }\n                }\n            }\n        }\n        // Resolving an already resolved promise is a noop.\n        return promise;\n    }\n    function clearRejectedNoCatch(promise) {\n        if (promise[symbolState] === REJECTED_NO_CATCH) {\n            promise[symbolState] = REJECTED;\n            for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {\n                if (promise === _uncaughtPromiseErrors[i].promise) {\n                    _uncaughtPromiseErrors.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    }\n    function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {\n        clearRejectedNoCatch(promise);\n        var delegate = promise[symbolState] ? onFulfilled || forwardResolution : onRejected || forwardRejection;\n        zone.scheduleMicroTask(source, function () {\n            try {\n                resolvePromise(chainPromise, true, zone.run(delegate, null, [promise[symbolValue]]));\n            }\n            catch (error) {\n                resolvePromise(chainPromise, false, error);\n            }\n        });\n    }\n    var ZoneAwarePromise = (function () {\n        function ZoneAwarePromise(executor) {\n            var promise = this;\n            if (!(promise instanceof ZoneAwarePromise)) {\n                throw new Error('Must be an instanceof Promise.');\n            }\n            promise[symbolState] = UNRESOLVED;\n            promise[symbolValue] = []; // queue;\n            try {\n                executor && executor(makeResolver(promise, RESOLVED), makeResolver(promise, REJECTED));\n            }\n            catch (e) {\n                resolvePromise(promise, false, e);\n            }\n        }\n        ZoneAwarePromise.toString = function () {\n            return 'function ZoneAwarePromise() { [native code] }';\n        };\n        ZoneAwarePromise.resolve = function (value) {\n            return resolvePromise(new this(null), RESOLVED, value);\n        };\n        ZoneAwarePromise.reject = function (error) {\n            return resolvePromise(new this(null), REJECTED, error);\n        };\n        ZoneAwarePromise.race = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                _a = [res, rej], resolve = _a[0], reject = _a[1];\n                var _a;\n            });\n            function onResolve(value) {\n                promise && (promise = null || resolve(value));\n            }\n            function onReject(error) {\n                promise && (promise = null || reject(error));\n            }\n            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n                var value = values_1[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then(onResolve, onReject);\n            }\n            return promise;\n        };\n        ZoneAwarePromise.all = function (values) {\n            var resolve;\n            var reject;\n            var promise = new this(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            var count = 0;\n            var resolvedValues = [];\n            for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {\n                var value = values_2[_i];\n                if (!isThenable(value)) {\n                    value = this.resolve(value);\n                }\n                value.then((function (index) { return function (value) {\n                    resolvedValues[index] = value;\n                    count--;\n                    if (!count) {\n                        resolve(resolvedValues);\n                    }\n                }; })(count), reject);\n                count++;\n            }\n            if (!count)\n                resolve(resolvedValues);\n            return promise;\n        };\n        ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {\n            var chainPromise = new this.constructor(null);\n            var zone = Zone.current;\n            if (this[symbolState] == UNRESOLVED) {\n                this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);\n            }\n            else {\n                scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);\n            }\n            return chainPromise;\n        };\n        ZoneAwarePromise.prototype.catch = function (onRejected) {\n            return this.then(null, onRejected);\n        };\n        return ZoneAwarePromise;\n    }());\n    // Protect against aggressive optimizers dropping seemingly unused properties.\n    // E.g. Closure Compiler in advanced mode.\n    ZoneAwarePromise['resolve'] = ZoneAwarePromise.resolve;\n    ZoneAwarePromise['reject'] = ZoneAwarePromise.reject;\n    ZoneAwarePromise['race'] = ZoneAwarePromise.race;\n    ZoneAwarePromise['all'] = ZoneAwarePromise.all;\n    var NativePromise = global[__symbol__('Promise')] = global['Promise'];\n    global['Promise'] = ZoneAwarePromise;\n    function patchThen(NativePromise) {\n        var NativePromiseProtototype = NativePromise.prototype;\n        var NativePromiseThen = NativePromiseProtototype[__symbol__('then')] =\n            NativePromiseProtototype.then;\n        NativePromiseProtototype.then = function (onResolve, onReject) {\n            var nativePromise = this;\n            return new ZoneAwarePromise(function (resolve, reject) {\n                NativePromiseThen.call(nativePromise, resolve, reject);\n            })\n                .then(onResolve, onReject);\n        };\n    }\n    if (NativePromise) {\n        patchThen(NativePromise);\n        if (typeof global['fetch'] !== 'undefined') {\n            var fetchPromise = void 0;\n            try {\n                // In MS Edge this throws\n                fetchPromise = global['fetch']();\n            }\n            catch (e) {\n                // In Chrome this throws instead.\n                fetchPromise = global['fetch']('about:blank');\n            }\n            // ignore output to prevent error;\n            fetchPromise.then(function () { return null; }, function () { return null; });\n            if (fetchPromise.constructor != NativePromise &&\n                fetchPromise.constructor != ZoneAwarePromise) {\n                patchThen(fetchPromise.constructor);\n            }\n        }\n    }\n    // This is not part of public API, but it is usefull for tests, so we expose it.\n    Promise[Zone.__symbol__('uncaughtPromiseErrors')] = _uncaughtPromiseErrors;\n    /*\n     * This code patches Error so that:\n     *   - It ignores un-needed stack frames.\n     *   - It Shows the associated Zone for reach frame.\n     */\n    var FrameType;\n    (function (FrameType) {\n        /// Skip this frame when printing out stack\n        FrameType[FrameType[\"blackList\"] = 0] = \"blackList\";\n        /// This frame marks zone transition\n        FrameType[FrameType[\"transition\"] = 1] = \"transition\";\n    })(FrameType || (FrameType = {}));\n    var NativeError = global[__symbol__('Error')] = global.Error;\n    // Store the frames which should be removed from the stack frames\n    var blackListedStackFrames = {};\n    // We must find the frame where Error was created, otherwise we assume we don't understand stack\n    var zoneAwareFrame;\n    global.Error = ZoneAwareError;\n    // How should the stack frames be parsed.\n    var frameParserStrategy = null;\n    var stackRewrite = 'stackRewrite';\n    // fix #595, create property descriptor\n    // for error properties\n    var createProperty = function (props, key) {\n        // if property is already defined, skip it.\n        if (props[key]) {\n            return;\n        }\n        // define a local property\n        // in case error property is not settable\n        var name = __symbol__(key);\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                // if local property has no value\n                // use internal error's property value\n                if (!this[name]) {\n                    var error_2 = this[__symbol__('error')];\n                    if (error_2) {\n                        this[name] = error_2[key];\n                    }\n                }\n                return this[name];\n            },\n            set: function (value) {\n                // setter will set value to local property value\n                this[name] = value;\n            }\n        };\n    };\n    // fix #595, create property descriptor\n    // for error method properties\n    var createMethodProperty = function (props, key) {\n        if (props[key]) {\n            return;\n        }\n        props[key] = {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function () {\n                var error = this[__symbol__('error')];\n                var errorMethod = (error && error[key]) || this[key];\n                if (errorMethod) {\n                    return errorMethod.apply(error, arguments);\n                }\n            }\n        };\n    };\n    var createErrorProperties = function () {\n        var props = Object.create(null);\n        var error = new NativeError();\n        var keys = Object.getOwnPropertyNames(error);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(error, key)) {\n                createProperty(props, key);\n            }\n        }\n        var proto = NativeError.prototype;\n        if (proto) {\n            var pKeys = Object.getOwnPropertyNames(proto);\n            for (var i = 0; i < pKeys.length; i++) {\n                var key = pKeys[i];\n                // skip constructor\n                if (key !== 'constructor' && key !== 'toString' && key !== 'toSource') {\n                    createProperty(props, key);\n                }\n            }\n        }\n        // some other properties are not\n        // in NativeError\n        createProperty(props, 'originalStack');\n        createProperty(props, 'zoneAwareStack');\n        // define toString, toSource as method property\n        createMethodProperty(props, 'toString');\n        createMethodProperty(props, 'toSource');\n        return props;\n    };\n    var errorProperties = createErrorProperties();\n    // for derived Error class which extends ZoneAwareError\n    // we should not override the derived class's property\n    // so we create a new props object only copy the properties\n    // from errorProperties which not exist in derived Error's prototype\n    var getErrorPropertiesForPrototype = function (prototype) {\n        // if the prototype is ZoneAwareError.prototype\n        // we just return the prebuilt errorProperties.\n        if (prototype === ZoneAwareError.prototype) {\n            return errorProperties;\n        }\n        var newProps = Object.create(null);\n        var cKeys = Object.getOwnPropertyNames(errorProperties);\n        var keys = Object.getOwnPropertyNames(prototype);\n        cKeys.forEach(function (cKey) {\n            if (keys.filter(function (key) {\n                return key === cKey;\n            })\n                .length === 0) {\n                newProps[cKey] = errorProperties[cKey];\n            }\n        });\n        return newProps;\n    };\n    /**\n     * This is ZoneAwareError which processes the stack frame and cleans up extra frames as well as\n     * adds zone information to it.\n     */\n    function ZoneAwareError() {\n        // make sure we have a valid this\n        // if this is undefined(call Error without new) or this is global\n        // or this is some other objects, we should force to create a\n        // valid ZoneAwareError by call Object.create()\n        if (!(this instanceof ZoneAwareError)) {\n            return ZoneAwareError.apply(Object.create(ZoneAwareError.prototype), arguments);\n        }\n        // Create an Error.\n        var error = NativeError.apply(this, arguments);\n        this[__symbol__('error')] = error;\n        // Save original stack trace\n        error.originalStack = error.stack;\n        // Process the stack trace and rewrite the frames.\n        if (ZoneAwareError[stackRewrite] && error.originalStack) {\n            var frames_1 = error.originalStack.split('\\n');\n            var zoneFrame = _currentZoneFrame;\n            var i = 0;\n            // Find the first frame\n            while (frames_1[i] !== zoneAwareFrame && i < frames_1.length) {\n                i++;\n            }\n            for (; i < frames_1.length && zoneFrame; i++) {\n                var frame = frames_1[i];\n                if (frame.trim()) {\n                    var frameType = blackListedStackFrames.hasOwnProperty(frame) && blackListedStackFrames[frame];\n                    if (frameType === FrameType.blackList) {\n                        frames_1.splice(i, 1);\n                        i--;\n                    }\n                    else if (frameType === FrameType.transition) {\n                        if (zoneFrame.parent) {\n                            // This is the special frame where zone changed. Print and process it accordingly\n                            frames_1[i] += \" [\" + zoneFrame.parent.zone.name + \" => \" + zoneFrame.zone.name + \"]\";\n                            zoneFrame = zoneFrame.parent;\n                        }\n                        else {\n                            zoneFrame = null;\n                        }\n                    }\n                    else {\n                        frames_1[i] += \" [\" + zoneFrame.zone.name + \"]\";\n                    }\n                }\n            }\n            error.stack = error.zoneAwareStack = frames_1.join('\\n');\n        }\n        // use defineProperties here instead of copy property value\n        // because of issue #595 which will break angular2.\n        Object.defineProperties(this, getErrorPropertiesForPrototype(Object.getPrototypeOf(this)));\n        return this;\n    }\n    // Copy the prototype so that instanceof operator works as expected\n    ZoneAwareError.prototype = NativeError.prototype;\n    ZoneAwareError[Zone.__symbol__('blacklistedStackFrames')] = blackListedStackFrames;\n    ZoneAwareError[stackRewrite] = false;\n    if (NativeError.hasOwnProperty('stackTraceLimit')) {\n        // Extend default stack limit as we will be removing few frames.\n        NativeError.stackTraceLimit = Math.max(NativeError.stackTraceLimit, 15);\n        // make sure that ZoneAwareError has the same property which forwards to NativeError.\n        Object.defineProperty(ZoneAwareError, 'stackTraceLimit', {\n            get: function () {\n                return NativeError.stackTraceLimit;\n            },\n            set: function (value) {\n                return NativeError.stackTraceLimit = value;\n            }\n        });\n    }\n    if (NativeError.hasOwnProperty('captureStackTrace')) {\n        Object.defineProperty(ZoneAwareError, 'captureStackTrace', {\n            // add named function here because we need to remove this\n            // stack frame when prepareStackTrace below\n            value: function zoneCaptureStackTrace(targetObject, constructorOpt) {\n                NativeError.captureStackTrace(targetObject, constructorOpt);\n            }\n        });\n    }\n    Object.defineProperty(ZoneAwareError, 'prepareStackTrace', {\n        get: function () {\n            return NativeError.prepareStackTrace;\n        },\n        set: function (value) {\n            if (!value || typeof value !== 'function') {\n                return NativeError.prepareStackTrace = value;\n            }\n            return NativeError.prepareStackTrace = function (error, structuredStackTrace) {\n                // remove additional stack information from ZoneAwareError.captureStackTrace\n                if (structuredStackTrace) {\n                    for (var i = 0; i < structuredStackTrace.length; i++) {\n                        var st = structuredStackTrace[i];\n                        // remove the first function which name is zoneCaptureStackTrace\n                        if (st.getFunctionName() === 'zoneCaptureStackTrace') {\n                            structuredStackTrace.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n                return value.apply(this, [error, structuredStackTrace]);\n            };\n        }\n    });\n    // Now we need to populet the `blacklistedStackFrames` as well as find the\n    // run/runGuraded/runTask frames. This is done by creating a detect zone and then threading\n    // the execution through all of the above methods so that we can look at the stack trace and\n    // find the frames of interest.\n    var detectZone = Zone.current.fork({\n        name: 'detect',\n        onInvoke: function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n            // Here only so that it will show up in the stack frame so that it can be black listed.\n            return parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source);\n        },\n        onHandleError: function (parentZD, current, target, error) {\n            if (error.originalStack && Error === ZoneAwareError) {\n                var frames_2 = error.originalStack.split(/\\n/);\n                var runFrame = false, runGuardedFrame = false, runTaskFrame = false;\n                while (frames_2.length) {\n                    var frame = frames_2.shift();\n                    // On safari it is possible to have stack frame with no line number.\n                    // This check makes sure that we don't filter frames on name only (must have\n                    // linenumber)\n                    if (/:\\d+:\\d+/.test(frame)) {\n                        // Get rid of the path so that we don't accidintely find function name in path.\n                        // In chrome the seperator is `(` and `@` in FF and safari\n                        // Chrome: at Zone.run (zone.js:100)\n                        // Chrome: at Zone.run (http://localhost:9876/base/build/lib/zone.js:100:24)\n                        // FireFox: Zone.prototype.run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        // Safari: run@http://localhost:9876/base/build/lib/zone.js:101:24\n                        var fnName = frame.split('(')[0].split('@')[0];\n                        var frameType = FrameType.transition;\n                        if (fnName.indexOf('ZoneAwareError') !== -1) {\n                            zoneAwareFrame = frame;\n                        }\n                        if (fnName.indexOf('runGuarded') !== -1) {\n                            runGuardedFrame = true;\n                        }\n                        else if (fnName.indexOf('runTask') !== -1) {\n                            runTaskFrame = true;\n                        }\n                        else if (fnName.indexOf('run') !== -1) {\n                            runFrame = true;\n                        }\n                        else {\n                            frameType = FrameType.blackList;\n                        }\n                        blackListedStackFrames[frame] = frameType;\n                        // Once we find all of the frames we can stop looking.\n                        if (runFrame && runGuardedFrame && runTaskFrame) {\n                            ZoneAwareError[stackRewrite] = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            return false;\n        }\n    });\n    // carefully constructor a stack frame which contains all of the frames of interest which\n    // need to be detected and blacklisted.\n    var detectRunFn = function () {\n        detectZone.run(function () {\n            detectZone.runGuarded(function () {\n                throw new Error('blacklistStackFrames');\n            });\n        });\n    };\n    // Cause the error to extract the stack frames.\n    detectZone.runTask(detectZone.scheduleMacroTask('detect', detectRunFn, null, function () { return null; }, null));\n    return global['Zone'] = Zone;\n})(typeof window === 'object' && window || typeof self === 'object' && self || global);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Suppress closure compiler errors about unknown 'Zone' variable\n * @fileoverview\n * @suppress {undefinedVars}\n */\nvar zoneSymbol = function (n) { return \"__zone_symbol__\" + n; };\nvar _global$1 = typeof window === 'object' && window || typeof self === 'object' && self || global;\nfunction bindArguments(args, source) {\n    for (var i = args.length - 1; i >= 0; i--) {\n        if (typeof args[i] === 'function') {\n            args[i] = Zone.current.wrap(args[i], source + '_' + i);\n        }\n    }\n    return args;\n}\n\n\nvar isNode = (!('nw' in _global$1) && typeof process !== 'undefined' &&\n    {}.toString.call(process) === '[object process]');\n\n\n\n\n\nvar EVENT_TASKS = zoneSymbol('eventTasks');\n// For EventTarget\nvar ADD_EVENT_LISTENER = 'addEventListener';\nvar REMOVE_EVENT_LISTENER = 'removeEventListener';\nfunction findExistingRegisteredTask(target, handler, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        for (var i = 0; i < eventTasks.length; i++) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            var listener = data.handler;\n            if ((data.handler === handler || listener.listener === handler) &&\n                data.useCapturing === capture && data.eventName === name) {\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n                return eventTask;\n            }\n        }\n    }\n    return null;\n}\nfunction findAllExistingRegisteredTasks(target, name, capture, remove) {\n    var eventTasks = target[EVENT_TASKS];\n    if (eventTasks) {\n        var result = [];\n        for (var i = eventTasks.length - 1; i >= 0; i--) {\n            var eventTask = eventTasks[i];\n            var data = eventTask.data;\n            if (data.eventName === name && data.useCapturing === capture) {\n                result.push(eventTask);\n                if (remove) {\n                    eventTasks.splice(i, 1);\n                }\n            }\n        }\n        return result;\n    }\n    return null;\n}\nfunction attachRegisteredEvent(target, eventTask, isPrepend) {\n    var eventTasks = target[EVENT_TASKS];\n    if (!eventTasks) {\n        eventTasks = target[EVENT_TASKS] = [];\n    }\n    if (isPrepend) {\n        eventTasks.unshift(eventTask);\n    }\n    else {\n        eventTasks.push(eventTask);\n    }\n}\nvar defaultListenerMetaCreator = function (self, args) {\n    return {\n        useCapturing: args[2],\n        eventName: args[0],\n        handler: args[1],\n        target: self || _global$1,\n        name: args[0],\n        invokeAddFunc: function (addFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[addFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[addFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        },\n        invokeRemoveFunc: function (removeFnSymbol, delegate) {\n            if (delegate && delegate.invoke) {\n                return this.target[removeFnSymbol](this.eventName, delegate.invoke, this.useCapturing);\n            }\n            else {\n                return this.target[removeFnSymbol](this.eventName, delegate, this.useCapturing);\n            }\n        }\n    };\n};\nfunction makeZoneAwareAddListener(addFnName, removeFnName, useCapturingParam, allowDuplicates, isPrepend, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (allowDuplicates === void 0) { allowDuplicates = false; }\n    if (isPrepend === void 0) { isPrepend = false; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var addFnSymbol = zoneSymbol(addFnName);\n    var removeFnSymbol = zoneSymbol(removeFnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    function scheduleEventListener(eventTask) {\n        var meta = eventTask.data;\n        attachRegisteredEvent(meta.target, eventTask, isPrepend);\n        return meta.invokeAddFunc(addFnSymbol, eventTask);\n    }\n    function cancelEventListener(eventTask) {\n        var meta = eventTask.data;\n        findExistingRegisteredTask(meta.target, eventTask.invoke, meta.eventName, meta.useCapturing, true);\n        return meta.invokeRemoveFunc(removeFnSymbol, eventTask);\n    }\n    return function zoneAwareAddListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var delegate = null;\n        if (typeof data.handler == 'function') {\n            delegate = data.handler;\n        }\n        else if (data.handler && data.handler.handleEvent) {\n            delegate = function (event) { return data.handler.handleEvent(event); };\n        }\n        var validZoneHandler = false;\n        try {\n            // In cross site contexts (such as WebDriver frameworks like Selenium),\n            // accessing the handler object here will cause an exception to be thrown which\n            // will fail tests prematurely.\n            validZoneHandler = data.handler && data.handler.toString() === '[object FunctionWrapper]';\n        }\n        catch (e) {\n            // Returning nothing here is fine, because objects in a cross-site context are unusable\n            return;\n        }\n        // Ignore special listeners of IE11 & Edge dev tools, see\n        // https://github.com/angular/zone.js/issues/150\n        if (!delegate || validZoneHandler) {\n            return data.invokeAddFunc(addFnSymbol, data.handler);\n        }\n        if (!allowDuplicates) {\n            var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, false);\n            if (eventTask) {\n                // we already registered, so this will have noop.\n                return data.invokeAddFunc(addFnSymbol, eventTask);\n            }\n        }\n        var zone = Zone.current;\n        var source = data.target.constructor['name'] + '.' + addFnName + ':' + data.eventName;\n        zone.scheduleEventTask(source, delegate, data, scheduleEventListener, cancelEventListener);\n    };\n}\nfunction makeZoneAwareRemoveListener(fnName, useCapturingParam, metaCreator) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    if (metaCreator === void 0) { metaCreator = defaultListenerMetaCreator; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveListener(self, args) {\n        var data = metaCreator(self, args);\n        data.useCapturing = data.useCapturing || defaultUseCapturing;\n        // - Inside a Web Worker, `this` is undefined, the context is `global`\n        // - When `addEventListener` is called on the global context in strict mode, `this` is undefined\n        // see https://github.com/angular/zone.js/issues/190\n        var eventTask = findExistingRegisteredTask(data.target, data.handler, data.eventName, data.useCapturing, true);\n        if (eventTask) {\n            eventTask.zone.cancelTask(eventTask);\n        }\n        else {\n            data.invokeRemoveFunc(symbol, data.handler);\n        }\n    };\n}\nfunction makeZoneAwareRemoveAllListeners(fnName, useCapturingParam) {\n    if (useCapturingParam === void 0) { useCapturingParam = true; }\n    var symbol = zoneSymbol(fnName);\n    var defaultUseCapturing = useCapturingParam ? false : undefined;\n    return function zoneAwareRemoveAllListener(self, args) {\n        var target = self || _global$1;\n        if (args.length === 0) {\n            // remove all listeners without eventName\n            target[EVENT_TASKS] = [];\n            // we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n            // will do remove listener(cancelTask) for us\n            target[symbol]();\n            return;\n        }\n        var eventName = args[0];\n        var useCapturing = args[1] || defaultUseCapturing;\n        // call this function just remove the related eventTask from target[EVENT_TASKS]\n        findAllExistingRegisteredTasks(target, eventName, useCapturing, true);\n        // we don't need useCapturing here because useCapturing is just for DOM, and\n        // removeAllListeners should only be called by node eventEmitter\n        // and we don't cancel Task either, because call native eventEmitter.removeAllListeners will\n        // will do remove listener(cancelTask) for us\n        target[symbol](eventName);\n    };\n}\nfunction makeZoneAwareListeners(fnName) {\n    var symbol = zoneSymbol(fnName);\n    return function zoneAwareEventListeners(self, args) {\n        var eventName = args[0];\n        var target = self || _global$1;\n        if (!target[EVENT_TASKS]) {\n            return [];\n        }\n        return target[EVENT_TASKS]\n            .filter(function (task) { return task.data.eventName === eventName; })\n            .map(function (task) { return task.data.handler; });\n    };\n}\nvar zoneAwareAddEventListener = makeZoneAwareAddListener(ADD_EVENT_LISTENER, REMOVE_EVENT_LISTENER);\nvar zoneAwareRemoveEventListener = makeZoneAwareRemoveListener(REMOVE_EVENT_LISTENER);\n\nvar originalInstanceKey = zoneSymbol('originalInstance');\n// wrap some native API on `window`\n\n\nfunction createNamedFn(name, delegate) {\n    try {\n        return (Function('f', \"return function \" + name + \"(){return f(this, arguments)}\"))(delegate);\n    }\n    catch (e) {\n        // if we fail, we must be CSP, just return delegate.\n        return function () {\n            return delegate(this, arguments);\n        };\n    }\n}\nfunction patchMethod(target, name, patchFn) {\n    var proto = target;\n    while (proto && Object.getOwnPropertyNames(proto).indexOf(name) === -1) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    if (!proto && target[name]) {\n        // somehow we did not find it, but we can see it. This happens on IE for Window properties.\n        proto = target;\n    }\n    var delegateName = zoneSymbol(name);\n    var delegate;\n    if (proto && !(delegate = proto[delegateName])) {\n        delegate = proto[delegateName] = proto[name];\n        proto[name] = createNamedFn(name, patchFn(delegate, delegateName, name));\n    }\n    return delegate;\n}\n// TODO: support cancel task later if necessary\nfunction patchMacroTask(obj, funcName, metaCreator) {\n    var setNative = null;\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[data.callbackIndex] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(data.target, data.args);\n        return task;\n    }\n    setNative = patchMethod(obj, funcName, function (delegate) { return function (self, args) {\n        var meta = metaCreator(self, args);\n        if (meta.callbackIndex >= 0 && typeof args[meta.callbackIndex] === 'function') {\n            var task = Zone.current.scheduleMacroTask(meta.name, args[meta.callbackIndex], meta, scheduleTask, null);\n            return task;\n        }\n        else {\n            // cause an error by calling it directly.\n            return delegate.apply(self, args);\n        }\n    }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar callAndReturnFirstParam = function (fn) {\n    return function (self, args) {\n        fn(self, args);\n        return self;\n    };\n};\n// For EventEmitter\nvar EE_ADD_LISTENER = 'addListener';\nvar EE_PREPEND_LISTENER = 'prependListener';\nvar EE_REMOVE_LISTENER = 'removeListener';\nvar EE_REMOVE_ALL_LISTENER = 'removeAllListeners';\nvar EE_LISTENERS = 'listeners';\nvar EE_ON = 'on';\nvar zoneAwareAddListener$1 = callAndReturnFirstParam(makeZoneAwareAddListener(EE_ADD_LISTENER, EE_REMOVE_LISTENER, false, true, false));\nvar zoneAwarePrependListener = callAndReturnFirstParam(makeZoneAwareAddListener(EE_PREPEND_LISTENER, EE_REMOVE_LISTENER, false, true, true));\nvar zoneAwareRemoveListener$1 = callAndReturnFirstParam(makeZoneAwareRemoveListener(EE_REMOVE_LISTENER, false));\nvar zoneAwareRemoveAllListeners = callAndReturnFirstParam(makeZoneAwareRemoveAllListeners(EE_REMOVE_ALL_LISTENER, false));\nvar zoneAwareListeners = makeZoneAwareListeners(EE_LISTENERS);\nfunction patchEventEmitterMethods(obj) {\n    if (obj && obj.addListener) {\n        patchMethod(obj, EE_ADD_LISTENER, function () { return zoneAwareAddListener$1; });\n        patchMethod(obj, EE_PREPEND_LISTENER, function () { return zoneAwarePrependListener; });\n        patchMethod(obj, EE_REMOVE_LISTENER, function () { return zoneAwareRemoveListener$1; });\n        patchMethod(obj, EE_REMOVE_ALL_LISTENER, function () { return zoneAwareRemoveAllListeners; });\n        patchMethod(obj, EE_LISTENERS, function () { return zoneAwareListeners; });\n        obj[EE_ON] = obj[EE_ADD_LISTENER];\n        return true;\n    }\n    else {\n        return false;\n    }\n}\n// EventEmitter\nvar events;\ntry {\n    events = require('events');\n}\ncatch (err) {\n}\nif (events && events.EventEmitter) {\n    patchEventEmitterMethods(events.EventEmitter.prototype);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar fs;\ntry {\n    fs = require('fs');\n}\ncatch (err) {\n}\n// watch, watchFile, unwatchFile has been patched\n// because EventEmitter has been patched\nvar TO_PATCH_MACROTASK_METHODS = [\n    'access', 'appendFile', 'chmod', 'chown', 'close', 'exists', 'fchmod',\n    'fchown', 'fdatasync', 'fstat', 'fsync', 'ftruncate', 'futimes', 'lchmod',\n    'lchown', 'link', 'lstat', 'mkdir', 'mkdtemp', 'open', 'read',\n    'readdir', 'readFile', 'readlink', 'realpath', 'rename', 'rmdir', 'stat',\n    'symlink', 'truncate', 'unlink', 'utimes', 'write', 'writeFile',\n];\nif (fs) {\n    TO_PATCH_MACROTASK_METHODS.filter(function (name) { return !!fs[name] && typeof fs[name] === 'function'; })\n        .forEach(function (name) {\n        patchMacroTask(fs, name, function (self, args) {\n            return {\n                name: 'fs.' + name,\n                args: args,\n                callbackIndex: args.length > 0 ? args.length - 1 : -1,\n                target: self\n            };\n        });\n    });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction patchTimer(window, setName, cancelName, nameSuffix) {\n    var setNative = null;\n    var clearNative = null;\n    setName += nameSuffix;\n    cancelName += nameSuffix;\n    var tasksByHandleId = {};\n    function scheduleTask(task) {\n        var data = task.data;\n        data.args[0] = function () {\n            task.invoke.apply(this, arguments);\n            delete tasksByHandleId[data.handleId];\n        };\n        data.handleId = setNative.apply(window, data.args);\n        tasksByHandleId[data.handleId] = task;\n        return task;\n    }\n    function clearTask(task) {\n        delete tasksByHandleId[task.data.handleId];\n        return clearNative(task.data.handleId);\n    }\n    setNative =\n        patchMethod(window, setName, function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var options = {\n                    handleId: null,\n                    isPeriodic: nameSuffix === 'Interval',\n                    delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 : null,\n                    args: args\n                };\n                var task = zone.scheduleMacroTask(setName, args[0], options, scheduleTask, clearTask);\n                if (!task) {\n                    return task;\n                }\n                // Node.js must additionally support the ref and unref functions.\n                var handle = task.data.handleId;\n                if (handle.ref && handle.unref) {\n                    task.ref = handle.ref.bind(handle);\n                    task.unref = handle.unref.bind(handle);\n                }\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(window, args);\n            }\n        }; });\n    clearNative =\n        patchMethod(window, cancelName, function (delegate) { return function (self, args) {\n            var task = typeof args[0] === 'number' ? tasksByHandleId[args[0]] : args[0];\n            if (task && typeof task.type === 'string') {\n                if (task.cancelFn && task.data.isPeriodic || task.runCount === 0) {\n                    // Do not cancel already canceled functions\n                    task.zone.cancelTask(task);\n                }\n            }\n            else {\n                // cause an error by calling it directly.\n                delegate.apply(window, args);\n            }\n        }; });\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar set = 'set';\nvar clear = 'clear';\nvar _global = typeof window === 'object' && window || typeof self === 'object' && self || global;\n// Timers\nvar timers = require('timers');\npatchTimer(timers, set, clear, 'Timeout');\npatchTimer(timers, set, clear, 'Interval');\npatchTimer(timers, set, clear, 'Immediate');\nvar shouldPatchGlobalTimers = global.setTimeout !== timers.setTimeout;\nif (shouldPatchGlobalTimers) {\n    patchTimer(_global, set, clear, 'Timeout');\n    patchTimer(_global, set, clear, 'Interval');\n    patchTimer(_global, set, clear, 'Immediate');\n}\npatchNextTick();\n// Crypto\nvar crypto;\ntry {\n    crypto = require('crypto');\n}\ncatch (err) {\n}\n// TODO(gdi2290): implement a better way to patch these methods\nif (crypto) {\n    var nativeRandomBytes_1 = crypto.randomBytes;\n    crypto.randomBytes = function randomBytesZone(size, callback) {\n        if (!callback) {\n            return nativeRandomBytes_1(size);\n        }\n        else {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.randomBytes';\n            return nativeRandomBytes_1(size, zone.wrap(callback, source));\n        }\n    }.bind(crypto);\n    var nativePbkdf2_1 = crypto.pbkdf2;\n    crypto.pbkdf2 = function pbkdf2Zone() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var fn = args[args.length - 1];\n        if (typeof fn === 'function') {\n            var zone = Zone.current;\n            var source = crypto.constructor.name + '.pbkdf2';\n            args[args.length - 1] = zone.wrap(fn, source);\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n        else {\n            return nativePbkdf2_1.apply(void 0, args);\n        }\n    }.bind(crypto);\n}\n// HTTP Client\nvar httpClient;\ntry {\n    httpClient = require('_http_client');\n}\ncatch (err) {\n}\nif (httpClient && httpClient.ClientRequest) {\n    var ClientRequest_1 = httpClient.ClientRequest.bind(httpClient);\n    httpClient.ClientRequest = function (options, callback) {\n        if (!callback) {\n            return new ClientRequest_1(options);\n        }\n        else {\n            var zone = Zone.current;\n            return new ClientRequest_1(options, zone.wrap(callback, 'http.ClientRequest'));\n        }\n    };\n}\nfunction patchNextTick() {\n    var setNative = null;\n    function scheduleTask(task) {\n        var args = task.data;\n        args[0] = function () {\n            task.invoke.apply(this, arguments);\n        };\n        setNative.apply(process, args);\n        return task;\n    }\n    setNative =\n        patchMethod(process, 'nextTick', function (delegate) { return function (self, args) {\n            if (typeof args[0] === 'function') {\n                var zone = Zone.current;\n                var task = zone.scheduleMicroTask('nextTick', args[0], args, scheduleTask);\n                return task;\n            }\n            else {\n                // cause an error by calling it directly.\n                return delegate.apply(process, args);\n            }\n        }; });\n}\n\n})));\n","module.exports = require(\"timers\");","module.exports = require(\"crypto\");","module.exports = require(\"_http_client\");","\"use strict\";\r\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\r\nvar AutoCollectConsole = (function () {\r\n    function AutoCollectConsole(client) {\r\n        if (!!AutoCollectConsole.INSTANCE) {\r\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\r\n        }\r\n        this._client = client;\r\n        AutoCollectConsole.INSTANCE = this;\r\n    }\r\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\r\n        if (DiagChannel.IsInitialized) {\r\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\r\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\r\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\r\n        }\r\n    };\r\n    AutoCollectConsole.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectConsole.prototype.dispose = function () {\r\n        AutoCollectConsole.INSTANCE = null;\r\n        this.enable(false, false);\r\n    };\r\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\r\n    return AutoCollectConsole;\r\n}());\r\nmodule.exports = AutoCollectConsole;\r\n//# sourceMappingURL=Console.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        // Message can have a trailing newline\r\n        var message = event.data.message;\r\n        if (message.lastIndexOf(\"\\n\") == message.length - 1) {\r\n            message = message.substring(0, message.length - 1);\r\n        }\r\n        client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Generated_1 = require(\"./Generated\");\r\nvar RemoteDependencyDataConstants = (function () {\r\n    function RemoteDependencyDataConstants() {\r\n    }\r\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\r\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\r\n    return RemoteDependencyDataConstants;\r\n}());\r\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\r\nfunction domainSupportsProperties(domain) {\r\n    return \"properties\" in domain ||\r\n        domain instanceof Generated_1.EventData ||\r\n        domain instanceof Generated_1.ExceptionData ||\r\n        domain instanceof Generated_1.MessageData ||\r\n        domain instanceof Generated_1.MetricData ||\r\n        domain instanceof Generated_1.PageViewData ||\r\n        domain instanceof Generated_1.RemoteDependencyData ||\r\n        domain instanceof Generated_1.RequestData;\r\n}\r\nexports.domainSupportsProperties = domainSupportsProperties;\r\n//# sourceMappingURL=Constants.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of AvailabilityData represent the result of executing an availability test.\r\n */\r\nvar AvailabilityData = (function (_super) {\r\n    __extends(AvailabilityData, _super);\r\n    function AvailabilityData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return AvailabilityData;\r\n}(Domain));\r\nmodule.exports = AvailabilityData;\r\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\nvar ContextTagKeys = (function () {\r\n    function ContextTagKeys() {\r\n        this.applicationVersion = \"ai.application.ver\";\r\n        this.deviceId = \"ai.device.id\";\r\n        this.deviceLocale = \"ai.device.locale\";\r\n        this.deviceModel = \"ai.device.model\";\r\n        this.deviceOEMName = \"ai.device.oemName\";\r\n        this.deviceOSVersion = \"ai.device.osVersion\";\r\n        this.deviceType = \"ai.device.type\";\r\n        this.locationIp = \"ai.location.ip\";\r\n        this.operationId = \"ai.operation.id\";\r\n        this.operationName = \"ai.operation.name\";\r\n        this.operationParentId = \"ai.operation.parentId\";\r\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\r\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\r\n        this.sessionId = \"ai.session.id\";\r\n        this.sessionIsFirst = \"ai.session.isFirst\";\r\n        this.userAccountId = \"ai.user.accountId\";\r\n        this.userId = \"ai.user.id\";\r\n        this.userAuthUserId = \"ai.user.authUserId\";\r\n        this.cloudRole = \"ai.cloud.role\";\r\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\r\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\r\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\r\n        this.internalNodeName = \"ai.internal.nodeName\";\r\n    }\r\n    return ContextTagKeys;\r\n}());\r\nmodule.exports = ContextTagKeys;\r\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Base = require(\"./Base\");\r\n\"use strict\";\r\n/**\r\n * Data struct to contain both B and C sections.\r\n */\r\nvar Data = (function (_super) {\r\n    __extends(Data, _super);\r\n    function Data() {\r\n        return _super.call(this) || this;\r\n    }\r\n    return Data;\r\n}(Base));\r\nmodule.exports = Data;\r\n//# sourceMappingURL=Data.js.map","\"use strict\";\r\n// THIS FILE WAS AUTOGENERATED\r\nvar DataPointType = require(\"./DataPointType\");\r\n\"use strict\";\r\n/**\r\n * Metric data single measurement.\r\n */\r\nvar DataPoint = (function () {\r\n    function DataPoint() {\r\n        this.kind = DataPointType.Measurement;\r\n    }\r\n    return DataPoint;\r\n}());\r\nmodule.exports = DataPoint;\r\n//# sourceMappingURL=DataPoint.js.map","\"use strict\";\r\n/**\r\n * System variables for a telemetry item.\r\n */\r\nvar Envelope = (function () {\r\n    function Envelope() {\r\n        this.ver = 1;\r\n        this.sampleRate = 100.0;\r\n        this.tags = {};\r\n    }\r\n    return Envelope;\r\n}());\r\nmodule.exports = Envelope;\r\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\r\n */\r\nvar ExceptionData = (function (_super) {\r\n    __extends(ExceptionData, _super);\r\n    function ExceptionData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.exceptions = [];\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return ExceptionData;\r\n}(Domain));\r\nmodule.exports = ExceptionData;\r\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\r\n/**\r\n * Exception details of the exception in a chain.\r\n */\r\nvar ExceptionDetails = (function () {\r\n    function ExceptionDetails() {\r\n        this.hasFullStack = true;\r\n        this.parsedStack = [];\r\n    }\r\n    return ExceptionDetails;\r\n}());\r\nmodule.exports = ExceptionDetails;\r\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\r\n */\r\nvar MessageData = (function (_super) {\r\n    __extends(MessageData, _super);\r\n    function MessageData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MessageData;\r\n}(Domain));\r\nmodule.exports = MessageData;\r\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\r\n */\r\nvar MetricData = (function (_super) {\r\n    __extends(MetricData, _super);\r\n    function MetricData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.metrics = [];\r\n        _this.properties = {};\r\n        return _this;\r\n    }\r\n    return MetricData;\r\n}(Domain));\r\nmodule.exports = MetricData;\r\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar EventData = require(\"./EventData\");\r\n\"use strict\";\r\n/**\r\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\r\n */\r\nvar PageViewData = (function (_super) {\r\n    __extends(PageViewData, _super);\r\n    function PageViewData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return PageViewData;\r\n}(EventData));\r\nmodule.exports = PageViewData;\r\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\r\n */\r\nvar RemoteDependencyData = (function (_super) {\r\n    __extends(RemoteDependencyData, _super);\r\n    function RemoteDependencyData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.success = true;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RemoteDependencyData;\r\n}(Domain));\r\nmodule.exports = RemoteDependencyData;\r\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// THIS FILE WAS AUTOGENERATED\r\nvar Domain = require(\"./Domain\");\r\n\"use strict\";\r\n/**\r\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\r\n */\r\nvar RequestData = (function (_super) {\r\n    __extends(RequestData, _super);\r\n    function RequestData() {\r\n        var _this = _super.call(this) || this;\r\n        _this.ver = 2;\r\n        _this.properties = {};\r\n        _this.measurements = {};\r\n        return _this;\r\n    }\r\n    return RequestData;\r\n}(Domain));\r\nmodule.exports = RequestData;\r\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Defines the level of severity for the event.\r\n */\r\nvar SeverityLevel;\r\n(function (SeverityLevel) {\r\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\r\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\r\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\r\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\r\n})(SeverityLevel || (SeverityLevel = {}));\r\nmodule.exports = SeverityLevel;\r\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\r\n\"use strict\";\r\n/**\r\n * Stack frame information.\r\n */\r\nvar StackFrame = (function () {\r\n    function StackFrame() {\r\n    }\r\n    return StackFrame;\r\n}());\r\nmodule.exports = StackFrame;\r\n//# sourceMappingURL=StackFrame.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./TelemetryType\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\r\n * @param type Type to convert to BaseData string\r\n */\r\nfunction telemetryTypeToBaseType(type) {\r\n    switch (type) {\r\n        case TelemetryType.Event:\r\n            return \"EventData\";\r\n        case TelemetryType.Exception:\r\n            return \"ExceptionData\";\r\n        case TelemetryType.Trace:\r\n            return \"MessageData\";\r\n        case TelemetryType.Metric:\r\n            return \"MetricData\";\r\n        case TelemetryType.Request:\r\n            return \"RequestData\";\r\n        case TelemetryType.Dependency:\r\n            return \"RemoteDependencyData\";\r\n    }\r\n    return undefined;\r\n}\r\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\r\n/**\r\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\r\n * @param baseType BaseData string to convert to TelemetryType\r\n */\r\nfunction baseTypeToTelemetryType(baseType) {\r\n    switch (baseType) {\r\n        case \"EventData\":\r\n            return TelemetryType.Event;\r\n        case \"ExceptionData\":\r\n            return TelemetryType.Exception;\r\n        case \"MessageData\":\r\n            return TelemetryType.Trace;\r\n        case \"MetricData\":\r\n            return TelemetryType.Metric;\r\n        case \"RequestData\":\r\n            return TelemetryType.Request;\r\n        case \"RemoteDependencyData\":\r\n            return TelemetryType.Dependency;\r\n    }\r\n    return undefined;\r\n}\r\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\r\n/**\r\n * Telemetry types supported by this SDK\r\n */\r\nvar TelemetryType;\r\n(function (TelemetryType) {\r\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\r\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\r\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\r\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\r\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\r\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\r\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\r\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\r\nvar bunyanToAILevelMap = {\r\n    10: Contracts_1.SeverityLevel.Verbose,\r\n    20: Contracts_1.SeverityLevel.Verbose,\r\n    30: Contracts_1.SeverityLevel.Information,\r\n    40: Contracts_1.SeverityLevel.Warning,\r\n    50: Contracts_1.SeverityLevel.Error,\r\n    60: Contracts_1.SeverityLevel.Critical,\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = bunyanToAILevelMap[event.data.level];\r\n        client.trackTrace({ message: event.data.result, severity: AIlevel });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nvar winstonToAILevelMap = {\r\n    syslog: function (og) {\r\n        var map = {\r\n            emerg: Contracts_1.SeverityLevel.Critical,\r\n            alert: Contracts_1.SeverityLevel.Critical,\r\n            crit: Contracts_1.SeverityLevel.Critical,\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warning: Contracts_1.SeverityLevel.Warning,\r\n            notice: Contracts_1.SeverityLevel.Information,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            debug: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    npm: function (og) {\r\n        var map = {\r\n            error: Contracts_1.SeverityLevel.Error,\r\n            warn: Contracts_1.SeverityLevel.Warning,\r\n            info: Contracts_1.SeverityLevel.Information,\r\n            verbose: Contracts_1.SeverityLevel.Verbose,\r\n            debug: Contracts_1.SeverityLevel.Verbose,\r\n            silly: Contracts_1.SeverityLevel.Verbose\r\n        };\r\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\r\n    },\r\n    unknown: function (og) {\r\n        return Contracts_1.SeverityLevel.Information;\r\n    }\r\n};\r\nvar subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\r\n        client.trackTrace({\r\n            message: event.data.message,\r\n            severity: AIlevel,\r\n            properties: event.data.meta\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\r\nvar AutoCollectExceptions = (function () {\r\n    function AutoCollectExceptions(client) {\r\n        if (!!AutoCollectExceptions.INSTANCE) {\r\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\r\n        }\r\n        AutoCollectExceptions.INSTANCE = this;\r\n        this._client = client;\r\n    }\r\n    Object.defineProperty(AutoCollectExceptions, \"UNCAUGHT_EXCEPTION_HANDLER_NAME\", {\r\n        get: function () { return \"uncaughtException\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AutoCollectExceptions, \"UNHANDLED_REJECTION_HANDLER_NAME\", {\r\n        get: function () { return \"unhandledRejection\"; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AutoCollectExceptions.prototype.isInitialized = function () {\r\n        return this._isInitialized;\r\n    };\r\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\r\n        var _this = this;\r\n        if (isEnabled) {\r\n            this._isInitialized = true;\r\n            var self = this;\r\n            if (!this._exceptionListenerHandle) {\r\n                var handle = function (reThrow, error) {\r\n                    _this._client.trackException({ exception: error });\r\n                    _this._client.flush({ isAppCrashing: true });\r\n                    if (reThrow) {\r\n                        var THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION = error;\r\n                        throw THIS_IS_APPLICATION_INSIGHTS_RETHROWING_YOUR_EXCEPTION; // Error originated somewhere else in your app\r\n                    }\r\n                };\r\n                this._exceptionListenerHandle = handle.bind(this, true);\r\n                this._rejectionListenerHandle = handle.bind(this, false);\r\n                process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n            }\r\n        }\r\n        else {\r\n            if (this._exceptionListenerHandle) {\r\n                process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\r\n                process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\r\n                this._exceptionListenerHandle = undefined;\r\n                this._rejectionListenerHandle = undefined;\r\n                delete this._exceptionListenerHandle;\r\n                delete this._rejectionListenerHandle;\r\n            }\r\n        }\r\n    };\r\n    AutoCollectExceptions.prototype.dispose = function () {\r\n        AutoCollectExceptions.INSTANCE = null;\r\n        this.enable(false);\r\n        this._isInitialized = false;\r\n    };\r\n    AutoCollectExceptions.INSTANCE = null;\r\n    return AutoCollectExceptions;\r\n}());\r\nmodule.exports = AutoCollectExceptions;\r\n//# sourceMappingURL=Exceptions.js.map","module.exports = require(\"constants\");","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpDependencyParser = (function (_super) {\r\n    __extends(HttpDependencyParser, _super);\r\n    function HttpDependencyParser(requestOptions, request) {\r\n        var _this = _super.call(this) || this;\r\n        if (request && request.method && requestOptions) {\r\n            // The ClientRequest.method property isn't documented, but is always there.\r\n            _this.method = request.method;\r\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\r\n            _this.startTime = +new Date();\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Called when the ClientRequest emits an error event.\r\n     */\r\n    HttpDependencyParser.prototype.onError = function (error) {\r\n        this._setStatus(undefined, error);\r\n    };\r\n    /**\r\n     * Called when the ClientRequest emits a response event.\r\n     */\r\n    HttpDependencyParser.prototype.onResponse = function (response) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\r\n    };\r\n    /**\r\n     * Gets a dependency data contract object for a completed ClientRequest.\r\n     */\r\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\r\n        var urlObject = url.parse(this.url);\r\n        urlObject.search = undefined;\r\n        urlObject.hash = undefined;\r\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\r\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        var remoteDependencyTarget = urlObject.hostname;\r\n        if (this.correlationId) {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\r\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\r\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\r\n            }\r\n        }\r\n        else {\r\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\r\n        }\r\n        var dependencyTelemetry = {\r\n            id: dependencyId,\r\n            name: dependencyName,\r\n            data: this.url,\r\n            duration: this.duration,\r\n            success: this._isSuccess(),\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            properties: this.properties || {},\r\n            dependencyTypeName: remoteDependencyType,\r\n            target: remoteDependencyTarget\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!dependencyTelemetry[key]) {\r\n                    dependencyTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return dependencyTelemetry;\r\n    };\r\n    /**\r\n     * Builds a URL from request options, using the same logic as http.request(). This is\r\n     * necessary because a ClientRequest object does not expose a url property.\r\n     */\r\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\r\n        if (typeof options === 'string') {\r\n            options = url.parse(options);\r\n        }\r\n        else {\r\n            // Avoid modifying the original options object.\r\n            var originalOptions_1 = options;\r\n            options = {};\r\n            if (originalOptions_1) {\r\n                Object.keys(originalOptions_1).forEach(function (key) {\r\n                    options[key] = originalOptions_1[key];\r\n                });\r\n            }\r\n        }\r\n        // Oddly, url.format ignores path and only uses pathname and search,\r\n        // so create them from the path, if path was specified\r\n        if (options.path) {\r\n            var parsedQuery = url.parse(options.path);\r\n            options.pathname = parsedQuery.pathname;\r\n            options.search = parsedQuery.search;\r\n        }\r\n        // Simiarly, url.format ignores hostname and port if host is specified,\r\n        // even if host doesn't have the port, but http.request does not work\r\n        // this way. It will use the port if one is not specified in host,\r\n        // effectively treating host as hostname, but will use the port specified\r\n        // in host if it exists.\r\n        if (options.host && options.port) {\r\n            // Force a protocol so it will parse the host as the host, not path.\r\n            // It is discarded and not used, so it doesn't matter if it doesn't match\r\n            var parsedHost = url.parse(\"http://\" + options.host);\r\n            if (!parsedHost.port && options.port) {\r\n                options.hostname = options.host;\r\n                delete options.host;\r\n            }\r\n        }\r\n        // Mix in default values used by http.request and others\r\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\r\n        options.hostname = options.hostname || 'localhost';\r\n        return url.format(options);\r\n    };\r\n    return HttpDependencyParser;\r\n}(RequestParser));\r\nmodule.exports = HttpDependencyParser;\r\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: event.data.event.commandName,\r\n            name: event.data.event.commandName,\r\n            duration: event.data.event.duration,\r\n            success: event.data.succeeded,\r\n            /* TODO: transmit result code from mongo */\r\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\r\n            dependencyTypeName: 'mongodb'\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var queryObj = event.data.query || {};\r\n        var sqlString = queryObj.sql || \"Unknown query\";\r\n        var success = !event.data.err;\r\n        var connection = queryObj._connection || {};\r\n        var connectionConfig = connection.config || {};\r\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\r\n        client.trackDependency({\r\n            target: dbName,\r\n            data: sqlString,\r\n            name: sqlString,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            /* TODO: transmit result code from mysql */\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"mysql\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        if (event.data.commandObj.command === \"info\") {\r\n            // We don't want to report 'info', it's irrelevant\r\n            return;\r\n        }\r\n        client.trackDependency({\r\n            target: event.data.address,\r\n            name: event.data.commandObj.command,\r\n            data: event.data.commandObj.command,\r\n            duration: event.data.duration,\r\n            success: !event.data.err,\r\n            /* TODO: transmit result code from redis */\r\n            resultCode: event.data.err ? \"1\" : \"0\",\r\n            dependencyTypeName: \"redis\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\r\nvar clients = [];\r\nexports.subscriber = function (event) {\r\n    clients.forEach(function (client) {\r\n        var q = event.data.query;\r\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\r\n        var success = !event.data.error;\r\n        var conn = event.data.database.host + \":\" + event.data.database.port;\r\n        client.trackDependency({\r\n            target: conn,\r\n            data: sql,\r\n            name: sql,\r\n            duration: event.data.duration,\r\n            success: success,\r\n            resultCode: success ? \"0\" : \"1\",\r\n            dependencyTypeName: \"postgres\"\r\n        });\r\n    });\r\n};\r\nfunction enable(enabled, client) {\r\n    if (enabled) {\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\r\n        }\r\n        ;\r\n        clients.push(client);\r\n    }\r\n    else {\r\n        clients = clients.filter(function (c) { return c != client; });\r\n        if (clients.length === 0) {\r\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\r\n        }\r\n    }\r\n}\r\nexports.enable = enable;\r\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar url = require(\"url\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"../Library/Util\");\r\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\r\nvar RequestParser = require(\"./RequestParser\");\r\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\r\n/**\r\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\r\n */\r\nvar HttpRequestParser = (function (_super) {\r\n    __extends(HttpRequestParser, _super);\r\n    function HttpRequestParser(request, requestId) {\r\n        var _this = _super.call(this) || this;\r\n        if (request) {\r\n            _this.method = request.method;\r\n            _this.url = _this._getAbsoluteUrl(request);\r\n            _this.startTime = +new Date();\r\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\r\n            _this.parseHeaders(request, requestId);\r\n            if (request.connection) {\r\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\r\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\r\n        this._setStatus(undefined, error);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\r\n        this._setStatus(response.statusCode, undefined);\r\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\r\n        if (ellapsedMilliseconds) {\r\n            this.duration = ellapsedMilliseconds;\r\n        }\r\n    };\r\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\r\n        var requestTelemetry = {\r\n            id: this.requestId,\r\n            name: this.method + \" \" + url.parse(this.url).pathname,\r\n            url: this.url,\r\n            /*\r\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\r\n            for reference\r\n            */\r\n            source: this.sourceCorrelationId,\r\n            duration: this.duration,\r\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\r\n            success: this._isSuccess(),\r\n            properties: this.properties\r\n        };\r\n        // We should keep any parameters the user passed in\r\n        // Except the fields defined above in requestTelemetry, which take priority\r\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\r\n        if (baseTelemetry) {\r\n            // Copy missing fields\r\n            for (var key in baseTelemetry) {\r\n                if (!requestTelemetry[key]) {\r\n                    requestTelemetry[key] = baseTelemetry[key];\r\n                }\r\n            }\r\n            // Merge properties\r\n            if (baseTelemetry.properties) {\r\n                for (var key in baseTelemetry.properties) {\r\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\r\n                }\r\n            }\r\n        }\r\n        return requestTelemetry;\r\n    };\r\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\r\n        // create a copy of the context for requests since client info will be used here\r\n        var newTags = {};\r\n        for (var key in tags) {\r\n            newTags[key] = tags[key];\r\n        }\r\n        // don't override tags if they are already set\r\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\r\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\r\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\r\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\r\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\r\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\r\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\r\n        return newTags;\r\n    };\r\n    HttpRequestParser.prototype.getOperationId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\r\n    };\r\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\r\n    };\r\n    HttpRequestParser.prototype.getOperationName = function (tags) {\r\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\r\n    };\r\n    HttpRequestParser.prototype.getRequestId = function () {\r\n        return this.requestId;\r\n    };\r\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\r\n        return this.correlationContextHeader;\r\n    };\r\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\r\n        if (!request.headers) {\r\n            return request.url;\r\n        }\r\n        var encrypted = request.connection ? request.connection.encrypted : null;\r\n        var requestUrl = url.parse(request.url);\r\n        var pathName = requestUrl.pathname;\r\n        var search = requestUrl.search;\r\n        var absoluteUrl = url.format({\r\n            protocol: encrypted ? \"https\" : \"http\",\r\n            host: request.headers.host,\r\n            pathname: pathName,\r\n            search: search\r\n        });\r\n        return absoluteUrl;\r\n    };\r\n    HttpRequestParser.prototype._getIp = function () {\r\n        // regex to match ipv4 without port\r\n        // Note: including the port would cause the payload to be rejected by the data collector\r\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n        var check = function (str) {\r\n            var results = ipMatch.exec(str);\r\n            if (results) {\r\n                return results[0];\r\n            }\r\n        };\r\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\r\n            || check(this.rawHeaders[\"x-client-ip\"])\r\n            || check(this.rawHeaders[\"x-real-ip\"])\r\n            || check(this.connectionRemoteAddress)\r\n            || check(this.socketRemoteAddress)\r\n            || check(this.legacySocketRemoteAddress);\r\n        // node v12 returns this if the address is \"localhost\"\r\n        if (!ip\r\n            && this.connectionRemoteAddress\r\n            && this.connectionRemoteAddress.substr\r\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\r\n            ip = \"127.0.0.1\";\r\n        }\r\n        return ip;\r\n    };\r\n    HttpRequestParser.prototype._getId = function (name) {\r\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\r\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\r\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\r\n        return value;\r\n    };\r\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\r\n        this.rawHeaders = request.headers || request.rawHeaders;\r\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\r\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\r\n        if (request.headers) {\r\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            if (request.headers[RequestResponseHeaders.requestIdHeader]) {\r\n                this.parentId = request.headers[RequestResponseHeaders.requestIdHeader];\r\n                this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\r\n                this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\r\n            }\r\n            else {\r\n                // Legacy fallback\r\n                var rootId = request.headers[RequestResponseHeaders.rootIdHeader];\r\n                this.parentId = request.headers[RequestResponseHeaders.parentIdHeader];\r\n                this.requestId = CorrelationIdManager.generateRequestId(rootId || this.parentId);\r\n                this.correlationContextHeader = null;\r\n            }\r\n            if (requestId) {\r\n                // For the scenarios that don't guarantee an AI-created context,\r\n                // override the requestId with the provided one.\r\n                this.requestId = requestId;\r\n            }\r\n            this.operationId = CorrelationIdManager.getRootId(this.requestId);\r\n        }\r\n    };\r\n    HttpRequestParser.parseId = function (cookieValue) {\r\n        return cookieValue.substr(0, cookieValue.indexOf('|'));\r\n    };\r\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\r\n    return HttpRequestParser;\r\n}(RequestParser));\r\nmodule.exports = HttpRequestParser;\r\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar TelemetryClient = require(\"./TelemetryClient\");\r\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\r\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\r\nvar Logging = require(\"./Logging\");\r\n/**\r\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\r\n * in addition to Node-specific helper functions.\r\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\r\n * In most cases, `appInsights.defaultClient` should be used instead.\r\n */\r\nvar NodeClient = (function (_super) {\r\n    __extends(NodeClient, _super);\r\n    function NodeClient() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\r\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\r\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\r\n     * @param telemetry Object encapsulating incoming request, response and duration information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\r\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\r\n            ServerRequestTracking.trackRequestSync(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\r\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\r\n     * @param telemetry Object encapsulating incoming request and response information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\r\n        if (telemetry.duration || telemetry.error) {\r\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\r\n        }\r\n        if (telemetry && telemetry.request && telemetry.response) {\r\n            ServerRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\r\n     * the specified headers and will log the telemetry when outgoing request is complete\r\n     * @param telemetry Object encapsulating outgoing request information\r\n     */\r\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\r\n        if (telemetry && telemetry.request) {\r\n            ClientRequestTracking.trackRequest(this, telemetry);\r\n        }\r\n        else {\r\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\r\n        }\r\n    };\r\n    return NodeClient;\r\n}(TelemetryClient));\r\nmodule.exports = NodeClient;\r\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\r\nvar url = require(\"url\");\r\nvar Config = require(\"./Config\");\r\nvar Context = require(\"./Context\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Channel = require(\"./Channel\");\r\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\nvar Sender = require(\"./Sender\");\r\nvar Util = require(\"./Util\");\r\nvar Logging = require(\"./Logging\");\r\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\r\n/**\r\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\r\n * and manually trigger immediate sending (flushing)\r\n */\r\nvar TelemetryClient = (function () {\r\n    /**\r\n     * Constructs a new client of the client\r\n     * @param iKey the instrumentation key to use (read from environment variable if not specified)\r\n     */\r\n    function TelemetryClient(iKey) {\r\n        this._telemetryProcessors = [];\r\n        var config = new Config(iKey);\r\n        this.config = config;\r\n        this.context = new Context();\r\n        this.commonProperties = {};\r\n        var sender = new Sender(this.config);\r\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\r\n    }\r\n    /**\r\n     * Log a trace message\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Trace);\r\n    };\r\n    /**\r\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\r\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\r\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Metric);\r\n    };\r\n    /**\r\n     * Log an exception\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackException = function (telemetry) {\r\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\r\n            telemetry.exception = new Error(telemetry.exception.toString());\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Exception);\r\n    };\r\n    /**\r\n     * Log a user action or other occurrence.\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Event);\r\n    };\r\n    /**\r\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\r\n     * that aren't automatically captured or if you've disabled automatic request collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking options\r\n     */\r\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\r\n        this.track(telemetry, Contracts.TelemetryType.Request);\r\n    };\r\n    /**\r\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\r\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\r\n     *\r\n     * @param telemetry      Object encapsulating tracking option\r\n     * */\r\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\r\n        if (telemetry && !telemetry.target && telemetry.data) {\r\n            // url.parse().host returns null for non-urls,\r\n            // making this essentially a no-op in those cases\r\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\r\n            telemetry.target = url.parse(telemetry.data).host;\r\n        }\r\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\r\n    };\r\n    /**\r\n     * Immediately send all queued telemetry.\r\n     * @param options Flush options, including indicator whether app is crashing and callback\r\n     */\r\n    TelemetryClient.prototype.flush = function (options) {\r\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\r\n    };\r\n    /**\r\n     * Generic track method for all telemetry types\r\n     * @param data the telemetry to send\r\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\r\n     */\r\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\r\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\r\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\r\n            // Set time on the envelope if it was set on the telemetry item\r\n            if (telemetry.time) {\r\n                envelope.time = telemetry.time.toISOString();\r\n            }\r\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\r\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\r\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\r\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\r\n            if (accepted) {\r\n                this.channel.send(envelope);\r\n            }\r\n        }\r\n        else {\r\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\r\n        }\r\n    };\r\n    /**\r\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\r\n     * before telemetry item is pushed for sending and in the order they were added.\r\n     *\r\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\r\n     */\r\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\r\n        this._telemetryProcessors.push(telemetryProcessor);\r\n    };\r\n    /*\r\n     * Removes all telemetry processors\r\n     */\r\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\r\n        this._telemetryProcessors = [];\r\n    };\r\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\r\n        var accepted = true;\r\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\r\n        if (telemetryProcessorsCount === 0) {\r\n            return accepted;\r\n        }\r\n        contextObjects = contextObjects || {};\r\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\r\n            try {\r\n                var processor = this._telemetryProcessors[i];\r\n                if (processor) {\r\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\r\n                        accepted = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                accepted = true;\r\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\r\n            }\r\n        }\r\n        return accepted;\r\n    };\r\n    return TelemetryClient;\r\n}());\r\nmodule.exports = TelemetryClient;\r\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\r\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\r\nvar Config = (function () {\r\n    function Config(instrumentationKey) {\r\n        var _this = this;\r\n        this.endpointBase = \"https://dc.services.visualstudio.com\";\r\n        this.instrumentationKey = instrumentationKey || Config._getInstrumentationKey();\r\n        this.endpointUrl = this.endpointBase + \"/v2/track\";\r\n        this.maxBatchSize = 250;\r\n        this.maxBatchIntervalMs = 15000;\r\n        this.disableAppInsights = false;\r\n        this.samplingPercentage = 100;\r\n        this.correlationIdRetryIntervalMs = 30 * 1000;\r\n        this.correlationHeaderExcludedDomains = [\r\n            \"*.core.windows.net\",\r\n            \"*.core.chinacloudapi.cn\",\r\n            \"*.core.cloudapi.de\",\r\n            \"*.core.usgovcloudapi.net\"\r\n        ];\r\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\r\n        this.profileQueryEndpoint = process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\r\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\r\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\r\n        this.httpAgent = undefined;\r\n        this.httpsAgent = undefined;\r\n    }\r\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\r\n        get: function () {\r\n            return this._profileQueryEndpoint;\r\n        },\r\n        set: function (endpoint) {\r\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\r\n            this._profileQueryEndpoint = endpoint;\r\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\r\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Config._getInstrumentationKey = function () {\r\n        // check for both the documented env variable and the azure-prefixed variable\r\n        var iKey = process.env[Config.ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\r\n            || process.env[Config.legacy_ENV_iKey]\r\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\r\n        if (!iKey || iKey == \"\") {\r\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\r\n        }\r\n        return iKey;\r\n    };\r\n    // Azure adds this prefix to all environment variables\r\n    Config.ENV_azurePrefix = \"APPSETTING_\";\r\n    // This key is provided in the readme\r\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\r\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\r\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\r\n    Config.ENV_http_proxy = \"http_proxy\";\r\n    Config.ENV_https_proxy = \"https_proxy\";\r\n    return Config;\r\n}());\r\nmodule.exports = Config;\r\n//# sourceMappingURL=Config.js.map","\"use strict\";\r\nvar os = require(\"os\");\r\nvar fs = require(\"fs\");\r\nvar path = require(\"path\");\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Logging = require(\"./Logging\");\r\nvar Context = (function () {\r\n    function Context(packageJsonPath) {\r\n        this.keys = new Contracts.ContextTagKeys();\r\n        this.tags = {};\r\n        this._loadApplicationContext();\r\n        this._loadDeviceContext();\r\n        this._loadInternalContext();\r\n    }\r\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\r\n        // note: this should return the host package.json\r\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\r\n        if (!Context.appVersion[packageJsonPath]) {\r\n            Context.appVersion[packageJsonPath] = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.appVersion[packageJsonPath] = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\r\n    };\r\n    Context.prototype._loadDeviceContext = function () {\r\n        this.tags[this.keys.deviceId] = \"\";\r\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\r\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\r\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\r\n        // not yet supported tags\r\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\r\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\r\n    };\r\n    Context.prototype._loadInternalContext = function () {\r\n        // note: this should return the sdk package.json\r\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\r\n        if (!Context.sdkVersion) {\r\n            Context.sdkVersion = \"unknown\";\r\n            try {\r\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\r\n                if (packageJson && typeof packageJson.version === \"string\") {\r\n                    Context.sdkVersion = packageJson.version;\r\n                }\r\n            }\r\n            catch (exception) {\r\n                Logging.info(\"unable to read app version: \", exception);\r\n            }\r\n        }\r\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\r\n    };\r\n    Context.DefaultRoleName = \"Web\";\r\n    Context.appVersion = {};\r\n    Context.sdkVersion = null;\r\n    return Context;\r\n}());\r\nmodule.exports = Context;\r\n//# sourceMappingURL=Context.js.map","\"use strict\";\r\nvar Logging = require(\"./Logging\");\r\nvar Channel = (function () {\r\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\r\n        this._buffer = [];\r\n        this._lastSend = 0;\r\n        this._isDisabled = isDisabled;\r\n        this._getBatchSize = getBatchSize;\r\n        this._getBatchIntervalMs = getBatchIntervalMs;\r\n        this._sender = sender;\r\n    }\r\n    /**\r\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\r\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\r\n     * @param value if true events that occured while client is offline will be cached on disk\r\n     * @param resendInterval The wait interval for resending cached events.\r\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\r\n     * @returns {Configuration} this class\r\n     */\r\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\r\n    };\r\n    /**\r\n     * Add a telemetry item to the send buffer\r\n     */\r\n    Channel.prototype.send = function (envelope) {\r\n        var _this = this;\r\n        // if master off switch is set, don't send any data\r\n        if (this._isDisabled()) {\r\n            // Do not send/save data\r\n            return;\r\n        }\r\n        // validate input\r\n        if (!envelope) {\r\n            Logging.warn(\"Cannot send null/undefined telemetry\");\r\n            return;\r\n        }\r\n        // check if the incoming payload is too large, truncate if necessary\r\n        var payload = this._stringify(envelope);\r\n        if (typeof payload !== \"string\") {\r\n            return;\r\n        }\r\n        // enqueue the payload\r\n        this._buffer.push(payload);\r\n        // flush if we would exceed the max-size limit by adding this item\r\n        if (this._buffer.length >= this._getBatchSize()) {\r\n            this.triggerSend(false);\r\n            return;\r\n        }\r\n        // ensure an invocation timeout is set if anything is in the buffer\r\n        if (!this._timeoutHandle && this._buffer.length > 0) {\r\n            this._timeoutHandle = setTimeout(function () {\r\n                _this._timeoutHandle = null;\r\n                _this.triggerSend(false);\r\n            }, this._getBatchIntervalMs());\r\n        }\r\n    };\r\n    /**\r\n     * Immediately send buffered data\r\n     */\r\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\r\n        var bufferIsEmpty = this._buffer.length < 1;\r\n        if (!bufferIsEmpty) {\r\n            // compose an array of payloads\r\n            var batch = this._buffer.join(\"\\n\");\r\n            // invoke send\r\n            if (isNodeCrashing) {\r\n                this._sender.saveOnCrash(batch);\r\n                if (typeof callback === \"function\") {\r\n                    callback(\"data saved on crash\");\r\n                }\r\n            }\r\n            else {\r\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\r\n            }\r\n        }\r\n        // update lastSend time to enable throttling\r\n        this._lastSend = +new Date;\r\n        // clear buffer\r\n        this._buffer.length = 0;\r\n        clearTimeout(this._timeoutHandle);\r\n        this._timeoutHandle = null;\r\n        if (bufferIsEmpty && typeof callback === \"function\") {\r\n            callback(\"no data to send\");\r\n        }\r\n    };\r\n    Channel.prototype._stringify = function (envelope) {\r\n        try {\r\n            return JSON.stringify(envelope);\r\n        }\r\n        catch (error) {\r\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\r\n        }\r\n    };\r\n    return Channel;\r\n}());\r\nmodule.exports = Channel;\r\n//# sourceMappingURL=Channel.js.map","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./SamplingTelemetryProcessor\"));\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\n/**\r\n *  A telemetry processor that handles sampling.\r\n */\r\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\r\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\r\n    var isSampledIn = false;\r\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\r\n        return true;\r\n    }\r\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\r\n        // Exclude MetricData telemetry from sampling\r\n        return true;\r\n    }\r\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\r\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request \r\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\r\n    }\r\n    else {\r\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\r\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\r\n    }\r\n    return isSampledIn;\r\n}\r\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\r\n/** Ported from AI .NET SDK */\r\nfunction getSamplingHashCode(input) {\r\n    var csharpMin = -2147483648;\r\n    var csharpMax = 2147483647;\r\n    var hash = 5381;\r\n    if (!input) {\r\n        return 0;\r\n    }\r\n    while (input.length < 8) {\r\n        input = input + input;\r\n    }\r\n    for (var i = 0; i < input.length; i++) {\r\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\r\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\r\n    }\r\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\r\n    return (hash / csharpMax) * 100;\r\n}\r\nexports.getSamplingHashCode = getSamplingHashCode;\r\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar zlib = require(\"zlib\");\r\nvar child_process = require(\"child_process\");\r\nvar Logging = require(\"./Logging\");\r\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\r\nvar Util = require(\"./Util\");\r\nvar Sender = (function () {\r\n    function Sender(config, onSuccess, onError) {\r\n        this._config = config;\r\n        this._onSuccess = onSuccess;\r\n        this._onError = onError;\r\n        this._enableDiskRetryMode = false;\r\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\r\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\r\n        this._numConsecutiveFailures = 0;\r\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            // Node's chmod levels do not appropriately restrict file access on Windows\r\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\r\n            // access to the temporary directory used for disk retry mode.\r\n            if (Sender.USE_ICACLS) {\r\n                // This should be async - but it's currently safer to have this synchronous\r\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\r\n                try {\r\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\r\n                }\r\n                catch (e) { }\r\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\r\n                }\r\n            }\r\n            else {\r\n                // chmod works everywhere else\r\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n    * Enable or disable offline mode\r\n    */\r\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\r\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\r\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\r\n            this._resendInterval = Math.floor(resendInterval);\r\n        }\r\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\r\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\r\n        }\r\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\r\n            this._enableDiskRetryMode = false;\r\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\r\n        }\r\n    };\r\n    Sender.prototype.send = function (payload, callback) {\r\n        var _this = this;\r\n        var endpointUrl = this._config.endpointUrl;\r\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\r\n        var options = {\r\n            method: \"POST\",\r\n            withCredentials: false,\r\n            headers: {\r\n                \"Content-Type\": \"application/x-json-stream\"\r\n            }\r\n        };\r\n        zlib.gzip(payload, function (err, buffer) {\r\n            var dataToSend = buffer;\r\n            if (err) {\r\n                Logging.warn(err);\r\n                dataToSend = payload; // something went wrong so send without gzip\r\n                options.headers[\"Content-Length\"] = payload.length.toString();\r\n            }\r\n            else {\r\n                options.headers[\"Content-Encoding\"] = \"gzip\";\r\n                options.headers[\"Content-Length\"] = buffer.length;\r\n            }\r\n            Logging.info(Sender.TAG, options);\r\n            // Ensure this request is not captured by auto-collection.\r\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\r\n            var requestCallback = function (res) {\r\n                res.setEncoding(\"utf-8\");\r\n                //returns empty if the data is accepted\r\n                var responseString = \"\";\r\n                res.on(\"data\", function (data) {\r\n                    responseString += data;\r\n                });\r\n                res.on(\"end\", function () {\r\n                    _this._numConsecutiveFailures = 0;\r\n                    Logging.info(Sender.TAG, responseString);\r\n                    if (typeof _this._onSuccess === \"function\") {\r\n                        _this._onSuccess(responseString);\r\n                    }\r\n                    if (typeof callback === \"function\") {\r\n                        callback(responseString);\r\n                    }\r\n                    if (_this._enableDiskRetryMode) {\r\n                        // try to send any cached events if the user is back online\r\n                        if (res.statusCode === 200) {\r\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval);\r\n                            // store to disk in case of burst throttling\r\n                        }\r\n                        else if (res.statusCode === 408 ||\r\n                            res.statusCode === 429 ||\r\n                            res.statusCode === 439 ||\r\n                            res.statusCode === 500 ||\r\n                            res.statusCode === 503) {\r\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\r\n                            _this._storeToDisk(payload);\r\n                        }\r\n                    }\r\n                });\r\n            };\r\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\r\n            req.on(\"error\", function (error) {\r\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\r\n                _this._numConsecutiveFailures++;\r\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\r\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\r\n                // Continue informing on each failure if verbose logging is being used\r\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\r\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\r\n                    if (_this._enableDiskRetryMode) {\r\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\r\n                    }\r\n                    Logging.warn(Sender.TAG, notice, error);\r\n                }\r\n                else {\r\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\r\n                    Logging.info(Sender.TAG, notice, error);\r\n                }\r\n                _this._onErrorHelper(error);\r\n                if (typeof callback === \"function\") {\r\n                    var errorMessage = \"error sending telemetry\";\r\n                    if (error && (typeof error.toString === \"function\")) {\r\n                        errorMessage = error.toString();\r\n                    }\r\n                    callback(errorMessage);\r\n                }\r\n                if (_this._enableDiskRetryMode) {\r\n                    _this._storeToDisk(payload);\r\n                }\r\n            });\r\n            req.write(dataToSend);\r\n            req.end();\r\n        });\r\n    };\r\n    Sender.prototype.saveOnCrash = function (payload) {\r\n        if (this._enableDiskRetryMode) {\r\n            this._storeToDiskSync(payload);\r\n        }\r\n    };\r\n    Sender.prototype._runICACLS = function (args, callback) {\r\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n        aclProc.on(\"error\", function (e) { return callback(e); });\r\n        aclProc.on(\"close\", function (code, signal) {\r\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\r\n        });\r\n    };\r\n    Sender.prototype._runICACLSSync = function (args) {\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\r\n            if (aclProc.error) {\r\n                throw aclProc.error;\r\n            }\r\n            else if (aclProc.status !== 0) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLIdentity = function (callback) {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return callback(null, Sender.ACL_IDENTITY);\r\n        }\r\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n            windowsHide: true,\r\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n        });\r\n        var data = \"\";\r\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\r\n        psProc.on(\"error\", function (e) { return callback(e, null); });\r\n        psProc.on(\"close\", function (code, signal) {\r\n            Sender.ACL_IDENTITY = data && data.trim();\r\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\r\n        });\r\n    };\r\n    Sender.prototype._getACLIdentitySync = function () {\r\n        if (Sender.ACL_IDENTITY) {\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        // Some very old versions of Node (< 0.11) don't have this\r\n        if (child_process.spawnSync) {\r\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\r\n                windowsHide: true,\r\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\r\n            });\r\n            if (psProc.error) {\r\n                throw psProc.error;\r\n            }\r\n            else if (psProc.status !== 0) {\r\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\r\n            }\r\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\r\n            return Sender.ACL_IDENTITY;\r\n        }\r\n        else {\r\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\r\n        }\r\n    };\r\n    Sender.prototype._getACLArguments = function (directory, identity) {\r\n        return [directory,\r\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\r\n            \"/grant\", identity + \":(OI)(CI)F\",\r\n            \"/inheritance:r\"]; // Remove all inherited permissions\r\n    };\r\n    Sender.prototype._applyACLRules = function (directory, callback) {\r\n        var _this = this;\r\n        if (!Sender.USE_ICACLS) {\r\n            return callback(null);\r\n        }\r\n        // For performance, only run ACL rules if we haven't already during this session\r\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\r\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\r\n            // This is better than the alternative of potentially infinitely spawned processes\r\n            Sender.ACLED_DIRECTORIES[directory] = false;\r\n            // Restrict this directory to only current user and administrator access\r\n            this._getACLIdentity(function (err, identity) {\r\n                if (err) {\r\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\r\n                    return callback(err);\r\n                }\r\n                else {\r\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\r\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\r\n                        return callback(err);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\r\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\r\n        }\r\n    };\r\n    Sender.prototype._applyACLRulesSync = function (directory) {\r\n        if (Sender.USE_ICACLS) {\r\n            // For performance, only run ACL rules if we haven't already during this session\r\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\r\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\r\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\r\n                return;\r\n            }\r\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\r\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\r\n            }\r\n        }\r\n    };\r\n    Sender.prototype._confirmDirExists = function (directory, callback) {\r\n        var _this = this;\r\n        fs.lstat(directory, function (err, stats) {\r\n            if (err && err.code === 'ENOENT') {\r\n                fs.mkdir(directory, function (err) {\r\n                    if (err && err.code !== 'EEXIST') {\r\n                        callback(err);\r\n                    }\r\n                    else {\r\n                        _this._applyACLRules(directory, callback);\r\n                    }\r\n                });\r\n            }\r\n            else if (!err && stats.isDirectory()) {\r\n                _this._applyACLRules(directory, callback);\r\n            }\r\n            else {\r\n                callback(err || new Error(\"Path existed but was not a directory\"));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\r\n        // Get the directory listing\r\n        fs.readdir(directory, function (err, files) {\r\n            if (err) {\r\n                return callback(err, -1);\r\n            }\r\n            var error = null;\r\n            var totalSize = 0;\r\n            var count = 0;\r\n            if (files.length === 0) {\r\n                callback(null, 0);\r\n                return;\r\n            }\r\n            // Query all file sizes\r\n            for (var i = 0; i < files.length; i++) {\r\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\r\n                    count++;\r\n                    if (err) {\r\n                        error = err;\r\n                    }\r\n                    else {\r\n                        if (fileStats.isFile()) {\r\n                            totalSize += fileStats.size;\r\n                        }\r\n                    }\r\n                    if (count === files.length) {\r\n                        // Did we get an error?\r\n                        if (error) {\r\n                            callback(error, -1);\r\n                        }\r\n                        else {\r\n                            callback(error, totalSize);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\r\n     */\r\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\r\n        var files = fs.readdirSync(directory);\r\n        var totalSize = 0;\r\n        for (var i = 0; i < files.length; i++) {\r\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\r\n        }\r\n        return totalSize;\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk in the temp directory\r\n     */\r\n    Sender.prototype._storeToDisk = function (payload) {\r\n        var _this = this;\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        // This will create the dir if it does not exist\r\n        // Default permissions on *nix are directory listing from other users but no file creations\r\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n        this._confirmDirExists(directory, function (error) {\r\n            if (error) {\r\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\r\n                _this._onErrorHelper(error);\r\n                return;\r\n            }\r\n            _this._getShallowDirectorySize(directory, function (err, size) {\r\n                if (err || size < 0) {\r\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\r\n                    _this._onErrorHelper(err);\r\n                    return;\r\n                }\r\n                else if (size > _this._maxBytesOnDisk) {\r\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\r\n                    return;\r\n                }\r\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n                //would require an external dependency\r\n                var fileName = new Date().getTime() + \".ai.json\";\r\n                var fileFullPath = path.join(directory, fileName);\r\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\r\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\r\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\r\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Stores the payload as a json file on disk using sync file operations\r\n     * this is used when storing data before crashes\r\n     */\r\n    Sender.prototype._storeToDiskSync = function (payload) {\r\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\r\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        try {\r\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\r\n            if (!fs.existsSync(directory)) {\r\n                fs.mkdirSync(directory);\r\n            }\r\n            // Make sure permissions are valid\r\n            this._applyACLRulesSync(directory);\r\n            var dirSize = this._getShallowDirectorySizeSync(directory);\r\n            if (dirSize > this._maxBytesOnDisk) {\r\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\r\n                return;\r\n            }\r\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\r\n            //would require an external dependency\r\n            var fileName = new Date().getTime() + \".ai.json\";\r\n            var fileFullPath = path.join(directory, fileName);\r\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\r\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\r\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\r\n        }\r\n        catch (error) {\r\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\r\n            this._onErrorHelper(error);\r\n        }\r\n    };\r\n    /**\r\n     * Check for temp telemetry files\r\n     * reads the first file if exist, deletes it and tries to send its load\r\n     */\r\n    Sender.prototype._sendFirstFileOnDisk = function () {\r\n        var _this = this;\r\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\r\n        fs.exists(tempDir, function (exists) {\r\n            if (exists) {\r\n                fs.readdir(tempDir, function (error, files) {\r\n                    if (!error) {\r\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\r\n                        if (files.length > 0) {\r\n                            var firstFile = files[0];\r\n                            var filePath = path.join(tempDir, firstFile);\r\n                            fs.readFile(filePath, function (error, payload) {\r\n                                if (!error) {\r\n                                    // delete the file first to prevent double sending\r\n                                    fs.unlink(filePath, function (error) {\r\n                                        if (!error) {\r\n                                            _this.send(payload);\r\n                                        }\r\n                                        else {\r\n                                            _this._onErrorHelper(error);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                else {\r\n                                    _this._onErrorHelper(error);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _this._onErrorHelper(error);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    Sender.prototype._onErrorHelper = function (error) {\r\n        if (typeof this._onError === \"function\") {\r\n            this._onError(error);\r\n        }\r\n    };\r\n    Sender.TAG = \"Sender\";\r\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\r\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\r\n    Sender.ACLED_DIRECTORIES = {};\r\n    Sender.ACL_IDENTITY = null;\r\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\r\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\r\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\r\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\r\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\r\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\r\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\r\n    return Sender;\r\n}());\r\nmodule.exports = Sender;\r\n//# sourceMappingURL=Sender.js.map","module.exports = require(\"zlib\");","\"use strict\";\r\nvar Contracts = require(\"../Declarations/Contracts\");\r\nvar Util = require(\"./Util\");\r\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\r\n/**\r\n * Manages the logic of creating envelopes from Telemetry objects\r\n */\r\nvar EnvelopeFactory = (function () {\r\n    function EnvelopeFactory() {\r\n    }\r\n    /**\r\n     * Creates envelope ready to be sent by Channel\r\n     * @param telemetry Telemetry data\r\n     * @param telemetryType Type of telemetry\r\n     * @param commonProperties Bag of custom common properties to be added to the envelope\r\n     * @param context Client context\r\n     * @param config Client configuration\r\n     */\r\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\r\n        var data = null;\r\n        switch (telemetryType) {\r\n            case Contracts.TelemetryType.Trace:\r\n                data = EnvelopeFactory.createTraceData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Dependency:\r\n                data = EnvelopeFactory.createDependencyData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Event:\r\n                data = EnvelopeFactory.createEventData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Exception:\r\n                data = EnvelopeFactory.createExceptionData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Request:\r\n                data = EnvelopeFactory.createRequestData(telemetry);\r\n                break;\r\n            case Contracts.TelemetryType.Metric:\r\n                data = EnvelopeFactory.createMetricData(telemetry);\r\n                break;\r\n        }\r\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\r\n            if (data && data.baseData) {\r\n                // if no properties are specified just add the common ones\r\n                if (!data.baseData.properties) {\r\n                    data.baseData.properties = commonProperties;\r\n                }\r\n                else {\r\n                    // otherwise, check each of the common ones\r\n                    for (var name in commonProperties) {\r\n                        // only override if the property `name` has not been set on this item\r\n                        if (!data.baseData.properties[name]) {\r\n                            data.baseData.properties[name] = commonProperties[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // sanitize properties\r\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\r\n        }\r\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\r\n        var envelope = new Contracts.Envelope();\r\n        envelope.data = data;\r\n        envelope.iKey = iKey;\r\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\r\n        envelope.name =\r\n            \"Microsoft.ApplicationInsights.\" +\r\n                iKey.replace(/-/g, \"\") +\r\n                \".\" +\r\n                data.baseType.substr(0, data.baseType.length - 4);\r\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\r\n        envelope.time = (new Date()).toISOString();\r\n        envelope.ver = 1;\r\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\r\n        // Exclude metrics from sampling by default\r\n        if (telemetryType === Contracts.TelemetryType.Metric) {\r\n            envelope.sampleRate = 100;\r\n        }\r\n        return envelope;\r\n    };\r\n    EnvelopeFactory.createTraceData = function (telemetry) {\r\n        var trace = new Contracts.MessageData();\r\n        trace.message = telemetry.message;\r\n        trace.properties = telemetry.properties;\r\n        if (!isNaN(telemetry.severity)) {\r\n            trace.severityLevel = telemetry.severity;\r\n        }\r\n        else {\r\n            trace.severityLevel = Contracts.SeverityLevel.Information;\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\r\n        data.baseData = trace;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createDependencyData = function (telemetry) {\r\n        var remoteDependency = new Contracts.RemoteDependencyData();\r\n        remoteDependency.name = telemetry.name;\r\n        remoteDependency.data = telemetry.data;\r\n        remoteDependency.target = telemetry.target;\r\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\r\n        remoteDependency.success = telemetry.success;\r\n        remoteDependency.type = telemetry.dependencyTypeName;\r\n        remoteDependency.properties = telemetry.properties;\r\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        if (telemetry.id) {\r\n            remoteDependency.id = telemetry.id;\r\n        }\r\n        else {\r\n            remoteDependency.id = Util.w3cTraceId();\r\n        }\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\r\n        data.baseData = remoteDependency;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createEventData = function (telemetry) {\r\n        var event = new Contracts.EventData();\r\n        event.name = telemetry.name;\r\n        event.properties = telemetry.properties;\r\n        event.measurements = telemetry.measurements;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\r\n        data.baseData = event;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createExceptionData = function (telemetry) {\r\n        var exception = new Contracts.ExceptionData();\r\n        exception.properties = telemetry.properties;\r\n        exception.severityLevel = Contracts.SeverityLevel.Error;\r\n        exception.measurements = telemetry.measurements;\r\n        exception.exceptions = [];\r\n        var stack = telemetry.exception[\"stack\"];\r\n        var exceptionDetails = new Contracts.ExceptionDetails();\r\n        exceptionDetails.message = telemetry.exception.message;\r\n        exceptionDetails.typeName = telemetry.exception.name;\r\n        exceptionDetails.parsedStack = this.parseStack(stack);\r\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\r\n        exception.exceptions.push(exceptionDetails);\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\r\n        data.baseData = exception;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createRequestData = function (telemetry) {\r\n        var requestData = new Contracts.RequestData();\r\n        if (telemetry.id) {\r\n            requestData.id = telemetry.id;\r\n        }\r\n        else {\r\n            requestData.id = Util.w3cTraceId();\r\n        }\r\n        requestData.name = telemetry.name;\r\n        requestData.url = telemetry.url;\r\n        requestData.source = telemetry.source;\r\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\r\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\r\n        requestData.success = telemetry.success;\r\n        requestData.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\r\n        data.baseData = requestData;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.createMetricData = function (telemetry) {\r\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\r\n        metrics.metrics = [];\r\n        var metric = new Contracts.DataPoint();\r\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\r\n        metric.kind = Contracts.DataPointType.Aggregation;\r\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\r\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\r\n        metric.name = telemetry.name;\r\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\r\n        metric.value = telemetry.value;\r\n        metrics.metrics.push(metric);\r\n        metrics.properties = telemetry.properties;\r\n        var data = new Contracts.Data();\r\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\r\n        data.baseData = metrics;\r\n        return data;\r\n    };\r\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\r\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\r\n        // Make a copy of context tags so we don't alter the actual object\r\n        // Also perform tag overriding\r\n        var newTags = {};\r\n        if (context && context.tags) {\r\n            for (var key in context.tags) {\r\n                newTags[key] = context.tags[key];\r\n            }\r\n        }\r\n        if (tagOverrides) {\r\n            for (var key in tagOverrides) {\r\n                newTags[key] = tagOverrides[key];\r\n            }\r\n        }\r\n        // Fill in internally-populated values if not already set\r\n        if (correlationContext) {\r\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\r\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\r\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\r\n        }\r\n        return newTags;\r\n    };\r\n    EnvelopeFactory.parseStack = function (stack) {\r\n        var parsedStack = undefined;\r\n        if (typeof stack === \"string\") {\r\n            var frames = stack.split(\"\\n\");\r\n            parsedStack = [];\r\n            var level = 0;\r\n            var totalSizeInBytes = 0;\r\n            for (var i = 0; i <= frames.length; i++) {\r\n                var frame = frames[i];\r\n                if (_StackFrame.regex.test(frame)) {\r\n                    var parsedFrame = new _StackFrame(frames[i], level++);\r\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\r\n                    parsedStack.push(parsedFrame);\r\n                }\r\n            }\r\n            // DP Constraint - exception parsed stack must be < 32KB\r\n            // remove frames from the middle to meet the threshold\r\n            var exceptionParsedStackThreshold = 32 * 1024;\r\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\r\n                var left = 0;\r\n                var right = parsedStack.length - 1;\r\n                var size = 0;\r\n                var acceptedLeft = left;\r\n                var acceptedRight = right;\r\n                while (left < right) {\r\n                    // check size\r\n                    var lSize = parsedStack[left].sizeInBytes;\r\n                    var rSize = parsedStack[right].sizeInBytes;\r\n                    size += lSize + rSize;\r\n                    if (size > exceptionParsedStackThreshold) {\r\n                        // remove extra frames from the middle\r\n                        var howMany = acceptedRight - acceptedLeft + 1;\r\n                        parsedStack.splice(acceptedLeft, howMany);\r\n                        break;\r\n                    }\r\n                    // update pointers\r\n                    acceptedLeft = left;\r\n                    acceptedRight = right;\r\n                    left++;\r\n                    right--;\r\n                }\r\n            }\r\n        }\r\n        return parsedStack;\r\n    };\r\n    return EnvelopeFactory;\r\n}());\r\nvar _StackFrame = (function () {\r\n    function _StackFrame(frame, level) {\r\n        this.sizeInBytes = 0;\r\n        this.level = level;\r\n        this.method = \"<no_method>\";\r\n        this.assembly = Util.trim(frame);\r\n        var matches = frame.match(_StackFrame.regex);\r\n        if (matches && matches.length >= 5) {\r\n            this.method = Util.trim(matches[2]) || this.method;\r\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\r\n            this.line = parseInt(matches[5]) || 0;\r\n        }\r\n        this.sizeInBytes += this.method.length;\r\n        this.sizeInBytes += this.fileName.length;\r\n        this.sizeInBytes += this.assembly.length;\r\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\r\n        this.sizeInBytes += _StackFrame.baseSize;\r\n        this.sizeInBytes += this.level.toString().length;\r\n        this.sizeInBytes += this.line.toString().length;\r\n    }\r\n    // regex to match stack frames from ie/chrome/ff\r\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\r\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\r\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\r\n    return _StackFrame;\r\n}());\r\nmodule.exports = EnvelopeFactory;\r\n//# sourceMappingURL=EnvelopeFactory.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { Logger } from './logger';\n\nenum Trace {\n\tOff,\n\tMessages,\n\tVerbose,\n}\n\nnamespace Trace {\n\texport function fromString(value: string): Trace {\n\t\tvalue = value.toLowerCase();\n\t\tswitch (value) {\n\t\t\tcase 'off':\n\t\t\t\treturn Trace.Off;\n\t\t\tcase 'messages':\n\t\t\t\treturn Trace.Messages;\n\t\t\tcase 'verbose':\n\t\t\t\treturn Trace.Verbose;\n\t\t\tdefault:\n\t\t\t\treturn Trace.Off;\n\t\t}\n\t}\n}\n\ninterface RequestExecutionMetadata {\n\treadonly queuingStartTime: number\n}\n\nexport default class Tracer {\n\tprivate trace?: Trace;\n\n\tconstructor(\n\t\tprivate readonly logger: Logger\n\t) {\n\t\tthis.updateConfiguration();\n\t}\n\n\tpublic updateConfiguration() {\n\t\tthis.trace = Tracer.readTrace();\n\t}\n\n\tprivate static readTrace(): Trace {\n\t\tlet result: Trace = Trace.fromString(vscode.workspace.getConfiguration().get<string>('typescript.tsserver.trace', 'off'));\n\t\tif (result === Trace.Off && !!process.env.TSS_TRACE) {\n\t\t\tresult = Trace.Messages;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic traceRequest(serverId: string, request: Proto.Request, responseExpected: boolean, queueLength: number): void {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tlet data: string | undefined = undefined;\n\t\tif (this.trace === Trace.Verbose && request.arguments) {\n\t\t\tdata = `Arguments: ${JSON.stringify(request.arguments, null, 4)}`;\n\t\t}\n\t\tthis.logTrace(serverId, `Sending request: ${request.command} (${request.seq}). Response expected: ${responseExpected ? 'yes' : 'no'}. Current queue length: ${queueLength}`, data);\n\t}\n\n\tpublic traceResponse(serverId: string, response: Proto.Response, meta: RequestExecutionMetadata): void {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tlet data: string | undefined = undefined;\n\t\tif (this.trace === Trace.Verbose && response.body) {\n\t\t\tdata = `Result: ${JSON.stringify(response.body, null, 4)}`;\n\t\t}\n\t\tthis.logTrace(serverId, `Response received: ${response.command} (${response.request_seq}). Request took ${Date.now() - meta.queuingStartTime} ms. Success: ${response.success} ${!response.success ? '. Message: ' + response.message : ''}`, data);\n\t}\n\n\tpublic traceRequestCompleted(serverId: string, command: string, request_seq: number, meta: RequestExecutionMetadata): any {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tthis.logTrace(serverId, `Async response received: ${command} (${request_seq}). Request took ${Date.now() - meta.queuingStartTime} ms.`);\n\t}\n\n\tpublic traceEvent(serverId: string, event: Proto.Event): void {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tlet data: string | undefined = undefined;\n\t\tif (this.trace === Trace.Verbose && event.body) {\n\t\t\tdata = `Data: ${JSON.stringify(event.body, null, 4)}`;\n\t\t}\n\t\tthis.logTrace(serverId, `Event received: ${event.event} (${event.seq}).`, data);\n\t}\n\n\tpublic logTrace(serverId: string, message: string, data?: any): void {\n\t\tif (this.trace !== Trace.Off) {\n\t\t\tthis.logger.logLevel('Trace', `<${serverId}> ${message}`, data);\n\t\t}\n\t}\n}\n",null,null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport * as fileSchemes from '../utils/fileSchemes';\nimport { doesResourceLookLikeAJavaScriptFile, doesResourceLookLikeATypeScriptFile } from '../utils/languageDescription';\nimport * as typeConverters from '../utils/typeConverters';\nimport { parseKindModifier } from '../utils/modifiers';\n\nfunction getSymbolKind(item: Proto.NavtoItem): vscode.SymbolKind {\n\tswitch (item.kind) {\n\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\tcase PConst.Kind.enumMember: return vscode.SymbolKind.EnumMember;\n\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\tcase PConst.Kind.type: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\tdefault: return vscode.SymbolKind.Variable;\n\t}\n}\n\nclass TypeScriptWorkspaceSymbolProvider implements vscode.WorkspaceSymbolProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly modeIds: readonly string[],\n\t) { }\n\n\tpublic async provideWorkspaceSymbols(\n\t\tsearch: string,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.SymbolInformation[]> {\n\t\tlet file: string | undefined;\n\t\tif (this.searchAllOpenProjects) {\n\t\t\tfile = undefined;\n\t\t} else {\n\t\t\tconst document = this.getDocument();\n\t\t\tfile = document ? await this.toOpenedFiledPath(document) : undefined;\n\n\t\t\tif (!file && this.client.apiVersion.lt(API.v390)) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\tconst args: Proto.NavtoRequestArgs = {\n\t\t\tfile,\n\t\t\tsearchValue: search,\n\t\t\tmaxResultCount: 256,\n\t\t};\n\n\t\tconst response = await this.client.execute('navto', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn response.body\n\t\t\t.filter(item => item.containerName || item.kind !== 'alias')\n\t\t\t.map(item => this.toSymbolInformation(item));\n\t}\n\n\tprivate get searchAllOpenProjects() {\n\t\treturn this.client.apiVersion.gte(API.v390)\n\t\t\t&& vscode.workspace.getConfiguration('typescript').get('workspaceSymbols.scope', 'allOpenProjects') === 'allOpenProjects';\n\t}\n\n\tprivate async toOpenedFiledPath(document: vscode.TextDocument) {\n\t\tif (document.uri.scheme === fileSchemes.git) {\n\t\t\ttry {\n\t\t\t\tconst path = vscode.Uri.file(JSON.parse(document.uri.query)?.path);\n\t\t\t\tif (doesResourceLookLikeATypeScriptFile(path) || doesResourceLookLikeAJavaScriptFile(path)) {\n\t\t\t\t\tconst document = await vscode.workspace.openTextDocument(path);\n\t\t\t\t\treturn this.client.toOpenedFilePath(document);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\t\t}\n\t\treturn this.client.toOpenedFilePath(document);\n\t}\n\n\tprivate toSymbolInformation(item: Proto.NavtoItem) {\n\t\tconst label = TypeScriptWorkspaceSymbolProvider.getLabel(item);\n\t\tconst info = new vscode.SymbolInformation(\n\t\t\tlabel,\n\t\t\tgetSymbolKind(item),\n\t\t\titem.containerName || '',\n\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(item.file), item));\n\t\tconst kindModifiers = item.kindModifiers ? parseKindModifier(item.kindModifiers) : undefined;\n\t\tif (kindModifiers?.has(PConst.KindModifiers.depreacted)) {\n\t\t\tinfo.tags = [vscode.SymbolTag.Deprecated];\n\t\t}\n\t\treturn info;\n\t}\n\n\tprivate static getLabel(item: Proto.NavtoItem) {\n\t\tconst label = item.name;\n\t\tif (item.kind === 'method' || item.kind === 'function') {\n\t\t\treturn label + '()';\n\t\t}\n\t\treturn label;\n\t}\n\n\tprivate getDocument(): vscode.TextDocument | undefined {\n\t\t// typescript wants to have a resource even when asking\n\t\t// general questions so we check the active editor. If this\n\t\t// doesn't match we take the first TS document.\n\n\t\tconst activeDocument = vscode.window.activeTextEditor?.document;\n\t\tif (activeDocument) {\n\t\t\tif (this.modeIds.includes(activeDocument.languageId)) {\n\t\t\t\treturn activeDocument;\n\t\t\t}\n\t\t}\n\n\t\tconst documents = vscode.workspace.textDocuments;\n\t\tfor (const document of documents) {\n\t\t\tif (this.modeIds.includes(document.languageId)) {\n\t\t\t\treturn document;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport function register(\n\tclient: ITypeScriptServiceClient,\n\tmodeIds: readonly string[],\n) {\n\treturn vscode.languages.registerWorkspaceSymbolProvider(\n\t\tnew TypeScriptWorkspaceSymbolProvider(client, modeIds));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface Lazy<T> {\n\tvalue: T;\n\thasValue: boolean;\n\tmap<R>(f: (x: T) => R): Lazy<R>;\n}\n\nclass LazyValue<T> implements Lazy<T> {\n\tprivate _hasValue: boolean = false;\n\tprivate _value?: T;\n\n\tconstructor(\n\t\tprivate readonly _getValue: () => T\n\t) { }\n\n\tget value(): T {\n\t\tif (!this._hasValue) {\n\t\t\tthis._hasValue = true;\n\t\t\tthis._value = this._getValue();\n\t\t}\n\t\treturn this._value!;\n\t}\n\n\tget hasValue(): boolean {\n\t\treturn this._hasValue;\n\t}\n\n\tpublic map<R>(f: (x: T) => R): Lazy<R> {\n\t\treturn new LazyValue(() => f(this.value));\n\t}\n}\n\nexport function lazy<T>(getValue: () => T): Lazy<T> {\n\treturn new LazyValue<T>(getValue);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Disposable } from './dispose';\nimport { isJsConfigOrTsConfigFileName } from './languageDescription';\nimport { isSupportedLanguageMode } from './languageModeIds';\n\n/**\n * When clause context set when the current file is managed by vscode's built-in typescript extension.\n */\nexport default class ManagedFileContextManager extends Disposable {\n\tprivate static readonly contextName = 'typescript.isManagedFile';\n\n\tprivate isInManagedFileContext: boolean = false;\n\n\tpublic constructor(\n\t\tprivate readonly normalizePath: (resource: vscode.Uri) => string | undefined\n\t) {\n\t\tsuper();\n\t\tvscode.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor, this, this._disposables);\n\n\t\tthis.onDidChangeActiveTextEditor(vscode.window.activeTextEditor);\n\t}\n\n\tprivate onDidChangeActiveTextEditor(editor?: vscode.TextEditor): any {\n\t\tif (editor) {\n\t\t\tthis.updateContext(this.isManagedFile(editor));\n\t\t}\n\t}\n\n\tprivate updateContext(newValue: boolean) {\n\t\tif (newValue === this.isInManagedFileContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tvscode.commands.executeCommand('setContext', ManagedFileContextManager.contextName, newValue);\n\t\tthis.isInManagedFileContext = newValue;\n\t}\n\n\tprivate isManagedFile(editor: vscode.TextEditor): boolean {\n\t\treturn this.isManagedScriptFile(editor) || this.isManagedConfigFile(editor);\n\t}\n\n\tprivate isManagedScriptFile(editor: vscode.TextEditor): boolean {\n\t\treturn isSupportedLanguageMode(editor.document) && this.normalizePath(editor.document.uri) !== null;\n\t}\n\n\tprivate isManagedConfigFile(editor: vscode.TextEditor): boolean {\n\t\treturn isJsConfigOrTsConfigFileName(editor.document.fileName);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { getTempFile } from '../utils/temp.electron';\nimport Tracer from '../utils/tracer';\nimport { OngoingRequestCanceller, OngoingRequestCancellerFactory } from './cancellation';\n\nexport class NodeRequestCanceller implements OngoingRequestCanceller {\n\tpublic readonly cancellationPipeName: string;\n\n\tpublic constructor(\n\t\tprivate readonly _serverId: string,\n\t\tprivate readonly _tracer: Tracer,\n\t) {\n\t\tthis.cancellationPipeName = getTempFile('tscancellation');\n\t}\n\n\tpublic tryCancelOngoingRequest(seq: number): boolean {\n\t\tif (!this.cancellationPipeName) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._tracer.logTrace(this._serverId, `TypeScript Server: trying to cancel ongoing request with sequence number ${seq}`);\n\t\ttry {\n\t\t\tfs.writeFileSync(this.cancellationPipeName + seq, '');\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\t\treturn true;\n\t}\n}\n\n\nexport const nodeRequestCancellerFactory = new class implements OngoingRequestCancellerFactory {\n\tcreate(serverId: string, tracer: Tracer): OngoingRequestCanceller {\n\t\treturn new NodeRequestCanceller(serverId, tracer);\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { ILogDirectoryProvider } from './logDirectoryProvider';\nimport { memoize } from '../utils/memoize';\n\nexport class NodeLogDirectoryProvider implements ILogDirectoryProvider {\n\tpublic constructor(\n\t\tprivate readonly context: vscode.ExtensionContext\n\t) { }\n\n\tpublic getNewLogDirectory(): string | undefined {\n\t\tconst root = this.logDirectory();\n\t\tif (root) {\n\t\t\ttry {\n\t\t\t\treturn fs.mkdtempSync(path.join(root, `tsserver-log-`));\n\t\t\t} catch (e) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t@memoize\n\tprivate logDirectory(): string | undefined {\n\t\ttry {\n\t\t\tconst path = this.context.logPath;\n\t\t\tif (!fs.existsSync(path)) {\n\t\t\t\tfs.mkdirSync(path);\n\t\t\t}\n\t\t\treturn this.context.logPath;\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport API from '../utils/api';\nimport { TypeScriptServiceConfiguration } from '../utils/configuration';\nimport { RelativeWorkspacePathResolver } from '../utils/relativePathResolver';\nimport { ITypeScriptVersionProvider, localize, TypeScriptVersion, TypeScriptVersionSource } from './versionProvider';\n\nexport class DiskTypeScriptVersionProvider implements ITypeScriptVersionProvider {\n\n\tpublic constructor(\n\t\tprivate configuration?: TypeScriptServiceConfiguration\n\t) { }\n\n\tpublic updateConfiguration(configuration: TypeScriptServiceConfiguration): void {\n\t\tthis.configuration = configuration;\n\t}\n\n\tpublic get defaultVersion(): TypeScriptVersion {\n\t\treturn this.globalVersion || this.bundledVersion;\n\t}\n\n\tpublic get globalVersion(): TypeScriptVersion | undefined {\n\t\tif (this.configuration?.globalTsdk) {\n\t\t\tconst globals = this.loadVersionsFromSetting(TypeScriptVersionSource.UserSetting, this.configuration.globalTsdk);\n\t\t\tif (globals && globals.length) {\n\t\t\t\treturn globals[0];\n\t\t\t}\n\t\t}\n\t\treturn this.contributedTsNextVersion;\n\t}\n\n\tpublic get localVersion(): TypeScriptVersion | undefined {\n\t\tconst tsdkVersions = this.localTsdkVersions;\n\t\tif (tsdkVersions && tsdkVersions.length) {\n\t\t\treturn tsdkVersions[0];\n\t\t}\n\n\t\tconst nodeVersions = this.localNodeModulesVersions;\n\t\tif (nodeVersions && nodeVersions.length === 1) {\n\t\t\treturn nodeVersions[0];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\n\tpublic get localVersions(): TypeScriptVersion[] {\n\t\tconst allVersions = this.localTsdkVersions.concat(this.localNodeModulesVersions);\n\t\tconst paths = new Set<string>();\n\t\treturn allVersions.filter(x => {\n\t\t\tif (paths.has(x.path)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tpaths.add(x.path);\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tpublic get bundledVersion(): TypeScriptVersion {\n\t\tconst version = this.getContributedVersion(TypeScriptVersionSource.Bundled, 'vscode.typescript-language-features', ['..', 'node_modules']);\n\t\tif (version) {\n\t\t\treturn version;\n\t\t}\n\n\t\tvscode.window.showErrorMessage(localize(\n\t\t\t'noBundledServerFound',\n\t\t\t'VS Code\\'s tsserver was deleted by another application such as a misbehaving virus detection tool. Please reinstall VS Code.'));\n\t\tthrow new Error('Could not find bundled tsserver.js');\n\t}\n\n\tprivate get contributedTsNextVersion(): TypeScriptVersion | undefined {\n\t\treturn this.getContributedVersion(TypeScriptVersionSource.TsNightlyExtension, 'ms-vscode.vscode-typescript-next', ['node_modules']);\n\t}\n\n\tprivate getContributedVersion(source: TypeScriptVersionSource, extensionId: string, pathToTs: readonly string[]): TypeScriptVersion | undefined {\n\t\ttry {\n\t\t\tconst extension = vscode.extensions.getExtension(extensionId);\n\t\t\tif (extension) {\n\t\t\t\tconst serverPath = path.join(extension.extensionPath, ...pathToTs, 'typescript', 'lib', 'tsserver.js');\n\t\t\t\tconst bundledVersion = new TypeScriptVersion(source, serverPath, DiskTypeScriptVersionProvider.getApiVersion(serverPath), '');\n\t\t\t\tif (bundledVersion.isValid) {\n\t\t\t\t\treturn bundledVersion;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate get localTsdkVersions(): TypeScriptVersion[] {\n\t\tconst localTsdk = this.configuration?.localTsdk;\n\t\treturn localTsdk ? this.loadVersionsFromSetting(TypeScriptVersionSource.WorkspaceSetting, localTsdk) : [];\n\t}\n\n\tprivate loadVersionsFromSetting(source: TypeScriptVersionSource, tsdkPathSetting: string): TypeScriptVersion[] {\n\t\tif (path.isAbsolute(tsdkPathSetting)) {\n\t\t\tconst serverPath = path.join(tsdkPathSetting, 'tsserver.js');\n\t\t\treturn [\n\t\t\t\tnew TypeScriptVersion(source,\n\t\t\t\t\tserverPath,\n\t\t\t\t\tDiskTypeScriptVersionProvider.getApiVersion(serverPath),\n\t\t\t\t\ttsdkPathSetting)\n\t\t\t];\n\t\t}\n\n\t\tconst workspacePath = RelativeWorkspacePathResolver.asAbsoluteWorkspacePath(tsdkPathSetting);\n\t\tif (workspacePath !== undefined) {\n\t\t\tconst serverPath = path.join(workspacePath, 'tsserver.js');\n\t\t\treturn [\n\t\t\t\tnew TypeScriptVersion(source,\n\t\t\t\t\tserverPath,\n\t\t\t\t\tDiskTypeScriptVersionProvider.getApiVersion(serverPath),\n\t\t\t\t\ttsdkPathSetting)\n\t\t\t];\n\t\t}\n\n\t\treturn this.loadTypeScriptVersionsFromPath(source, tsdkPathSetting);\n\t}\n\n\tprivate get localNodeModulesVersions(): TypeScriptVersion[] {\n\t\treturn this.loadTypeScriptVersionsFromPath(TypeScriptVersionSource.NodeModules, path.join('node_modules', 'typescript', 'lib'))\n\t\t\t.filter(x => x.isValid);\n\t}\n\n\tprivate loadTypeScriptVersionsFromPath(source: TypeScriptVersionSource, relativePath: string): TypeScriptVersion[] {\n\t\tif (!vscode.workspace.workspaceFolders) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst versions: TypeScriptVersion[] = [];\n\t\tfor (const root of vscode.workspace.workspaceFolders) {\n\t\t\tlet label: string = relativePath;\n\t\t\tif (vscode.workspace.workspaceFolders.length > 1) {\n\t\t\t\tlabel = path.join(root.name, relativePath);\n\t\t\t}\n\n\t\t\tconst serverPath = path.join(root.uri.fsPath, relativePath, 'tsserver.js');\n\t\t\tversions.push(new TypeScriptVersion(source, serverPath, DiskTypeScriptVersionProvider.getApiVersion(serverPath), label));\n\t\t}\n\t\treturn versions;\n\t}\n\n\tprivate static getApiVersion(serverPath: string): API | undefined {\n\t\tconst version = DiskTypeScriptVersionProvider.getTypeScriptVersion(serverPath);\n\t\tif (version) {\n\t\t\treturn version;\n\t\t}\n\n\t\t// Allow TS developers to provide custom version\n\t\tconst tsdkVersion = vscode.workspace.getConfiguration().get<string | undefined>('typescript.tsdk_version', undefined);\n\t\tif (tsdkVersion) {\n\t\t\treturn API.fromVersionString(tsdkVersion);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate static getTypeScriptVersion(serverPath: string): API | undefined {\n\t\tif (!fs.existsSync(serverPath)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst p = serverPath.split(path.sep);\n\t\tif (p.length <= 2) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst p2 = p.slice(0, -2);\n\t\tconst modulePath = p2.join(path.sep);\n\t\tlet fileName = path.join(modulePath, 'package.json');\n\t\tif (!fs.existsSync(fileName)) {\n\t\t\t// Special case for ts dev versions\n\t\t\tif (path.basename(modulePath) === 'built') {\n\t\t\t\tfileName = path.join(modulePath, '..', 'package.json');\n\t\t\t}\n\t\t}\n\t\tif (!fs.existsSync(fileName)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst contents = fs.readFileSync(fileName).toString();\n\t\tlet desc: any = null;\n\t\ttry {\n\t\t\tdesc = JSON.parse(contents);\n\t\t} catch (err) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!desc || !desc.version) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn desc.version ? API.fromVersionString(desc.version) : undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface Command {\n\treadonly id: string | string[];\n\n\texecute(...args: any[]): void;\n}\n\nexport class CommandManager {\n\tprivate readonly commands = new Map<string, vscode.Disposable>();\n\n\tpublic dispose() {\n\t\tfor (const registration of this.commands.values()) {\n\t\t\tregistration.dispose();\n\t\t}\n\t\tthis.commands.clear();\n\t}\n\n\tpublic register<T extends Command>(command: T): T {\n\t\tfor (const id of Array.isArray(command.id) ? command.id : [command.id]) {\n\t\t\tthis.registerCommand(id, command.execute, command);\n\t\t}\n\t\treturn command;\n\t}\n\n\tprivate registerCommand(id: string, impl: (...args: any[]) => void, thisArg?: any) {\n\t\tif (this.commands.has(id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.commands.set(id, vscode.commands.registerCommand(id, impl, thisArg));\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { getTempFile } from './temp.electron';\n\nexport const onCaseInsenitiveFileSystem = (() => {\n\tlet value: boolean | undefined;\n\treturn (): boolean => {\n\t\tif (typeof value === 'undefined') {\n\t\t\tif (process.platform === 'win32') {\n\t\t\t\tvalue = true;\n\t\t\t} else if (process.platform !== 'darwin') {\n\t\t\t\tvalue = false;\n\t\t\t} else {\n\t\t\t\tconst temp = getTempFile('typescript-case-check');\n\t\t\t\tfs.writeFileSync(temp, '');\n\t\t\t\tvalue = fs.existsSync(temp.toUpperCase());\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t};\n})();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as arrays from './arrays';\nimport { Disposable } from './dispose';\n\nexport interface TypeScriptServerPlugin {\n\treadonly path: string;\n\treadonly name: string;\n\treadonly enableForWorkspaceTypeScriptVersions: boolean;\n\treadonly languages: ReadonlyArray<string>;\n\treadonly configNamespace?: string\n}\n\nnamespace TypeScriptServerPlugin {\n\texport function equals(a: TypeScriptServerPlugin, b: TypeScriptServerPlugin): boolean {\n\t\treturn a.path === b.path\n\t\t\t&& a.name === b.name\n\t\t\t&& a.enableForWorkspaceTypeScriptVersions === b.enableForWorkspaceTypeScriptVersions\n\t\t\t&& arrays.equals(a.languages, b.languages);\n\t}\n}\n\nexport class PluginManager extends Disposable {\n\tprivate readonly _pluginConfigurations = new Map<string, {}>();\n\n\tprivate _plugins: Map<string, ReadonlyArray<TypeScriptServerPlugin>> | undefined;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tvscode.extensions.onDidChange(() => {\n\t\t\tif (!this._plugins) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst newPlugins = this.readPlugins();\n\t\t\tif (!arrays.equals(arrays.flatten(Array.from(this._plugins.values())), arrays.flatten(Array.from(newPlugins.values())), TypeScriptServerPlugin.equals)) {\n\t\t\t\tthis._plugins = newPlugins;\n\t\t\t\tthis._onDidUpdatePlugins.fire(this);\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\t}\n\n\tpublic get plugins(): ReadonlyArray<TypeScriptServerPlugin> {\n\t\tif (!this._plugins) {\n\t\t\tthis._plugins = this.readPlugins();\n\t\t}\n\t\treturn arrays.flatten(Array.from(this._plugins.values()));\n\t}\n\n\tprivate readonly _onDidUpdatePlugins = this._register(new vscode.EventEmitter<this>());\n\tpublic readonly onDidChangePlugins = this._onDidUpdatePlugins.event;\n\n\tprivate readonly _onDidUpdateConfig = this._register(new vscode.EventEmitter<{ pluginId: string, config: {} }>());\n\tpublic readonly onDidUpdateConfig = this._onDidUpdateConfig.event;\n\n\tpublic setConfiguration(pluginId: string, config: {}) {\n\t\tthis._pluginConfigurations.set(pluginId, config);\n\t\tthis._onDidUpdateConfig.fire({ pluginId, config });\n\t}\n\n\tpublic configurations(): IterableIterator<[string, {}]> {\n\t\treturn this._pluginConfigurations.entries();\n\t}\n\n\tprivate readPlugins() {\n\t\tconst pluginMap = new Map<string, ReadonlyArray<TypeScriptServerPlugin>>();\n\t\tfor (const extension of vscode.extensions.all) {\n\t\t\tconst pack = extension.packageJSON;\n\t\t\tif (pack.contributes && Array.isArray(pack.contributes.typescriptServerPlugins)) {\n\t\t\t\tconst plugins: TypeScriptServerPlugin[] = [];\n\t\t\t\tfor (const plugin of pack.contributes.typescriptServerPlugins) {\n\t\t\t\t\tplugins.push({\n\t\t\t\t\t\tname: plugin.name,\n\t\t\t\t\t\tenableForWorkspaceTypeScriptVersions: !!plugin.enableForWorkspaceTypeScriptVersions,\n\t\t\t\t\t\tpath: extension.extensionPath,\n\t\t\t\t\t\tlanguages: Array.isArray(plugin.languages) ? plugin.languages : [],\n\t\t\t\t\t\tconfigNamespace: plugin.configNamespace,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (plugins.length) {\n\t\t\t\t\tpluginMap.set(extension.id, plugins);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn pluginMap;\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport { join } from 'path';\nimport * as vscode from 'vscode';\n\nfunction rndName() {\n\treturn Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);\n}\n\nexport function createRandomFile(contents = '', fileExtension = 'txt'): Thenable<vscode.Uri> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst tmpFile = join(os.tmpdir(), rndName() + '.' + fileExtension);\n\t\tfs.writeFile(tmpFile, contents, (error) => {\n\t\t\tif (error) {\n\t\t\t\treturn reject(error);\n\t\t\t}\n\n\t\t\tresolve(vscode.Uri.file(tmpFile));\n\t\t});\n\t});\n}\n\n\nexport function deleteFile(file: vscode.Uri): Thenable<boolean> {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.unlink(file.fsPath, (err) => {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport const CURSOR = '$$CURSOR$$';\n\nexport function withRandomFileEditor(\n\tcontents: string,\n\tfileExtension: string,\n\trun: (editor: vscode.TextEditor, doc: vscode.TextDocument) => Thenable<void>\n): Thenable<boolean> {\n\tconst cursorIndex = contents.indexOf(CURSOR);\n\treturn createRandomFile(contents.replace(CURSOR, ''), fileExtension).then(file => {\n\t\treturn vscode.workspace.openTextDocument(file).then(doc => {\n\t\t\treturn vscode.window.showTextDocument(doc).then((editor) => {\n\t\t\t\tif (cursorIndex >= 0) {\n\t\t\t\t\tconst pos = doc.positionAt(cursorIndex);\n\t\t\t\t\teditor.selection = new vscode.Selection(pos, pos);\n\t\t\t\t}\n\t\t\t\treturn run(editor, doc).then(_ => {\n\t\t\t\t\tif (doc.isDirty) {\n\t\t\t\t\t\treturn doc.save().then(() => {\n\t\t\t\t\t\t\treturn deleteFile(file);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn deleteFile(file);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n}\n\nexport const wait = (ms: number) => new Promise<void>(resolve => setTimeout(() => resolve(), ms));\n\nexport const joinLines = (...args: string[]) => args.join(os.platform() === 'win32' ? '\\r\\n' : '\\n');\n\nexport async function createTestEditor(uri: vscode.Uri, ...lines: string[]) {\n\tconst document = await vscode.workspace.openTextDocument(uri);\n\tconst editor = await vscode.window.showTextDocument(document);\n\tawait editor.insertSnippet(new vscode.SnippetString(joinLines(...lines)), new vscode.Range(0, 0, 1000, 0));\n\treturn editor;\n}\n\nexport function assertEditorContents(editor: vscode.TextEditor, expectedDocContent: string, message?: string): void {\n\tconst cursorIndex = expectedDocContent.indexOf(CURSOR);\n\n\tassert.strictEqual(\n\t\teditor.document.getText(),\n\t\texpectedDocContent.replace(CURSOR, ''),\n\t\tmessage);\n\n\tif (cursorIndex >= 0) {\n\t\tconst expectedCursorPos = editor.document.positionAt(cursorIndex);\n\t\tassert.deepEqual(\n\t\t\t{ line: editor.selection.active.line, character: editor.selection.active.line },\n\t\t\t{ line: expectedCursorPos.line, character: expectedCursorPos.line },\n\t\t\t'Cursor position'\n\t\t);\n\t}\n}\n\nexport type VsCodeConfiguration = { [key: string]: any };\n\nexport async function updateConfig(documentUri: vscode.Uri, newConfig: VsCodeConfiguration): Promise<VsCodeConfiguration> {\n\tconst oldConfig: VsCodeConfiguration = {};\n\tconst config = vscode.workspace.getConfiguration(undefined, documentUri);\n\n\tfor (const configKey of Object.keys(newConfig)) {\n\t\toldConfig[configKey] = config.get(configKey);\n\t\tawait new Promise<void>((resolve, reject) =>\n\t\t\tconfig.update(configKey, newConfig[configKey], vscode.ConfigurationTarget.Global)\n\t\t\t\t.then(() => resolve(), reject));\n\t}\n\treturn oldConfig;\n}\n\nexport const Config = Object.freeze({\n\tautoClosingBrackets: 'editor.autoClosingBrackets',\n\ttypescriptCompleteFunctionCalls: 'typescript.suggest.completeFunctionCalls',\n\tinsertMode: 'editor.suggest.insertMode',\n\tsnippetSuggestions: 'editor.snippetSuggestions',\n\tsuggestSelection: 'editor.suggestSelection',\n\tjavascriptQuoteStyle: 'javascript.preferences.quoteStyle',\n\ttypescriptQuoteStyle: 'typescript.preferences.quoteStyle',\n} as const);\n\nexport const insertModesValues = Object.freeze(['insert', 'replace']);\n\nexport async function enumerateConfig(\n\tdocumentUri: vscode.Uri,\n\tconfigKey: string,\n\tvalues: readonly string[],\n\tf: (message: string) => Promise<void>\n): Promise<void> {\n\tfor (const value of values) {\n\t\tconst newConfig = { [configKey]: value };\n\t\tawait updateConfig(documentUri, newConfig);\n\t\tawait f(JSON.stringify(newConfig));\n\t}\n}\n\n\nexport function onChangedDocument(documentUri: vscode.Uri, disposables: vscode.Disposable[]) {\n\treturn new Promise<vscode.TextDocument>(resolve => vscode.workspace.onDidChangeTextDocument(e => {\n\t\tif (e.document.uri.toString() === documentUri.toString()) {\n\t\t\tresolve(e.document);\n\t\t}\n\t}, undefined, disposables));\n}\n\nexport async function retryUntilDocumentChanges(\n\tdocumentUri: vscode.Uri,\n\toptions: { retries: number, timeout: number },\n\tdisposables: vscode.Disposable[],\n\texec: () => Thenable<unknown>,\n) {\n\tconst didChangeDocument = onChangedDocument(documentUri, disposables);\n\n\tlet done = false;\n\n\tconst result = await Promise.race([\n\t\tdidChangeDocument,\n\t\t(async () => {\n\t\t\tfor (let i = 0; i < options.retries; ++i) {\n\t\t\t\tawait wait(options.timeout);\n\t\t\t\tif (done) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait exec();\n\t\t\t}\n\t\t})(),\n\t]);\n\tdone = true;\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport const exists = async (resource: vscode.Uri): Promise<boolean> => {\n\ttry {\n\t\tconst stat = await vscode.workspace.fs.stat(resource);\n\t\t// stat.type is an enum flag\n\t\treturn !!(stat.type & vscode.FileType.File);\n\t} catch {\n\t\treturn false;\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface TSConfig {\n\treadonly uri: vscode.Uri;\n\treadonly fsPath: string;\n\treadonly posixPath: string;\n\treadonly workspaceFolder?: vscode.WorkspaceFolder;\n}\n\nexport class TsConfigProvider {\n\tpublic async getConfigsForWorkspace(token: vscode.CancellationToken): Promise<Iterable<TSConfig>> {\n\t\tif (!vscode.workspace.workspaceFolders) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst configs = new Map<string, TSConfig>();\n\t\tfor (const config of await this.findConfigFiles(token)) {\n\t\t\tconst root = vscode.workspace.getWorkspaceFolder(config);\n\t\t\tif (root) {\n\t\t\t\tconfigs.set(config.fsPath, {\n\t\t\t\t\turi: config,\n\t\t\t\t\tfsPath: config.fsPath,\n\t\t\t\t\tposixPath: config.path,\n\t\t\t\t\tworkspaceFolder: root\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn configs.values();\n\t}\n\n\tprivate async findConfigFiles(token: vscode.CancellationToken): Promise<vscode.Uri[]> {\n\t\treturn await vscode.workspace.findFiles('**/tsconfig*.json', '**/{node_modules,.*}/**', undefined, token);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as jsonc from 'jsonc-parser';\nimport { basename, dirname, join } from 'path';\nimport * as vscode from 'vscode';\nimport { coalesce, flatten } from '../utils/arrays';\n\nfunction mapChildren<R>(node: jsonc.Node | undefined, f: (x: jsonc.Node) => R): R[] {\n\treturn node && node.type === 'array' && node.children\n\t\t? node.children.map(f)\n\t\t: [];\n}\n\nclass TsconfigLinkProvider implements vscode.DocumentLinkProvider {\n\n\tpublic provideDocumentLinks(\n\t\tdocument: vscode.TextDocument,\n\t\t_token: vscode.CancellationToken\n\t): vscode.ProviderResult<vscode.DocumentLink[]> {\n\t\tconst root = jsonc.parseTree(document.getText());\n\t\tif (!root) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn coalesce([\n\t\t\tthis.getExtendsLink(document, root),\n\t\t\t...this.getFilesLinks(document, root),\n\t\t\t...this.getReferencesLinks(document, root)\n\t\t]);\n\t}\n\n\tprivate getExtendsLink(document: vscode.TextDocument, root: jsonc.Node): vscode.DocumentLink | undefined {\n\t\tconst extendsNode = jsonc.findNodeAtLocation(root, ['extends']);\n\t\tif (!this.isPathValue(extendsNode)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (extendsNode.value.startsWith('.')) {\n\t\t\treturn new vscode.DocumentLink(\n\t\t\t\tthis.getRange(document, extendsNode),\n\t\t\t\tvscode.Uri.file(join(dirname(document.uri.fsPath), extendsNode.value + (extendsNode.value.endsWith('.json') ? '' : '.json')))\n\t\t\t);\n\t\t}\n\n\t\tconst workspaceFolderPath = vscode.workspace.getWorkspaceFolder(document.uri)!.uri.fsPath;\n\t\treturn new vscode.DocumentLink(\n\t\t\tthis.getRange(document, extendsNode),\n\t\t\tvscode.Uri.file(join(workspaceFolderPath, 'node_modules', extendsNode.value + (extendsNode.value.endsWith('.json') ? '' : '.json')))\n\t\t);\n\t}\n\n\tprivate getFilesLinks(document: vscode.TextDocument, root: jsonc.Node) {\n\t\treturn mapChildren(\n\t\t\tjsonc.findNodeAtLocation(root, ['files']),\n\t\t\tchild => this.pathNodeToLink(document, child));\n\t}\n\n\tprivate getReferencesLinks(document: vscode.TextDocument, root: jsonc.Node) {\n\t\treturn mapChildren(\n\t\t\tjsonc.findNodeAtLocation(root, ['references']),\n\t\t\tchild => {\n\t\t\t\tconst pathNode = jsonc.findNodeAtLocation(child, ['path']);\n\t\t\t\tif (!this.isPathValue(pathNode)) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\treturn new vscode.DocumentLink(this.getRange(document, pathNode),\n\t\t\t\t\tbasename(pathNode.value).endsWith('.json')\n\t\t\t\t\t\t? this.getFileTarget(document, pathNode)\n\t\t\t\t\t\t: this.getFolderTarget(document, pathNode));\n\t\t\t});\n\t}\n\n\tprivate pathNodeToLink(\n\t\tdocument: vscode.TextDocument,\n\t\tnode: jsonc.Node | undefined\n\t): vscode.DocumentLink | undefined {\n\t\treturn this.isPathValue(node)\n\t\t\t? new vscode.DocumentLink(this.getRange(document, node), this.getFileTarget(document, node))\n\t\t\t: undefined;\n\t}\n\n\tprivate isPathValue(extendsNode: jsonc.Node | undefined): extendsNode is jsonc.Node {\n\t\treturn extendsNode\n\t\t\t&& extendsNode.type === 'string'\n\t\t\t&& extendsNode.value\n\t\t\t&& !(extendsNode.value as string).includes('*'); // don't treat globs as links.\n\t}\n\n\tprivate getFileTarget(document: vscode.TextDocument, node: jsonc.Node): vscode.Uri {\n\t\treturn vscode.Uri.file(join(dirname(document.uri.fsPath), node!.value));\n\t}\n\n\tprivate getFolderTarget(document: vscode.TextDocument, node: jsonc.Node): vscode.Uri {\n\t\treturn vscode.Uri.file(join(dirname(document.uri.fsPath), node!.value, 'tsconfig.json'));\n\t}\n\n\tprivate getRange(document: vscode.TextDocument, node: jsonc.Node) {\n\t\tconst offset = node!.offset;\n\t\tconst start = document.positionAt(offset + 1);\n\t\tconst end = document.positionAt(offset + (node!.length - 1));\n\t\treturn new vscode.Range(start, end);\n\t}\n}\n\nexport function register() {\n\tconst patterns: vscode.GlobPattern[] = [\n\t\t'**/[jt]sconfig.json',\n\t\t'**/[jt]sconfig.*.json',\n\t];\n\n\tconst languages = ['json', 'jsonc'];\n\n\tconst selector: vscode.DocumentSelector = flatten(\n\t\tlanguages.map(language =>\n\t\t\tpatterns.map((pattern): vscode.DocumentFilter => ({ language, pattern }))));\n\n\treturn vscode.languages.registerDocumentLinkProvider(selector, new TsconfigLinkProvider());\n}\n"],"sourceRoot":""}